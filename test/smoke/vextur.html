<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>Vextur Keyboards</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" href="data:," />
  </head>

  <body>
    <header>
      <h1>Vextur Keyboards</h1>
    </header>
    <main class="centered" tabindex="0">
      <math-field id="mf" virtual-keyboard-mode="off"> </math-field>
    </main>

    <script type="module">
      import '/dist/mathlive.mjs';
      const VIRTUAL_KEYBOARD_LAYERS = {
        'secondary-layer': {
          rows: [
            [
              {
                label: '&#x21e7;',
                class: 'shift modifier font-glyph bottom left w15 layer-switch',
                layer: 'geometry-layer',
              },
              {
                class: 'tex',
                label: 'x',
                key: 'x',
                insert: 'y',
                altKeys: [{ class: 'w15', latex: '\\cos\\left( #0 \\right)' }],
              },
              // { class: "w15", latex: "\\sin\\left( #0 \\right)" },
              { class: 'w15', label: 'cos(x)', shifted: 'sin (x)' },
              { class: 'w15', latex: '\\tan\\left( #0 \\right)' },
              { class: 'separator w5' },
              { latex: '\\land' },
              { latex: '\\lor' },
              { latex: '\\lnot' },
              { class: 'separator w5' },
              { latex: '\\approx' },
            ],
            [
              { class: 'w15', latex: '\\sin^{-1}\\left( #0 \\right)' },
              { class: 'w15', latex: '\\cos^{-1}\\left( #0 \\right)' },
              { class: 'w15', latex: '\\tan^{-1}\\left( #0 \\right)' },
              { class: 'separator w5' },
              { class: 'w15', latex: '#@^{#?}' },
              { class: 'w15', latex: '#@^2' },
              { class: 'separator w5' },
              { latex: '\\cong' },
            ],
            [
              {
                class: 'w15',
                latex: '\\begin{vmatrix}#?&#?\\\\#?&#?\\end{vmatrix}',
              },
              { latex: '\\sqrt{#@}' },
              { latex: '\\pm' },
              { latex: '\\overarc{#@}' },
              { latex: '\\sim' },
              { class: 'w15', latex: '#@_{#?}' },
            ],
            [
              { class: 'separator w20' },
              { class: 'separator w20' },
              { class: 'separator w20' },
              { class: 'separator w15' },
              {
                class: 'action',
                label: "<svg><use xlink:href='#svg-arrow-left' /></svg>",
                command: ['performWithFeedback', 'moveToPreviousChar'],
              },
              {
                class: 'action',
                label: "<svg><use xlink:href='#svg-arrow-right' /></svg>",
                command: ['performWithFeedback', 'moveToNextChar'],
              },
            ],
          ],
        },
        'geometry-layer': {
          rows: [
            [
              // <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'>&#x21e7;</li>

              { latex: '\\vert' },
              { latex: '\\not{\\vert}' },
              { latex: '\\parallel' },
              { latex: '\\bot' },
              { latex: '\\overrightarrow{#@}' },
              { latex: '\\begin{pmatrix}#0\\\\#0\\end{pmatrix}' },
            ],
            [
              { latex: '\\measuredangle' },
              { latex: ';' },
              { latex: '\\longmapsto' },
              { latex: '\\left\\lvert #0 \\right\\rvert' },
              { latex: '\\left\\lvert \\overline{#0} \\right\\rvert' },
              { latex: '\\overline{#@}' },
            ],
            [],
            [
              { class: 'separator w20' },
              { class: 'separator w20' },
              { class: 'separator w20' },
              { class: 'separator w15' },
              {
                class: 'action',
                label: "<svg><use xlink:href='#svg-arrow-left' /></svg>",
                command: ['performWithFeedback', 'moveToPreviousChar'],
              },
              {
                class: 'action',
                label: "<svg><use xlink:href='#svg-arrow-right' /></svg>",
                command: ['performWithFeedback', 'moveToNextChar'],
              },
            ],
          ],
        },
        'basic-layer': {
          rows: [
            [
              { label: '7', key: '7' },
              { label: '8', key: '8' },
              { label: '9', key: '9' },
              { latex: '\\div', insert: '\\frac{#@}{#?}' },
            ],
            [
              { label: '4', latex: '4' },
              { label: '5', key: '5' },
              { label: '6', key: '6' },
              { latex: '\\times' },
            ],
            [
              { label: '1', key: '1' },
              { label: '2', key: '2' },
              { label: '3', key: '3' },
              { label: '-', key: '-' },
            ],
            [
              { label: '0', key: '0' },
              { label: ',', insert: '{,}' },
              { label: '=', key: '=' },
              { label: '+', key: '+' },
            ],
            [
              { class: 'separator w10' },
              {
                class: 'action',
                label: "<svg><use xlink:href='#svg-arrow-left' /></svg>",
                command: ['performWithFeedback', 'moveToPreviousChar'],
              },
              {
                class: 'action',
                label: "<svg><use xlink:href='#svg-arrow-right' /></svg>",
                command: ['performWithFeedback', 'moveToNextChar'],
              },
              {
                class: 'action font-glyph bottom right',
                label: '&#x232b;',
                command: ['performWithFeedback', 'deleteBackward'],
              },
            ],
          ],
        },
        'intervals-layer': {
          style: {
            accent: 'background-color: orange',
          },
          rows: [
            [
              { label: '7', key: '7' },
              { label: '8', key: '8' },
              { label: '9', key: '9' },
              { latex: '\\div', insert: '\\frac{#@}{#?}' },
              { latex: '\\lbrack', class: 'accent' },
            ],
            [
              { label: '4', latex: '4' },
              { label: '5', key: '5' },
              { label: '6', key: '6' },
              { latex: '\\times' },
            ],
            [
              { label: '1', key: '1' },
              { label: '2', key: '2' },
              { label: '3', key: '3' },
              { label: '-', key: '-' },
            ],
            [
              { label: '0', key: '0' },
              { label: ',', insert: '{,}' },
              { label: '=', key: '=' },
              { label: '+', key: '+' },
            ],
            [
              { class: 'separator w10' },
              {
                class: 'action',
                label: "<svg><use xlink:href='#svg-arrow-left' /></svg>",
                command: ['performWithFeedback', 'moveToPreviousChar'],
              },
              {
                class: 'action',
                label: "<svg><use xlink:href='#svg-arrow-right' /></svg>",
                command: ['performWithFeedback', 'moveToNextChar'],
              },
              {
                class: 'action font-glyph bottom right',
                label: '&#x232b;',
                command: ['performWithFeedback', 'deleteBackward'],
              },
            ],
          ],
        },
      };

      const KEYBOARDS = {
        'basic': {
          label: 'Basique',
          tooltip: 'Basique',
          layer: 'basic-layer',
        },
        'intervals': {
          label: 'Intervalles',
          tooltip: 'Intervalles',
          layer: 'intervals-layer',
        },
        'sets': {
          label: 'Ensembles',
          tooltip: 'Ensembles',
          layer: 'sets-layer',
        },
        'inequalities': {
          label: 'Inegalites',
          tooltip: 'Inegalites',
          layer: 'inequalities-layer',
        },
        'analysis': {
          label: 'Analyse',
          tooltip: 'Polynômes, Expressions algébriques',
          layer: 'analysis-layer',
        },
        'geometry': {
          label: 'Géométrie',
          tooltip: 'Equations de droites',
          layer: 'geometry-layer',
        },
        'trigonometry': {
          label: 'Trigonométrie',
          tooltip: 'Trigonométrie',
          layer: ['basic-layer', 'trigonometry-layer', 'roman'],
        },
        'vectors': {},
        'series-p': {},
        'series-t': {},
        'total-analysis': {},
        'secondary': {
          label: 'Secondary',
          tooltip: 'Secondary',
          layer: 'secondary-layer',
          layers: ['secondary-layer', 'geometry-layer'],
        },
      };

      const mf = document.getElementById('mf');

      mf.setOptions({
        customVirtualKeyboardLayers: VIRTUAL_KEYBOARD_LAYERS,
        customVirtualKeyboards: KEYBOARDS,
        virtualKeyboards:
          'basic intervals sets inequalities analysis geometry trigonometry vectors series-p series-t total-analysis',
        virtualKeyboardMode: 'off',
      });
      mf.virtualKeyboardState = 'visible';
    </script>
  </body>
</html>
