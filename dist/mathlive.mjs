var t={"AMS-Regular":{65:[0,.68889,0,0],66:[0,.68889,0,0],67:[0,.68889,0,0],68:[0,.68889,0,0],69:[0,.68889,0,0],70:[0,.68889,0,0],71:[0,.68889,0,0],72:[0,.68889,0,0],73:[0,.68889,0,0],74:[.16667,.68889,0,0],75:[0,.68889,0,0],76:[0,.68889,0,0],77:[0,.68889,0,0],78:[0,.68889,0,0],79:[.16667,.68889,0,0],80:[0,.68889,0,0],81:[.16667,.68889,0,0],82:[0,.68889,0,0],83:[0,.68889,0,0],84:[0,.68889,0,0],85:[0,.68889,0,0],86:[0,.68889,0,0],87:[0,.68889,0,0],88:[0,.68889,0,0],89:[0,.68889,0,0],90:[0,.68889,0,0],107:[0,.68889,0,0],165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:[0,.68889,0,0],295:[0,.68889,0,0],710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:[.08167,.58167,0,0],1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:[0,.68889,0,0],8487:[0,.68889,0,0],8498:[0,.68889,0,0],8502:[0,.68889,0,0],8503:[0,.68889,0,0],8504:[0,.68889,0,0],8513:[0,.68889,0,0],8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:[0,.69224,0,0],8625:[0,.69224,0,0],8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:[0,.68889,0,0],8709:[.08167,.58167,0,0],8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:[.08167,.58167,0,0],8733:[0,.69224,0,0],8736:[0,.69224,0,0],8737:[0,.69224,0,0],8738:[.03517,.52239,0,0],8739:[.08167,.58167,0,0],8740:[.25142,.74111,0,0],8741:[.08167,.58167,0,0],8742:[.25142,.74111,0,0],8756:[0,.69224,0,0],8757:[0,.69224,0,0],8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:[.08167,.58167,0,0],8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:[0,.69224,0,0],8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:[0,.69224,0,0],8873:[0,.69224,0,0],8874:[0,.69224,0,0],8876:[0,.68889,0,0],8877:[0,.68889,0,0],8878:[0,.68889,0,0],8879:[0,.68889,0,0],8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:[.08167,.58167,0,0],8905:[.08167,.58167,0,0],8906:[.08167,.58167,0,0],8907:[0,.69224,0,0],8908:[0,.69224,0,0],8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:[0,.69224,0,0],8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:[0,.69224,0,0],9488:[0,.69224,0,0],9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:[0,.69224,0,0],10016:[0,.69224,0,0],10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:[.08167,.58167,0,0],57351:[.08167,.58167,0,0],57352:[.08167,.58167,0,0],57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:[0,.64444,0,0],55:[.19444,.43056,0,0],56:[0,.64444,0,0],57:[.19444,.43056,0,0],65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889]},"Fraktur-Regular":{33:[0,.69141,0,0],34:[0,.69141,0,0],38:[0,.69141,0,0],39:[0,.69141,0,0],40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:[0,.47534,0,0],49:[0,.47534,0,0],50:[0,.47534,0,0],51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:[0,.69141,0,0],55:[.18906,.47534,0,0],56:[0,.69141,0,0],57:[.18906,.47534,0,0],58:[0,.47534,0,0],59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:[0,.69141,0,0],65:[0,.69141,0,0],66:[0,.69141,0,0],67:[0,.69141,0,0],68:[0,.69141,0,0],69:[0,.69141,0,0],70:[.12604,.69141,0,0],71:[0,.69141,0,0],72:[.06302,.69141,0,0],73:[0,.69141,0,0],74:[.12604,.69141,0,0],75:[0,.69141,0,0],76:[0,.69141,0,0],77:[0,.69141,0,0],78:[0,.69141,0,0],79:[0,.69141,0,0],80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:[0,.69141,0,0],83:[0,.69141,0,0],84:[0,.69141,0,0],85:[0,.69141,0,0],86:[0,.69141,0,0],87:[0,.69141,0,0],88:[0,.69141,0,0],89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:[0,.69141,0,0],97:[0,.47534,0,0],98:[0,.69141,0,0],99:[0,.47534,0,0],100:[0,.62119,0,0],101:[0,.47534,0,0],102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:[0,.69141,0,0],106:[0,.69141,0,0],107:[0,.69141,0,0],108:[0,.69141,0,0],109:[0,.47534,0,0],110:[0,.47534,0,0],111:[0,.47534,0,0],112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:[0,.47534,0,0],115:[0,.47534,0,0],116:[0,.62119,0,0],117:[0,.47534,0,0],118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],8216:[0,.69141,0,0],8217:[0,.69141,0,0],58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:[0,.69141,0,0],58118:[0,.62119,0,0],58119:[0,.47534,0,0]},"Main-Bold":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:[0,.44444,0,0],46:[0,.15556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.44444,0,0],59:[.19444,.44444,0,0],60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,0,0],67:[0,.68611,0,0],68:[0,.68611,0,0],69:[0,.68611,0,0],70:[0,.68611,0,0],71:[0,.68611,0,0],72:[0,.68611,0,0],73:[0,.68611,0,0],74:[0,.68611,0,0],75:[0,.68611,0,0],76:[0,.68611,0,0],77:[0,.68611,0,0],78:[0,.68611,0,0],79:[0,.68611,0,0],80:[0,.68611,0,0],81:[.19444,.68611,0,0],82:[0,.68611,0,0],83:[0,.68611,0,0],84:[0,.68611,0,0],85:[0,.68611,0,0],86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:[0,.68611,0,0],89:[0,.68611,.02875,0],90:[0,.68611,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.13444,.03194,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:[0,.69444,0,0],105:[0,.69444,0,0],106:[.19444,.69444,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,0,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:[0,.44444,0,0],121:[.19444,.44444,.01597,0],122:[0,.44444,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.34444,0,0],168:[0,.69444,0,0],172:[0,.44444,0,0],176:[0,.69444,0,0],177:[.13333,.63333,0,0],184:[.17014,0,0,0],198:[0,.68611,0,0],215:[.13333,.63333,0,0],216:[.04861,.73472,0,0],223:[0,.69444,0,0],230:[0,.44444,0,0],247:[.13333,.63333,0,0],248:[.09722,.54167,0,0],305:[0,.44444,0,0],338:[0,.68611,0,0],339:[0,.44444,0,0],567:[.19444,.44444,0,0],710:[0,.69444,0,0],711:[0,.63194,0,0],713:[0,.59611,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.69444,0,0],730:[0,.69444,0,0],732:[0,.69444,0,0],733:[0,.69444,0,0],915:[0,.68611,0,0],916:[0,.68611,0,0],920:[0,.68611,0,0],923:[0,.68611,0,0],926:[0,.68611,0,0],928:[0,.68611,0,0],931:[0,.68611,0,0],933:[0,.68611,0,0],934:[0,.68611,0,0],936:[0,.68611,0,0],937:[0,.68611,0,0],8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8242:[0,.55556,0,0],8407:[0,.72444,.15486,0],8463:[0,.69444,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,0],8472:[.19444,.44444,0,0],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.10889,.39111,0,0],8593:[.19444,.69444,0,0],8594:[-.10889,.39111,0,0],8595:[.19444,.69444,0,0],8596:[-.10889,.39111,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:[.19444,.69444,0,0],8658:[-.10889,.39111,0,0],8659:[.19444,.69444,0,0],8660:[-.10889,.39111,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.06389,0],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68611,0,0],8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:[0,.44444,0,0],8734:[0,.44444,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:[.19444,.69444,0,0],8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:[0,.55556,0,0],8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:[.19444,.69444,0,0],9657:[-.02778,.47222,0,0],9661:[.19444,.69444,0,0],9667:[-.02778,.47222,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10815:[0,.68611,0,0],10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0],57376:[.19444,.69444,0,0]},"Main-BoldItalic":{33:[0,.69444,.11417,0],34:[0,.69444,.07939,0],35:[.19444,.69444,.06833,0],37:[.05556,.75,.12861,0],38:[0,.69444,.08528,0],39:[0,.69444,.12945,0],40:[.25,.75,.15806,0],41:[.25,.75,.03306,0],42:[0,.75,.14333,0],43:[.10333,.60333,.03306,0],44:[.19444,.14722,0,0],45:[0,.44444,.02611,0],46:[0,.14722,0,0],47:[.25,.75,.15806,0],48:[0,.64444,.13167,0],49:[0,.64444,.13167,0],50:[0,.64444,.13167,0],51:[0,.64444,.13167,0],52:[.19444,.64444,.13167,0],53:[0,.64444,.13167,0],54:[0,.64444,.13167,0],55:[.19444,.64444,.13167,0],56:[0,.64444,.13167,0],57:[0,.64444,.13167,0],58:[0,.44444,.06695,0],59:[.19444,.44444,.06695,0],61:[-.10889,.39111,.06833,0],63:[0,.69444,.11472,0],64:[0,.69444,.09208,0],65:[0,.68611,0,0],66:[0,.68611,.0992,0],67:[0,.68611,.14208,0],68:[0,.68611,.09062,0],69:[0,.68611,.11431,0],70:[0,.68611,.12903,0],71:[0,.68611,.07347,0],72:[0,.68611,.17208,0],73:[0,.68611,.15681,0],74:[0,.68611,.145,0],75:[0,.68611,.14208,0],76:[0,.68611,0,0],77:[0,.68611,.17208,0],78:[0,.68611,.17208,0],79:[0,.68611,.09062,0],80:[0,.68611,.0992,0],81:[.19444,.68611,.09062,0],82:[0,.68611,.02559,0],83:[0,.68611,.11264,0],84:[0,.68611,.12903,0],85:[0,.68611,.17208,0],86:[0,.68611,.18625,0],87:[0,.68611,.18625,0],88:[0,.68611,.15681,0],89:[0,.68611,.19803,0],90:[0,.68611,.14208,0],91:[.25,.75,.1875,0],93:[.25,.75,.09972,0],94:[0,.69444,.06709,0],95:[.31,.13444,.09811,0],97:[0,.44444,.09426,0],98:[0,.69444,.07861,0],99:[0,.44444,.05222,0],100:[0,.69444,.10861,0],101:[0,.44444,.085,0],102:[.19444,.69444,.21778,0],103:[.19444,.44444,.105,0],104:[0,.69444,.09426,0],105:[0,.69326,.11387,0],106:[.19444,.69326,.1672,0],107:[0,.69444,.11111,0],108:[0,.69444,.10861,0],109:[0,.44444,.09426,0],110:[0,.44444,.09426,0],111:[0,.44444,.07861,0],112:[.19444,.44444,.07861,0],113:[.19444,.44444,.105,0],114:[0,.44444,.11111,0],115:[0,.44444,.08167,0],116:[0,.63492,.09639,0],117:[0,.44444,.09426,0],118:[0,.44444,.11111,0],119:[0,.44444,.11111,0],120:[0,.44444,.12583,0],121:[.19444,.44444,.105,0],122:[0,.44444,.13889,0],126:[.35,.34444,.11472,0],163:[0,.69444,0,0],168:[0,.69444,.11473,0],176:[0,.69444,0,0],184:[.17014,0,0,0],198:[0,.68611,.11431,0],216:[.04861,.73472,.09062,0],223:[.19444,.69444,.09736,0],230:[0,.44444,.085,0],248:[.09722,.54167,.09458,0],305:[0,.44444,.09426,0],338:[0,.68611,.11431,0],339:[0,.44444,.085,0],567:[.19444,.44444,.04611,0],710:[0,.69444,.06709,0],711:[0,.63194,.08271,0],713:[0,.59444,.10444,0],714:[0,.69444,.08528,0],715:[0,.69444,0,0],728:[0,.69444,.10333,0],729:[0,.69444,.12945,0],730:[0,.69444,0,0],732:[0,.69444,.11472,0],733:[0,.69444,.11472,0],915:[0,.68611,.12903,0],916:[0,.68611,0,0],920:[0,.68611,.09062,0],923:[0,.68611,0,0],926:[0,.68611,.15092,0],928:[0,.68611,.17208,0],931:[0,.68611,.11431,0],933:[0,.68611,.10778,0],934:[0,.68611,.05632,0],936:[0,.68611,.10778,0],937:[0,.68611,.0992,0],8211:[0,.44444,.09811,0],8212:[0,.44444,.09811,0],8216:[0,.69444,.12945,0],8217:[0,.69444,.12945,0],8220:[0,.69444,.16772,0],8221:[0,.69444,.07939,0]},"Main-Italic":{33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:[0,.68333,0,0],66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:[0,.68333,0,0],77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],163:[0,.69444,0,0],168:[0,.66786,.10474,0],176:[0,.69444,0,0],184:[.17014,0,0,0],198:[0,.68333,.12028,0],216:[.04861,.73194,.09403,0],223:[.19444,.69444,.10514,0],230:[0,.43056,.07514,0],248:[.09722,.52778,.09194,0],305:[0,.43056,0,.02778],338:[0,.68333,.12028,0],339:[0,.43056,.07514,0],567:[.19444,.43056,0,.08334],710:[0,.69444,.06646,0],711:[0,.62847,.08295,0],713:[0,.56167,.10333,0],714:[0,.69444,.09694,0],715:[0,.69444,0,0],728:[0,.69444,.10806,0],729:[0,.66786,.11752,0],730:[0,.69444,0,0],732:[0,.66786,.11585,0],733:[0,.69444,.1225,0],915:[0,.68333,.13305,0],916:[0,.68333,0,0],920:[0,.68333,.09403,0],923:[0,.68333,0,0],926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:[0,.68889,0,0]},"Main-Regular":{32:[0,0,0,0],33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68333,0,0],66:[0,.68333,0,0],67:[0,.68333,0,0],68:[0,.68333,0,0],69:[0,.68333,0,0],70:[0,.68333,0,0],71:[0,.68333,0,0],72:[0,.68333,0,0],73:[0,.68333,0,0],74:[0,.68333,0,0],75:[0,.68333,0,0],76:[0,.68333,0,0],77:[0,.68333,0,0],78:[0,.68333,0,0],79:[0,.68333,0,0],80:[0,.68333,0,0],81:[.19444,.68333,0,0],82:[0,.68333,0,0],83:[0,.68333,0,0],84:[0,.68333,0,0],85:[0,.68333,0,0],86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:[0,.68333,0,0],89:[0,.68333,.025,0],90:[0,.68333,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.12056,.02778,0],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,0],100:[0,.69444,0,0],101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:[0,.69444,0,0],105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.31786,0,0],160:[0,0,0,0],167:[.19444,.69444,0,0],168:[0,.66786,0,0],172:[0,.43056,0,0],176:[0,.69444,0,0],177:[.08333,.58333,0,0],182:[.19444,.69444,0,0],184:[.17014,0,0,0],198:[0,.68333,0,0],215:[.08333,.58333,0,0],216:[.04861,.73194,0,0],223:[0,.69444,0,0],230:[0,.43056,0,0],247:[.08333,.58333,0,0],248:[.09722,.52778,0,0],305:[0,.43056,0,0],338:[0,.68333,0,0],339:[0,.43056,0,0],567:[.19444,.43056,0,0],710:[0,.69444,0,0],711:[0,.62847,0,0],713:[0,.56778,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.66786,0,0],730:[0,.69444,0,0],732:[0,.66786,0,0],733:[0,.69444,0,0],915:[0,.68333,0,0],916:[0,.68333,0,0],920:[0,.68333,0,0],923:[0,.68333,0,0],926:[0,.68333,0,0],928:[0,.68333,0,0],931:[0,.68333,0,0],933:[0,.68333,0,0],934:[0,.68333,0,0],936:[0,.68333,0,0],937:[0,.68333,0,0],8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8230:[0,.12,0,0],8242:[0,.55556,0,0],8407:[0,.71444,.15382,0],8463:[0,.68889,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.13313,.36687,0,0],8593:[.19444,.69444,0,0],8594:[-.13313,.36687,0,0],8595:[.19444,.69444,0,0],8596:[-.13313,.36687,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:[.19444,.69444,0,0],8658:[-.13313,.36687,0,0],8659:[.19444,.69444,0,0],8660:[-.13313,.36687,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.05556,.08334],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68333,0,0],8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:[.19444,.69444,0,0],8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:[0,.55556,0,0],8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:[.19444,.69444,0,0],9657:[-.03472,.46528,0,0],9661:[.19444,.69444,0,0],9667:[-.03472,.46528,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:[0,.68333,0,0],10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0],57376:[.19444,.69444,0,0]},"Math-BoldItalic":{65:[0,.68611,0,0],66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:[0,.68611,0,0],72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:[0,.68611,0,0],77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:[0,.69444,0,0],105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:[0,.44444,0,0],121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],915:[0,.68611,.15972,0],916:[0,.68611,0,0],920:[0,.68611,.03194,0],923:[0,.68611,0,0],926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:[0,.68611,0,0],936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:[0,.44444,0,0],946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:[0,.44444,0,0],950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:[0,.44444,0,0],954:[0,.44444,0,0],955:[0,.69444,0,0],956:[.19444,.44444,0,0],957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:[0,.44444,0,0],960:[0,.44444,.03704,0],961:[.19444,.44444,0,0],962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:[.19444,.44444,0,0],967:[.19444,.44444,0,0],968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:[0,.69444,0,0],981:[.19444,.69444,0,0],982:[0,.44444,.03194,0],1009:[.19444,.44444,0,0],1013:[0,.44444,0,0]},"Math-Italic":{65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"SansSerif-Bold":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.11667,.61667,0,0],44:[.10556,.13056,0,0],45:[0,.45833,0,0],46:[0,.13056,0,0],47:[.25,.75,0,0],48:[0,.69444,0,0],49:[0,.69444,0,0],50:[0,.69444,0,0],51:[0,.69444,0,0],52:[0,.69444,0,0],53:[0,.69444,0,0],54:[0,.69444,0,0],55:[0,.69444,0,0],56:[0,.69444,0,0],57:[0,.69444,0,0],58:[0,.45833,0,0],59:[.10556,.45833,0,0],61:[-.09375,.40625,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.69444,0,0],66:[0,.69444,0,0],67:[0,.69444,0,0],68:[0,.69444,0,0],69:[0,.69444,0,0],70:[0,.69444,0,0],71:[0,.69444,0,0],72:[0,.69444,0,0],73:[0,.69444,0,0],74:[0,.69444,0,0],75:[0,.69444,0,0],76:[0,.69444,0,0],77:[0,.69444,0,0],78:[0,.69444,0,0],79:[0,.69444,0,0],80:[0,.69444,0,0],81:[.10556,.69444,0,0],82:[0,.69444,0,0],83:[0,.69444,0,0],84:[0,.69444,0,0],85:[0,.69444,0,0],86:[0,.69444,.01528,0],87:[0,.69444,.01528,0],88:[0,.69444,0,0],89:[0,.69444,.0275,0],90:[0,.69444,0,0],91:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.35,.10833,.03056,0],97:[0,.45833,0,0],98:[0,.69444,0,0],99:[0,.45833,0,0],100:[0,.69444,0,0],101:[0,.45833,0,0],102:[0,.69444,.07639,0],103:[.19444,.45833,.01528,0],104:[0,.69444,0,0],105:[0,.69444,0,0],106:[.19444,.69444,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.45833,0,0],110:[0,.45833,0,0],111:[0,.45833,0,0],112:[.19444,.45833,0,0],113:[.19444,.45833,0,0],114:[0,.45833,.01528,0],115:[0,.45833,0,0],116:[0,.58929,0,0],117:[0,.45833,0,0],118:[0,.45833,.01528,0],119:[0,.45833,.01528,0],120:[0,.45833,0,0],121:[.19444,.45833,.01528,0],122:[0,.45833,0,0],126:[.35,.34444,0,0],168:[0,.69444,0,0],176:[0,.69444,0,0],180:[0,.69444,0,0],184:[.17014,0,0,0],305:[0,.45833,0,0],567:[.19444,.45833,0,0],710:[0,.69444,0,0],711:[0,.63542,0,0],713:[0,.63778,0,0],728:[0,.69444,0,0],729:[0,.69444,0,0],730:[0,.69444,0,0],732:[0,.69444,0,0],733:[0,.69444,0,0],915:[0,.69444,0,0],916:[0,.69444,0,0],920:[0,.69444,0,0],923:[0,.69444,0,0],926:[0,.69444,0,0],928:[0,.69444,0,0],931:[0,.69444,0,0],933:[0,.69444,0,0],934:[0,.69444,0,0],936:[0,.69444,0,0],937:[0,.69444,0,0],8211:[0,.45833,.03056,0],8212:[0,.45833,.03056,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0]},"SansSerif-Italic":{33:[0,.69444,.05733,0],34:[0,.69444,.00316,0],35:[.19444,.69444,.05087,0],36:[.05556,.75,.11156,0],37:[.05556,.75,.03126,0],38:[0,.69444,.03058,0],39:[0,.69444,.07816,0],40:[.25,.75,.13164,0],41:[.25,.75,.02536,0],42:[0,.75,.11775,0],43:[.08333,.58333,.02536,0],44:[.125,.08333,0,0],45:[0,.44444,.01946,0],46:[0,.08333,0,0],47:[.25,.75,.13164,0],48:[0,.65556,.11156,0],49:[0,.65556,.11156,0],50:[0,.65556,.11156,0],51:[0,.65556,.11156,0],52:[0,.65556,.11156,0],53:[0,.65556,.11156,0],54:[0,.65556,.11156,0],55:[0,.65556,.11156,0],56:[0,.65556,.11156,0],57:[0,.65556,.11156,0],58:[0,.44444,.02502,0],59:[.125,.44444,.02502,0],61:[-.13,.37,.05087,0],63:[0,.69444,.11809,0],64:[0,.69444,.07555,0],65:[0,.69444,0,0],66:[0,.69444,.08293,0],67:[0,.69444,.11983,0],68:[0,.69444,.07555,0],69:[0,.69444,.11983,0],70:[0,.69444,.13372,0],71:[0,.69444,.11983,0],72:[0,.69444,.08094,0],73:[0,.69444,.13372,0],74:[0,.69444,.08094,0],75:[0,.69444,.11983,0],76:[0,.69444,0,0],77:[0,.69444,.08094,0],78:[0,.69444,.08094,0],79:[0,.69444,.07555,0],80:[0,.69444,.08293,0],81:[.125,.69444,.07555,0],82:[0,.69444,.08293,0],83:[0,.69444,.09205,0],84:[0,.69444,.13372,0],85:[0,.69444,.08094,0],86:[0,.69444,.1615,0],87:[0,.69444,.1615,0],88:[0,.69444,.13372,0],89:[0,.69444,.17261,0],90:[0,.69444,.11983,0],91:[.25,.75,.15942,0],93:[.25,.75,.08719,0],94:[0,.69444,.0799,0],95:[.35,.09444,.08616,0],97:[0,.44444,.00981,0],98:[0,.69444,.03057,0],99:[0,.44444,.08336,0],100:[0,.69444,.09483,0],101:[0,.44444,.06778,0],102:[0,.69444,.21705,0],103:[.19444,.44444,.10836,0],104:[0,.69444,.01778,0],105:[0,.67937,.09718,0],106:[.19444,.67937,.09162,0],107:[0,.69444,.08336,0],108:[0,.69444,.09483,0],109:[0,.44444,.01778,0],110:[0,.44444,.01778,0],111:[0,.44444,.06613,0],112:[.19444,.44444,.0389,0],113:[.19444,.44444,.04169,0],114:[0,.44444,.10836,0],115:[0,.44444,.0778,0],116:[0,.57143,.07225,0],117:[0,.44444,.04169,0],118:[0,.44444,.10836,0],119:[0,.44444,.10836,0],120:[0,.44444,.09169,0],121:[.19444,.44444,.10836,0],122:[0,.44444,.08752,0],126:[.35,.32659,.08826,0],168:[0,.67937,.06385,0],176:[0,.69444,0,0],184:[.17014,0,0,0],305:[0,.44444,.04169,0],567:[.19444,.44444,.04169,0],710:[0,.69444,.0799,0],711:[0,.63194,.08432,0],713:[0,.60889,.08776,0],714:[0,.69444,.09205,0],715:[0,.69444,0,0],728:[0,.69444,.09483,0],729:[0,.67937,.07774,0],730:[0,.69444,0,0],732:[0,.67659,.08826,0],733:[0,.69444,.09205,0],915:[0,.69444,.13372,0],916:[0,.69444,0,0],920:[0,.69444,.07555,0],923:[0,.69444,0,0],926:[0,.69444,.12816,0],928:[0,.69444,.08094,0],931:[0,.69444,.11983,0],933:[0,.69444,.09031,0],934:[0,.69444,.04603,0],936:[0,.69444,.09031,0],937:[0,.69444,.08293,0],8211:[0,.44444,.08616,0],8212:[0,.44444,.08616,0],8216:[0,.69444,.07816,0],8217:[0,.69444,.07816,0],8220:[0,.69444,.14205,0],8221:[0,.69444,.00316,0]},"SansSerif-Regular":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:[0,.44444,0,0],46:[0,.08333,0,0],47:[.25,.75,0,0],48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:[0,.44444,0,0],59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.69444,0,0],66:[0,.69444,0,0],67:[0,.69444,0,0],68:[0,.69444,0,0],69:[0,.69444,0,0],70:[0,.69444,0,0],71:[0,.69444,0,0],72:[0,.69444,0,0],73:[0,.69444,0,0],74:[0,.69444,0,0],75:[0,.69444,0,0],76:[0,.69444,0,0],77:[0,.69444,0,0],78:[0,.69444,0,0],79:[0,.69444,0,0],80:[0,.69444,0,0],81:[.125,.69444,0,0],82:[0,.69444,0,0],83:[0,.69444,0,0],84:[0,.69444,0,0],85:[0,.69444,0,0],86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:[0,.69444,0,0],89:[0,.69444,.025,0],90:[0,.69444,0,0],91:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.35,.09444,.02778,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:[0,.69444,0,0],105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,.01389,0],115:[0,.44444,0,0],116:[0,.57143,0,0],117:[0,.44444,0,0],118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:[0,.44444,0,0],121:[.19444,.44444,.01389,0],122:[0,.44444,0,0],126:[.35,.32659,0,0],168:[0,.67937,0,0],176:[0,.69444,0,0],184:[.17014,0,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],710:[0,.69444,0,0],711:[0,.63194,0,0],713:[0,.60889,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.67937,0,0],730:[0,.69444,0,0],732:[0,.67659,0,0],733:[0,.69444,0,0],915:[0,.69444,0,0],916:[0,.69444,0,0],920:[0,.69444,0,0],923:[0,.69444,0,0],926:[0,.69444,0,0],928:[0,.69444,0,0],931:[0,.69444,0,0],933:[0,.69444,0,0],934:[0,.69444,0,0],936:[0,.69444,0,0],937:[0,.69444,0,0],8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0]},"Script-Regular":{65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0]},"Size1-Regular":{40:[.35001,.85,0,0],41:[.35001,.85,0,0],47:[.35001,.85,0,0],91:[.35001,.85,0,0],92:[.35001,.85,0,0],93:[.35001,.85,0,0],123:[.35001,.85,0,0],125:[.35001,.85,0,0],710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:[.25001,.75,0,0],8720:[.25001,.75,0,0],8721:[.25001,.75,0,0],8730:[.35001,.85,0,0],8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:[.25001,.75,0,0],8897:[.25001,.75,0,0],8898:[.25001,.75,0,0],8899:[.25001,.75,0,0],8968:[.35001,.85,0,0],8969:[.35001,.85,0,0],8970:[.35001,.85,0,0],8971:[.35001,.85,0,0],9168:[-99e-5,.601,0,0],10216:[.35001,.85,0,0],10217:[.35001,.85,0,0],10752:[.25001,.75,0,0],10753:[.25001,.75,0,0],10754:[.25001,.75,0,0],10756:[.25001,.75,0,0],10758:[.25001,.75,0,0]},"Size2-Regular":{40:[.65002,1.15,0,0],41:[.65002,1.15,0,0],47:[.65002,1.15,0,0],91:[.65002,1.15,0,0],92:[.65002,1.15,0,0],93:[.65002,1.15,0,0],123:[.65002,1.15,0,0],125:[.65002,1.15,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8719:[.55001,1.05,0,0],8720:[.55001,1.05,0,0],8721:[.55001,1.05,0,0],8730:[.65002,1.15,0,0],8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:[.55001,1.05,0,0],8897:[.55001,1.05,0,0],8898:[.55001,1.05,0,0],8899:[.55001,1.05,0,0],8968:[.65002,1.15,0,0],8969:[.65002,1.15,0,0],8970:[.65002,1.15,0,0],8971:[.65002,1.15,0,0],10216:[.65002,1.15,0,0],10217:[.65002,1.15,0,0],10752:[.55001,1.05,0,0],10753:[.55001,1.05,0,0],10754:[.55001,1.05,0,0],10756:[.55001,1.05,0,0],10758:[.55001,1.05,0,0]},"Size3-Regular":{40:[.95003,1.45,0,0],41:[.95003,1.45,0,0],47:[.95003,1.45,0,0],91:[.95003,1.45,0,0],92:[.95003,1.45,0,0],93:[.95003,1.45,0,0],123:[.95003,1.45,0,0],125:[.95003,1.45,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8730:[.95003,1.45,0,0],8968:[.95003,1.45,0,0],8969:[.95003,1.45,0,0],8970:[.95003,1.45,0,0],8971:[.95003,1.45,0,0],10216:[.95003,1.45,0,0],10217:[.95003,1.45,0,0]},"Size4-Regular":{40:[1.25003,1.75,0,0],41:[1.25003,1.75,0,0],47:[1.25003,1.75,0,0],91:[1.25003,1.75,0,0],92:[1.25003,1.75,0,0],93:[1.25003,1.75,0,0],123:[1.25003,1.75,0,0],125:[1.25003,1.75,0,0],710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:[1.25003,1.75,0,0],8968:[1.25003,1.75,0,0],8969:[1.25003,1.75,0,0],8970:[1.25003,1.75,0,0],8971:[1.25003,1.75,0,0],9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:[.65002,1.15,0,0],9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:[.65002,1.15,0,0],9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:[1.25003,1.75,0,0],10217:[1.25003,1.75,0,0],57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{32:[0,0,0,0],33:[0,.61111,0,0],34:[0,.61111,0,0],35:[0,.61111,0,0],36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:[0,.61111,0,0],39:[0,.61111,0,0],40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:[0,.61111,0,0],49:[0,.61111,0,0],50:[0,.61111,0,0],51:[0,.61111,0,0],52:[0,.61111,0,0],53:[0,.61111,0,0],54:[0,.61111,0,0],55:[0,.61111,0,0],56:[0,.61111,0,0],57:[0,.61111,0,0],58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:[0,.61111,0,0],64:[0,.61111,0,0],65:[0,.61111,0,0],66:[0,.61111,0,0],67:[0,.61111,0,0],68:[0,.61111,0,0],69:[0,.61111,0,0],70:[0,.61111,0,0],71:[0,.61111,0,0],72:[0,.61111,0,0],73:[0,.61111,0,0],74:[0,.61111,0,0],75:[0,.61111,0,0],76:[0,.61111,0,0],77:[0,.61111,0,0],78:[0,.61111,0,0],79:[0,.61111,0,0],80:[0,.61111,0,0],81:[.13889,.61111,0,0],82:[0,.61111,0,0],83:[0,.61111,0,0],84:[0,.61111,0,0],85:[0,.61111,0,0],86:[0,.61111,0,0],87:[0,.61111,0,0],88:[0,.61111,0,0],89:[0,.61111,0,0],90:[0,.61111,0,0],91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:[0,.61111,0,0],95:[.09514,0,0,0],96:[0,.61111,0,0],97:[0,.43056,0,0],98:[0,.61111,0,0],99:[0,.43056,0,0],100:[0,.61111,0,0],101:[0,.43056,0,0],102:[0,.61111,0,0],103:[.22222,.43056,0,0],104:[0,.61111,0,0],105:[0,.61111,0,0],106:[.22222,.61111,0,0],107:[0,.61111,0,0],108:[0,.61111,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:[0,.61111,0,0],127:[0,.61111,0,0],160:[0,0,0,0],176:[0,.61111,0,0],184:[.19445,0,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],711:[0,.56597,0,0],713:[0,.56555,0,0],714:[0,.61111,0,0],715:[0,.61111,0,0],728:[0,.61111,0,0],730:[0,.61111,0,0],770:[0,.61111,0,0],771:[0,.61111,0,0],776:[0,.61111,0,0],915:[0,.61111,0,0],916:[0,.61111,0,0],920:[0,.61111,0,0],923:[0,.61111,0,0],926:[0,.61111,0,0],928:[0,.61111,0,0],931:[0,.61111,0,0],933:[0,.61111,0,0],934:[0,.61111,0,0],936:[0,.61111,0,0],937:[0,.61111,0,0],8216:[0,.61111,0,0],8217:[0,.61111,0,0],8242:[0,.61111,0,0],9251:[.11111,.21944,0,0]}};const e=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,s={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25]},i=.04,a=.111,r=.166,n=.2,o=.6,l=.1,c=10,h=.2,m=.5,d=1.2,p=.04,u=.3,f=.04,g={" ":" ","​":" ","Å":"A","Ç":"C","Ð":"D","Þ":"o","å":"a","ç":"c","ð":"d","þ":"o","А":"A","Б":"B","В":"B","Г":"F","Д":"A","Е":"E","Ж":"K","З":"3","И":"N","Й":"N","К":"K","Л":"N","М":"M","Н":"H","О":"O","П":"N","Р":"P","С":"C","Т":"T","У":"y","Ф":"O","Х":"X","Ц":"U","Ч":"h","Ш":"W","Щ":"W","Ъ":"B","Ы":"X","Ь":"B","Э":"3","Ю":"X","Я":"R","а":"a","б":"b","в":"a","г":"r","д":"y","е":"e","ж":"m","з":"e","и":"n","й":"n","к":"n","л":"n","м":"m","н":"n","о":"o","п":"n","р":"p","с":"c","т":"o","у":"y","ф":"b","х":"x","ц":"n","ч":"n","ш":"w","щ":"w","ъ":"a","ы":"m","ь":"a","э":"e","ю":"m","я":"r"};function y(s,i){let a=s.charCodeAt(0);s[0]in g?a=g[s[0]].charCodeAt(0):e.test(s[0])&&(a=77);const r=t[i][a];return r?{depth:r[0],height:r[1],italic:r[2],skew:r[3]}:{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}function b(t,e,s){if("string"==typeof t){const s=t.match(/([-+]?[0-9.]*)\s*([a-zA-Z]+)/);s?(t=parseFloat(s[1]),e=s[2].toLowerCase()):t=parseFloat(t)}const i={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:.75,em:c,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[e]||1;if(isFinite(s)){const e=Math.pow(10,s);return Math.round(t/c*i*e)/e}return t/c*i}function x(t,e){return b(t,e)*(4/3)*c}const v=["displaystyle textstyle","textstyle","scriptstyle","scriptscriptstyle"],k=[["","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-textstyle displaystyle textstyle","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-scriptstyle textstyle displaystyle","reset-scriptstyle textstyle","","reset-scriptstyle scriptscriptstyle"],["reset-scriptscriptstyle textstyle displaystyle","reset-scriptscriptstyle textstyle","reset-scriptscriptstyle scriptstyle",""]];let w=[];const S=[4,5,4,5,6,7,6,7],M=[5,5,5,5,7,7,7,7],A=[2,3,4,5,6,7,6,7],_=[3,3,5,5,7,7,7,7],C=[1,1,3,3,5,5,7,7],L=[{},{},{}];let z;for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))for(z=0;z<3;z++)L[z][t]=s[t][z];for(z=0;z<3;z++)L[z].emPerEx=s.xHeight[z]/s.quad[z];class T{constructor(t,e,s,i){this.id=t,this.size=e,this.cramped=i,this.sizeMultiplier=s,this.metrics=L[e>0?e-1:0]}sup(){return w[S[this.id]]}sub(){return w[M[this.id]]}fracNum(){return w[A[this.id]]}fracDen(){return w[_[this.id]]}cramp(){return w[C[this.id]]}cls(){return v[this.size]}adjustTo(t){let e=k[this.size][t.size];return e.length>0&&(e=" "+e),e}isTight(){return this.size>=2}}w=[new T(0,0,1,!1),new T(1,0,1,!0),new T(2,1,1,!1),new T(3,1,1,!0),new T(4,2,.7,!1),new T(5,2,.7,!0),new T(6,3,.5,!1),new T(7,3,.5,!0)];var D={DISPLAY:w[0],TEXT:w[2],SCRIPT:w[4],SCRIPTSCRIPT:w[6],toMathstyle:function(t){return t?"object"==typeof t?t:{displaystyle:w[0],textstyle:w[2],scriptstyle:w[4],scriptscriptstyle:w[6]}[t]:t}};class ${constructor(t){this.macros=t.macros||{},this.generateID=!!t.generateID&&t.generateID,this.mathstyle=D.toMathstyle(t.mathstyle||"displaystyle"),this.letterShapeStyle=t.letterShapeStyle||"tex",this.size=t.size||"size5",this.parentMathstyle=t.parentMathstyle||this.mathstyle,this.parentSize=t.parentSize||this.size,this.opacity=t.opacity}clone(t){const e=new $(this);return e.parentMathstyle=this.mathstyle,e.parentSize=this.size,e.macros=this.macros,t&&("auto"!==t.mathstyle&&t.mathstyle||delete t.mathstyle,Object.assign(e,t),"string"==typeof t.mathstyle&&(e.mathstyle=D.toMathstyle(t.mathstyle))),e}setMathstyle(t){t&&"auto"!==t&&(this.mathstyle=D.toMathstyle(t))}cramp(){return this.clone({mathstyle:this.mathstyle.cramp()})}sup(){return this.clone({mathstyle:this.mathstyle.sup()})}sub(){return this.clone({mathstyle:this.mathstyle.sup()})}}const F={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},q={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34]},P={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",widetilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",widetilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",widetilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",widetilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};function E(t,e){const s=[];let i,a=[];return t.forEach(t=>{if("first"!==t.type){let r;"variant"===e?(r=t.variant,t.variantStyle&&"up"!==t.variantStyle&&(r+="-"+t.variantStyle)):r=t[e],r!==i?(a.length>0&&s.push(a),a=[t],i=r):a.push(t)}}),a.length>0&&s.push(a),s}const B={};function K(t,e){B[t]={...e}}const O={"mord+mop":3,"mord+mbin":4,"mord+mrel":5,"mord+minner":3,"mop+mord":3,"mop+mop":3,"mop+mbin":5,"mop+minner":3,"mbin+mord":4,"mbin+mop":4,"mbin+mopen":4,"mbin+minner":4,"mrel+mord":5,"mrel+mop":5,"mrel+mopen":5,"mrel+minner":5,"mclose+mop":3,"mclose+mbin":4,"mclose+mrel":5,"mclose+minner":3,"mpunct+mord":3,"mpunct+mop":3,"mpunct+mbin":4,"mpunct+mrel":5,"mpunct+mopen":3,"mpunct+mpunct":3,"mpunct+minner":3},I=["​"," ","  "," "," ","  "," ","",""," "],R=[""," ⁣",""," ⁣"," ⁣"," ⁣"],N={"mord+mop":3,"mop+mord":3,"mop+mop":3,"mclose+mop":3,"minner+mop":3};function H(t){let e="";if("number"==typeof t)e+=Math.ceil(100*t)/100;else if("string"==typeof t)e+=t;else if(Array.isArray(t))for(const s of t)e+=H(s);else t&&(e+=t.toString());return e}class W{constructor(t,e){this.classes=e||"",Array.isArray(t)?this.children=[].concat(...t):"string"==typeof t?this.body=t:t&&"object"==typeof t&&(this.children=[t]),this.style=null,this.updateDimensions()}updateDimensions(){let t=0,e=0,s=1;this.children&&this.children.forEach(i=>{i.height>t&&(t=i.height),i.depth>e&&(e=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}),this.height=t,this.depth=e,this.maxFontSize=s}selected(t){t&&!/ML__selected/.test(this.classes)&&(this.classes.length>0&&(this.classes+=" "),this.classes+="ML__selected"),!t&&/ML__selected/.test(this.classes)&&(this.classes=this.classes.replace("ML__selected","")),this.children&&this.children.forEach(e=>e.selected(t))}applyStyle(t){if(!t)return;if(t.color&&("none"!==t.color?this.setStyle("color",t.color):this.setStyle("color","")),t.backgroundColor&&("none"!==t.backgroundColor?this.setStyle("background-color",t.backgroundColor):this.setStyle("background-color","")),t.cssClass&&(this.classes+=" "+t.cssClass),!this.body)return;const e=function(t,e){return B[e.mode]&&B[e.mode].applyStyle?B[e.mode].applyStyle(t,e):""}(this,t);if(this.body&&e){this.maxFontSize={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49}[t.fontSize]||1,this.height=0,this.depth=0,this.skew=0,this.italic=0;for(let t=0;t<this.body.length;t++){const s=y(this.body.charAt(t),e);s&&(this.height=Math.max(this.height,s.height),this.depth=Math.max(this.depth,s.depth),this.skew=s.skew,this.italic=s.italic)}}}setStyle(t,...e){const s=H(e);s.length>0&&(this.style||(this.style={}),this.style[t]=s)}setTop(t){t&&0!==t&&(this.style||(this.style={}),this.style.top=H(t)+"em",this.height-=t,this.depth+=t)}setLeft(t){t&&0!==t&&(this.style||(this.style={}),this.style["margin-left"]=H(t)+"em")}setRight(t){t&&0!==t&&(this.style||(this.style={}),this.style["margin-right"]=H(t)+"em")}setWidth(t){t&&0!==t&&(this.style||(this.style={}),this.style.width=H(t)+"em")}toMarkup(t,e){t=t||0,e=e||1;let s="",i=this.body||"";if(this.children){let t="none";for(const s of this.children){let a=0;if(t){let i=s.type;i&&("textord"===i&&(i="mord"),"first"===i&&(i="none"),a=s.isTight?N[t+"+"+i]||0:O[t+"+"+i]||0,a=Math.floor(e*a))}i+=s.toMarkup(a,e),t=V(s)}}if("​"!==i&&(i||this.svgBody)||this.classes&&"ML__selected"!==this.classes||this.cssId||this.style||this.svgOverlay){s="<span",this.cssId&&(s+=' id="'+this.cssId+'" '),this.attributes&&(s+=" "+Object.keys(this.attributes).map(t=>`${t}="${this.attributes[t]}"`).join(" "));const e=this.classes.split(" ");this.type&&(/command|placeholder|error/.test(this.type)&&e.push({command:"ML__command",placeholder:"ML__placeholder",error:"ML__error"}[this.type]),this.caret&&"command"===this.type&&e.push("ML__command-caret"));let a="";if(a=e.length>1?e.filter((function(t,e,s){return t.length>0&&s.indexOf(t)===e})).join(" "):e[0],a.length>0&&(s+=` class="${a}"`),t&&(this.style&&this.style["margin-left"]?this.style["margin-left"]=H(parseFloat(this.style["margin-left"])+t/18)+"em":t<0&&R[-t]?i=R[-t]+i:I[t]?i=I[t]+i:(this.style||(this.style={}),this.style["margin-left"]=H(t/18)+"em")),this.style){let t="";const e=/ML__selected/.test(this.classes);for(const s in this.style)Object.prototype.hasOwnProperty.call(this.style,s)&&("background-color"===s&&e||(t+=s+":"+this.style[s]+";"));t.length>0&&(s+=' style="'+t+'"')}s+=">",this.svgBody?s+=function(t){if(q[t]){const e=q[t][2];return`<span style="height:${e}em;min-width:0">${`<span class="stretchy" style="height:${e}em">`+`<svg width="100%" height="${e}em"`+`viewBox="0 0 ${q[t][0]} ${q[t][1]}"`+'preserveAspectRatio="none">'+`<path d="${P[t]}"></path>`+"</svg></span>"}</span>`}const[e,s,i,a]=F[t];let r,n;const o=i/1e3;3===e.length?(r=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],n=["xMinYMin","xMidYMin","xMaxYMin"]):2===e.length?(r=["slice-1-of-2","slice-2-of-2"],n=["xMinYMin","xMaxYMin"]):(r=["slice-1-of-1"],n=[a]);const l=e.map((t,e)=>`<span class="${r[e]}" style="height:${o}em">`+`<svg width="400em" height="${o}em"`+`viewBox="0 0 400000 ${i}"`+`preserveAspectRatio="${n[e]} slice">`+`<path d="${P[t]}"></path>`+"</svg></span>").join("");return`<span style="height:${o}em;min-width:${s}em">${l}</span>`}(this.svgBody):this.svgOverlay?(s+='<span style="',s+="display: inline-block;",s+="height:"+(this.height+this.depth)+"em;",s+="vertical-align:"+this.depth+"em;",s+='">',s+=i,s+="</span>",s+="<svg ",s+='style="position:absolute;',s+="overflow:overlay;",s+="height:"+(this.height+this.depth)+"em;",this.style&&this.style.padding?(s+="top:"+this.style.padding+";",s+="left:"+this.style.padding+";",s+="width:calc(100% - 2 * "+this.style.padding+" );"):(s+="top:0;",s+="left:0;",s+="width:100%;"),s+="z-index:2;",s+='"',this.svgStyle&&(s+=' style="'+this.svgStyle+'"'),s+=">",s+=this.svgOverlay,s+="</svg>"):s+=i,s+="</span>"}else s="";return this.caret&&"command"!==this.type&&("text"===this.caret?s+='<span class="ML__text-caret"></span>':s+='<span class="ML__caret"></span>'),s}tryCoalesceWith(t){if(this.tag!==t.tag)return!1;if(this.type!==t.type)return!1;if("error"===this.type||"placeholder"===this.type||"command"===this.type)return!1;if(this.svgBody||!this.body)return!1;if(t.svgBody||!t.body)return!1;const e=this.children&&this.children.length>0,s=t.children&&t.children.length>0;if(e||s)return!1;if((this.style?this.style.length:0)!==(t.style?t.style.length:0))return!1;const i=this.classes.trim().replace(/\s+/g," ").split(" "),a=t.classes.trim().replace(/\s+/g," ").split(" ");if(i.length!==a.length)return!1;i.sort(),a.sort();for(let t=0;t<i.length;t++){if("vertical-separator"===i[t])return!1;if(i[t]!==a[t])return!1}if(this.style&&t.style)for(const e in this.style)if(Object.prototype.hasOwnProperty.call(this.style,e)&&Object.prototype.hasOwnProperty.call(t.style,e)&&this.style[e]!==t.style[e])return!1;return this.body+=t.body,this.height=Math.max(this.height,t.height),this.depth=Math.max(this.depth,t.depth),this.maxFontSize=Math.max(this.maxFontSize,t.maxFontSize),this.italic=t.italic,!0}}function V(t){const e=t.type;return"first"===e?"none":"textord"===e?"mord":e}function j(t){return t?Array.isArray(t)?t.reduce((t,e)=>Math.max(t,e.height),0):t.height:0}function U(t){return t?Array.isArray(t)?t.reduce((t,e)=>Math.max(t,e.depth),0):t.depth:0}function G(t){return t?Array.isArray(t)?t[t.length-1].italic:t.italic:0}function Z(t,e){if(Array.isArray(t)){const s=[];for(const e of t)e&&s.push(e);if(1===s.length)return Z(s[0],e)}return new W(t,e)}function X(t,e,s){const i=new W(e,s),a=y(e,t);return i.height=a.height,i.depth=a.depth,i.skew=a.skew,i.italic=a.italic,i.setRight(i.italic),i}function Y(t,e,s){const i=Z(e,s);return i.type=t,i}function J(t,e){return Y("mord",t,e)}function Q(t,e,s,i,a){a=a||"";const r=tt(e,(a+=" style-wrap ")+s.adjustTo(i));r.type=t;const n=i.sizeMultiplier/s.sizeMultiplier;return r.height*=n,r.depth*=n,r.maxFontSize=i.sizeMultiplier,r}function tt(t,e){if(!e||0===e.length){if(t instanceof W)return t;if(Array.isArray(t)&&1===t.length)return t[0]}const s=new W(t,e);let i=1;return i=t instanceof W?t.maxFontSize:t.reduce((t,e)=>Math.max(t,e.maxFontSize),0),s.height*=i,s.depth*=i,s}function et(t,e,s,i){let a=0,r=0;s=s||"shift",i=i||0;for(let t=0;t<e.length;t++)Array.isArray(e[t])&&(1===e[t].length?e[t]=e[t][0]:e[t]=Z(e[t]));if("shift"===s)a=-e[0].depth-i;else if("bottom"===s)a=-i;else if("top"===s){let t=i;for(const s of e)t-=s instanceof W?s.height+s.depth:s;a=t}else if("individualShift"===s){const t=e;e=[t[0]],a=-t[1]-t[0].depth,r=a;for(let s=2;s<t.length;s+=2){const i=-t[s+1]-r-t[s].depth;r+=i;const a=i-(t[s-2].height+t[s-2].depth);e.push(a),e.push(t[s])}}let n=1;for(const t of e)t instanceof W&&(n=Math.max(n,t.maxFontSize));const o=function(t,e){const s=e?e/t.mathstyle.sizeMultiplier:0,i=new W("​");return 1!==s&&(i.setStyle("font-size",s,s>0?"em":""),i.attributes={"aria-hidden":!0}),"size5"!==t.size?new W(i,"fontsize-ensurer reset-"+t.size+" size5"):0!==s?i:null}(t,n),l=[];r=a;for(const t of e)if("number"==typeof t)r+=t;else{const e=Z([o,t]);e.setTop(-t.depth-r),l.push(e),r+=t.height+t.depth}const c=Z(l,"vlist");return c.depth=Math.max(a,U(c)||0),c.height=Math.max(-r,j(c)||0),c}function st(t,e){const s=new W(null,e);return s.svgBody=t,s.height=function(t){return F[t]?F[t][2]/1e3:q[t][2]}(t)/2,s.depth=s.height,s}const it={},at={},rt={},nt={iff:"\\;⟺\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"},ot={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},lt={"\\#":"#","\\&":"&","\\$":"$","\\%":"%","\\_":"_","\\euro":"€","\\maltese":"✠","\\{":"{","\\}":"}","\\nobreakspace":" ","\\ldots":"…","\\textellipsis":"…","\\backslash":"\\","`":"‘","'":"’","``":"“","''":"”","\\degree":"°","\\textasciicircum":"^","\\textasciitilde":"~","\\textasteriskcentered":"*","\\textbackslash":"\\","\\textbraceleft":"{","\\textbraceright":"}","\\textbullet":"•","\\textdollar":"$","\\textsterling":"£","–":"–","—":"—","‘":"‘","’":"’","“":"“","”":"”",'"':"”","\\ss":"ß","\\ae":"æ","\\oe":"œ","\\AE":"Æ","\\OE":"Œ","\\O":"Ø","\\i":"ı","\\j":"ȷ","\\aa":"å","\\AA":"Å"},ct=/[a-zA-Z0-9!@*()-=+{}[\]\\';:?/.,~<>`|'$%#&^_" ]/,ht="undefined"!=typeof navigator&&/firefox|edge/i.test(navigator.userAgent)?/[a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒäöüßÄÖÜẞàèéìíîòóùúÀÈÉÌÍÎÒÓÙÚáéíñóúüÁÉÍÑÓÚÜ]/:new RegExp("\\p{Letter}","u"),mt="undefined"!=typeof navigator&&/firefox|edge/i.test(navigator.userAgent)?/[0-9a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒäöüßÄÖÜẞàèéìíîòóùúÀÈÉÌÍÎÒÓÙÚáéíñóúüÁÉÍÑÓÚÜ]/:new RegExp("[0-9\\p{Letter}]","u");function dt(t,e,s="mord",i=""){it[t]={type:s,variant:i,value:e}}function pt(t,e){for(let s=t;s<=e;s++){const t=String.fromCodePoint(s);dt(t,t)}}const ut={8739:"|",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",8243:"\\doubleprime",8736:"\\angle",8450:"\\C",8469:"\\N",8473:"\\P",8474:"\\Q",8477:"\\R",8484:"\\Z"};function ft(t,e){let s="";return s="math"===t?ut[e]||Object.keys(it).find(t=>it[t].value===e):Object.keys(lt).find(t=>lt[t]===e),s||e}const gt={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},yt=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function bt(t,e,s){if(!/[A-Za-z0-9]/.test(t))return t;if(!e&&!s)return t;const i=t.codePointAt(0);for(let t=0;t<yt.length;t++)if((!e||yt[t].variant===e)&&(!s||yt[t].style===s)&&i>=yt[t].offset&&i<yt[t].offset+yt[t].len){const e=yt[t].start+i-yt[t].offset;return String.fromCodePoint(gt[e]||e)}return t}function xt(t,e){if("text"===t)return ft(t,e)||e;let s;const i=e.codePointAt(0);if(ut[i])return ut[i];const a=function(t){let e=t;if("string"==typeof t&&(e=t.codePointAt(0)),(e<119808||e>120831)&&(e<8448||e>8527))return{char:t};for(const t in gt)if(Object.prototype.hasOwnProperty.call(gt,t)&&gt[t]===e){e=t;break}for(let t=0;t<yt.length;t++)if(e>=yt[t].start&&e<yt[t].start+yt[t].len)return{char:String.fromCodePoint(e-yt[t].start+yt[t].offset),variant:yt[t].variant,style:yt[t].style};return{char:t}}(i);return a.style||a.variant?(s=a.char,a.variant&&(s="\\"+a.variant+"{"+s+"}"),"bold"===a.style?s="\\mathbf{"+s+"}":"italic"===a.style?s="\\mathit{"+s+"}":"bolditalic"===a.style&&(s="\\mathbfit{"+s+"}"),"\\mathord{"+s+"}"):ft(t,e)}function vt(t,e){let s="",i=!1;for(const a of e){i&&(s+="text"===t?"{}":" "),i=!1;const e=xt(t,a);e?(s+=e,i=/\\[a-zA-Z0-9]+\*?$/.test(e)):s+=a}return s}function kt(t,e){return"math"===t?it[e]&&it[e].value?it[e].value:e:lt[e]?lt[e]:e}function wt(t,e,s,i){return at[t]&&at[t].emit?at[t].emit(t,e,s,i):it[t]||lt[t]?t+(/^\\.*[a-zA-Z0-9]$/.test(t)?" ":""):at[t]&&at[t].params&&1===at[t].params.length&&s.body?t+"{"+i(s,s.body)+"}":t}function St(t){let e=rt[t];return e||(e={params:"",parser:null,mathstyle:"displaystyle",tabular:!0,colFormat:[],lFence:".",rFence:"."}),e}function Mt(t,e,s){if(!t||0===t.length)return null;let i=null;if("\\"===t.charAt(0)){if(i=at[t],i)return i.mode&&!i.mode.includes(e)?null:i;if(i||("math"===e?i=it[t]:lt[t]&&(i={value:lt[t]})),!i){const e=t.slice(1);if(s&&s[e]){let t=s[e];"object"==typeof t&&(t=t.def);let a=0;for(/(^|[^\\])#1/.test(t)&&(a=1),/(^|[^\\])#2/.test(t)&&(a=2),/(^|[^\\])#3/.test(t)&&(a=3),/(^|[^\\])#4/.test(t)&&(a=4),/(^|[^\\])#5/.test(t)&&(a=5),/(^|[^\\])#6/.test(t)&&(a=6),/(^|[^\\])#7/.test(t)&&(a=7),/(^|[^\\])#8/.test(t)&&(a=8),/(^|[^\\])#9/.test(t)&&(a=9),i={type:"group",mode:"math",params:[],infix:!1};a>=1;)i.params.push({optional:!1,type:"math",defaultValue:null,placeholder:null}),a-=1}}}else"math"===e?i=it[t]:lt[t]&&(i={value:lt[t]});return!i||"mord"!==i.type||"f"!==i.value&&"g"!==i.value&&"h"!==i.value||(i.isFunction=!0),i}function At(t){if(t.length<=1)return[];const e=[];for(const s in at)Object.prototype.hasOwnProperty.call(at,s)&&s.startsWith(t)&&!at[s].infix&&e.push({match:s,frequency:at[s].frequency});for(const s in it)Object.prototype.hasOwnProperty.call(it,s)&&s.startsWith(t)&&e.push({match:s,frequency:it[s].frequency});return e.sort((t,e)=>t.frequency===e.frequency?t.match.length-e.match.length:(e.frequency||0)-(t.frequency||0)),e}function _t(t,e){let s=t.match(/=(.+)/);const i=s?s[1]:e?"[]":"{}";let a="auto",r=null;return s=t.match(/:([^=]+)/),s&&(a=s[1].trim()),s=t.match(/^([^:=]+)/),s&&(r=s[1].trim()),{optional:e,type:a,defaultValue:i,placeholder:r}}function Ct(t){if(!t)return[];let e=[],s=t.split("]");if("["===s[0].charAt(0)){e.push(_t(s[0].slice(1),!0));for(let t=1;t<=s.length;t++)e=e.concat(Ct(s[t]))}else if(s=t.split("}"),"{"===s[0].charAt(0)){e.push(_t(s[0].slice(1),!1));for(let t=1;t<=s.length;t++)e=e.concat(Ct(s[t]))}return e}function Lt(t){let e="",s=!0;return t.forEach(t=>{"string"==typeof t.body?e+=t.body:s=!1}),s?e:""}function zt(t,e,s,i){"string"==typeof t&&(t=[t]),s||(s={});const a={params:Ct(e),parser:i,mathstyle:"displaystyle",tabular:s.tabular||!0,colFormat:s.colFormat||[]};for(const e of t)rt[e]=a}function Tt(t,e,s,i,a){"string"==typeof t&&(t=[t]),s||(s={});const r={params:Ct(e),mode:s.mode,infix:!!s.infix,parse:i,emit:a};t.forEach(t=>{at["\\"+t]=r})}!function(t){for(let t=0;t<"0123456789/@.?!".length;t++){const e="0123456789/@.?!".charAt(t);dt(e,e)}}(),pt(65,90),pt(97,122),dt("\\forall","∀"),dt("\\exists","∃"),dt("\\nexists","∄","mord","ams"),dt("\\mid","∣","mrel"),dt("\\top","⊤"),dt("\\bot","⊥"),dt("\\sharp","♯"),dt("\\flat","♭"),dt("\\natural","♮"),dt("\\#","#"),dt("\\&","&"),dt("\\clubsuit","♣"),dt("\\heartsuit","♡"),dt("\\spadesuit","♠"),dt("\\diamondsuit","♢"),dt("\\differencedelta","∆","mrel"),dt("\\backslash","\\"),dt("\\nabla","∇"),dt("\\partial","∂"),dt("\\ell","ℓ"),dt("\\imaginaryI","i"),dt("\\imaginaryJ","j"),dt("\\hbar","ℏ"),dt("\\hslash","ℏ","mord","ams"),dt("\\differentialD","d","mord","main"),dt("\\rd","d","mord","main"),dt("\\capitalDifferentialD","D","mord","main"),dt("\\rD","D","mord","main"),dt("\\exponentialE","e","mord","main"),dt("\\Finv","Ⅎ","mord","ams"),dt("\\Game","⅁","mord","ams"),dt("\\wp","℘"),dt("\\eth","ð","mord","ams"),dt("\\mho","℧","mord","ams"),dt("\\Bbbk","k","mord","ams"),dt("\\doubleStruckCapitalN","N","mord","double-struck"),dt("\\N","N","mord","double-struck"),dt("\\doubleStruckCapitalR","R","mord","double-struck"),dt("\\R","R","mord","double-struck"),dt("\\doubleStruckCapitalQ","Q","mord","double-struck"),dt("\\Q","Q","mord","double-struck"),dt("\\doubleStruckCapitalC","C","mord","double-struck"),dt("\\C","C","mord","double-struck"),dt("\\doubleStruckCapitalZ","Z","mord","double-struck"),dt("\\Z","Z","mord","double-struck"),dt("\\doubleStruckCapitalP","P","mord","double-struck"),dt("\\P","P","mord","double-struck"),dt("\\scriptCapitalE","E","mord","script"),dt("\\scriptCapitalH","H","mord","script"),dt("\\scriptCapitalL","L","mord","script"),dt("\\gothicCapitalC","C","mord","fraktur"),dt("\\gothicCapitalH","H","mord","fraktur"),dt("\\gothicCapitalI","I","mord","fraktur"),dt("\\gothicCapitalR","R","mord","fraktur"),dt("\\pounds","£"),dt("\\yen","¥","mord","ams"),dt("\\euro","€"),dt("\\textdagger","†","mbin"),dt("\\dagger","†","mbin"),dt("\\dag","†","mbin"),dt("\\ddag","‡","mbin"),dt("\\textdaggerdbl","‡","mbin"),dt("\\ddagger","‡","mbin"),dt("\\maltese","✠","mord","ams"),dt("\\rightarrow","→","mrel"),dt("\\leftarrow","←","mrel"),dt("\\Rightarrow","⇒","mrel"),dt("\\Leftarrow","⇐","mrel"),dt("\\longrightarrow","⟶","mrel"),dt("\\longleftarrow","⟵","mrel"),dt("\\Longrightarrow","⟹","mrel"),dt("\\Longleftarrow","⟸","mrel"),dt("\\dashrightarrow","⇢","mrel","ams"),dt("\\dashleftarrow","⇠","mrel","ams"),dt("\\Rrightarrow","⇛","mrel","ams"),dt("\\Lleftarrow","⇚","mrel","ams"),dt("\\longleftrightarrow","⟷","mrel"),dt("\\Longleftrightarrow","⟺","mrel"),dt("\\leftrightarrows","⇆","mrel","ams"),dt("\\rightleftarrows","⇄","mrel","ams"),dt("\\mapsto","↦","mrel"),dt("\\longmapsto","⟼","mrel"),dt("\\uparrow","↑","mrel"),dt("\\downarrow","↓","mrel"),dt("\\Uparrow","⇑","mrel"),dt("\\Downarrow","⇓","mrel"),dt("\\updownarrow","↕","mrel"),dt("\\Updownarrow","⇕","mrel"),dt("\\curvearrowright","↷","mrel","ams"),dt("\\curvearrowleft","↶","mrel","ams"),dt("\\hookrightarrow","↪","mrel"),dt("\\hookleftarrow","↩","mrel"),dt("\\rightharpoonup","⇀","mrel"),dt("\\leftharpoonup","↼","mrel"),dt("\\rightharpoondown","⇁","mrel"),dt("\\leftharpoondown","↽","mrel"),dt("\\rightrightarrows","⇉","mrel","ams"),dt("\\leftleftarrows","⇇","mrel","ams"),dt("\\upuparrows","⇈","mrel","ams"),dt("\\downdownarrows","⇊","mrel","ams"),dt("\\leftarrowtail","↢","mrel","ams"),dt("\\rightarrowtail","↣","mrel","ams"),dt("\\looparrowright","↬","mrel","ams"),dt("\\looparrowleft","↫","mrel","ams"),dt("\\twoheadleftarrow","↞","mrel","ams"),dt("\\twoheadrightarrow","↠","mrel","ams"),dt("\\rightleftharpoons","⇌","mrel"),dt("\\leftrightharpoons","⇋","mrel","ams"),dt("\\Rsh","↱","mrel","ams"),dt("\\Lsh","↰","mrel","ams"),dt("\\searrow","↘","mrel"),dt("\\nearrow","↗","mrel"),dt("\\swarrow","↙","mrel"),dt("\\nwarrow","↖","mrel"),dt("\\circlearrowright","↻","mrel","ams"),dt("\\circlearrowleft","↺","mrel","ams"),dt("\\restriction","↾","mrel","ams"),dt("\\upharpoonright","↾","mrel","ams"),dt("\\upharpoonleft","↿","mrel","ams"),dt("\\downharpoonright","⇂","mrel","ams"),dt("\\downharpoonleft","⇃","mrel","ams"),dt("\\rightsquigarrow","⇝","mrel","ams"),dt("\\leadsto","⇝","mrel","ams"),dt("\\leftrightsquigarrow","↭","mrel","ams"),dt("\\multimap","⊸","mrel","ams"),dt("\\nrightarrow","↛","mrel","ams"),dt("\\nleftarrow","↚","mrel","ams"),dt("\\nRightarrow","⇏","mrel","ams"),dt("\\nLeftarrow","⇍","mrel","ams"),dt("\\nleftrightarrow","↮","mrel","ams"),dt("\\nLeftrightarrow","⇎","mrel","ams"),dt("\\nless","≮","mrel","ams"),dt("\\nleqslant","","mrel","ams"),dt("\\lneq","⪇","mrel","ams"),dt("\\lneqq","≨","mrel","ams"),dt("\\nleqq","","mrel","ams"),dt("\\unlhd","⊴","mbin","ams"),dt("\\unrhd","⊵","mbin","ams"),dt("\\lvertneqq","","mrel","ams"),dt("\\lnsim","⋦","mrel","ams"),dt("\\lnapprox","⪉","mrel","ams"),dt("\\nprec","⊀","mrel","ams"),dt("\\npreceq","⋠","mrel","ams"),dt("\\precnsim","⋨","mrel","ams"),dt("\\precnapprox","⪹","mrel","ams"),dt("\\nsim","≁","mrel","ams"),dt("\\nshortmid","","mrel","ams"),dt("\\nmid","∤","mrel","ams"),dt("\\nvdash","⊬","mrel","ams"),dt("\\nvDash","⊭","mrel","ams"),dt("\\ngtr","≯","mrel","ams"),dt("\\ngeqslant","","mrel","ams"),dt("\\ngeqq","","mrel","ams"),dt("\\gneq","⪈","mrel","ams"),dt("\\gneqq","≩","mrel","ams"),dt("\\gvertneqq","","mrel","ams"),dt("\\gnsim","⋧","mrel","ams"),dt("\\gnapprox","⪊","mrel","ams"),dt("\\nsucc","⊁","mrel","ams"),dt("\\nsucceq","⋡","mrel","ams"),dt("\\succnsim","⋩","mrel","ams"),dt("\\succnapprox","⪺","mrel","ams"),dt("\\ncong","≆","mrel","ams"),dt("\\nshortparallel","","mrel","ams"),dt("\\nparallel","∦","mrel","ams"),dt("\\nVDash","⊯","mrel","ams"),dt("\\nsupseteqq","","mrel","ams"),dt("\\supsetneq","⊋","mrel","ams"),dt("\\varsupsetneq","","mrel","ams"),dt("\\supsetneqq","⫌","mrel","ams"),dt("\\varsupsetneqq","","mrel","ams"),dt("\\nVdash","⊮","mrel","ams"),dt("\\precneqq","⪵","mrel","ams"),dt("\\succneqq","⪶","mrel","ams"),dt("\\nsubseteqq","","mrel","ams"),dt("\\checkmark","✓","mord","ams"),dt("\\diagup","╱","mord","ams"),dt("\\diagdown","╲","mord","ams"),dt("\\measuredangle","∡","mord","ams"),dt("\\sphericalangle","∢","mord","ams"),dt("\\backprime","‵","mord","ams"),dt("\\backdoubleprime","‶","mord","ams"),dt("\\ast","∗","mbin"),dt("\\star","⋆","mbin"),dt("\\diamond","⋄","mbin"),dt("\\Diamond","◊","mord","ams"),dt("\\lozenge","◊","mord","ams"),dt("\\blacklozenge","⧫","mord","ams"),dt("\\bigstar","★","mord","ams"),dt("\\aleph","ℵ"),dt("\\beth","ℶ","mord","ams"),dt("\\daleth","ℸ","mord","ams"),dt("\\gimel","ℷ","mord","ams"),dt("\\lbrace","{","mopen"),dt("\\rbrace","}","mclose"),dt("\\langle","⟨","mopen"),dt("\\rangle","⟩","mclose"),dt("\\lfloor","⌊","mopen"),dt("\\rfloor","⌋","mclose"),dt("\\lceil","⌈","mopen"),dt("\\rceil","⌉","mclose"),dt("\\vert","∣"),dt("\\mvert","∣","mrel"),dt("\\lvert","∣","mopen"),dt("\\rvert","∣","mclose"),dt("\\|","∥"),dt("\\Vert","∥"),dt("\\mVert","∥"),dt("\\lVert","∥","mopen"),dt("\\rVert","∥","mclose"),dt("\\lbrack","[","mopen"),dt("\\rbrack","]","mclose"),dt("\\{","{","mopen"),dt("\\}","}","mclose"),dt("(","(","mopen"),dt(")",")","mclose"),dt("[","[","mopen"),dt("]","]","mclose"),dt("\\ulcorner","┌","mopen","ams"),dt("\\urcorner","┐","mclose","ams"),dt("\\llcorner","└","mopen","ams"),dt("\\lrcorner","┘","mclose","ams"),dt("\\lgroup","⟮","mopen"),dt("\\rgroup","⟯","mclose"),dt("\\lmoustache","⎰","mopen"),dt("\\rmoustache","⎱","mclose"),dt("=","=","mrel"),dt("\\ne","≠","mrel"),dt("\\neq","≠","mrel"),dt("<","<","mrel"),dt("\\lt","<","mrel"),dt(">",">","mrel"),dt("\\gt",">","mrel"),dt("\\le","≤","mrel"),dt("\\ge","≥","mrel"),dt("\\leqslant","⩽","mrel","ams"),dt("\\geqslant","⩾","mrel","ams"),dt("\\leq","≤","mrel"),dt("\\geq","≥","mrel"),dt("\\ll","≪","mrel"),dt("\\gg","≫","mrel"),dt("\\coloneq","≔","mrel"),dt("\\measeq","≝","mrel"),dt("\\eqdef","≞","mrel"),dt("\\questeq","≟","mrel"),dt(":",":","mrel"),dt("\\cong","≅","mrel"),dt("\\equiv","≡","mrel"),dt("\\prec","≺","mrel"),dt("\\preceq","⪯","mrel"),dt("\\succ","≻","mrel"),dt("\\succeq","⪰","mrel"),dt("\\perp","⊥","mrel"),dt("\\parallel","∥","mrel"),dt("\\propto","∝","mrel"),dt("\\Colon","∷","mrel"),dt("\\smile","⌣","mrel"),dt("\\frown","⌢","mrel"),dt("\\sim","∼","mrel"),dt("\\gtrsim","≳","mrel","ams"),dt("\\approx","≈","mrel"),dt("\\approxeq","≊","mrel","ams"),dt("\\thickapprox","≈","mrel","ams"),dt("\\lessapprox","⪅","mrel","ams"),dt("\\gtrapprox","⪆","mrel","ams"),dt("\\precapprox","⪷","mrel","ams"),dt("\\succapprox","⪸","mrel","ams"),dt("\\thicksim","∼","mrel","ams"),dt("\\succsim","≿","mrel","ams"),dt("\\precsim","≾","mrel","ams"),dt("\\backsim","∽","mrel","ams"),dt("\\eqsim","≂","mrel","ams"),dt("\\backsimeq","⋍","mrel","ams"),dt("\\simeq","≃","mrel"),dt("\\lesssim","≲","mrel","ams"),dt("\\nleq","≰","mrel","ams"),dt("\\ngeq","≱","mrel","ams"),dt("\\smallsmile","⌣","mrel","ams"),dt("\\smallfrown","⌢","mrel","ams"),dt("\\bowtie","⋈","mrel"),dt("\\asymp","≍","mrel"),dt("\\sqsubseteq","⊑","mrel"),dt("\\sqsupseteq","⊒","mrel"),dt("\\leqq","≦","mrel","ams"),dt("\\eqslantless","⪕","mrel","ams"),dt("\\lll","⋘","mrel","ams"),dt("\\lessgtr","≶","mrel","ams"),dt("\\lesseqgtr","⋚","mrel","ams"),dt("\\lesseqqgtr","⪋","mrel","ams"),dt("\\risingdotseq","≓","mrel","ams"),dt("\\fallingdotseq","≒","mrel","ams"),dt("\\subseteqq","⫅","mrel","ams"),dt("\\Subset","⋐","mrel","ams"),dt("\\sqsubset","⊏","mrel","ams"),dt("\\preccurlyeq","≼","mrel","ams"),dt("\\curlyeqprec","⋞","mrel","ams"),dt("\\vDash","⊨","mrel","ams"),dt("\\Vvdash","⊪","mrel","ams"),dt("\\bumpeq","≏","mrel","ams"),dt("\\Bumpeq","≎","mrel","ams"),dt("\\geqq","≧","mrel","ams"),dt("\\eqslantgtr","⪖","mrel","ams"),dt("\\ggg","⋙","mrel","ams"),dt("\\gtrless","≷","mrel","ams"),dt("\\gtreqless","⋛","mrel","ams"),dt("\\gtreqqless","⪌","mrel","ams"),dt("\\supseteqq","⫆","mrel","ams"),dt("\\Supset","⋑","mrel","ams"),dt("\\sqsupset","⊐","mrel","ams"),dt("\\succcurlyeq","≽","mrel","ams"),dt("\\curlyeqsucc","⋟","mrel","ams"),dt("\\Vdash","⊩","mrel","ams"),dt("\\shortmid","∣","mrel","ams"),dt("\\shortparallel","∥","mrel","ams"),dt("\\between","≬","mrel","ams"),dt("\\pitchfork","⋔","mrel","ams"),dt("\\varpropto","∝","mrel","ams"),dt("\\backepsilon","∍","mrel","ams"),dt("\\llless","⋘","mrel","ams"),dt("\\gggtr","⋙","mrel","ams"),dt("\\lhd","⊲","mbin","ams"),dt("\\rhd","⊳","mbin","ams"),dt("\\Join","⋈","mrel"),dt("\\doteq","≐","mrel"),dt("\\doteqdot","≑","mrel","ams"),dt("\\Doteq","≑","mrel","ams"),dt("\\eqcirc","≖","mrel","ams"),dt("\\circeq","≗","mrel","ams"),dt("\\lessdot","⋖","mbin","ams"),dt("\\gtrdot","⋗","mbin","ams"),dt("\\~","~","mrel"),dt("\\leftrightarrow","↔","mrel"),dt("\\Leftrightarrow","⇔","mrel"),dt("\\to","→","mrel"),dt("\\models","⊨","mrel"),dt("\\vdash","⊢","mrel"),dt("\\therefore","∴","mrel","ams"),dt("\\because","∵","mrel","ams"),dt("\\implies","⟹","mrel"),dt("\\gets","←","mrel"),dt("\\dashv","⊣","mrel"),dt("\\impliedby","⟸","mrel"),dt("\\biconditional","⟷","mrel"),dt("\\roundimplies","⥰","mrel"),dt("+","+","mbin"),dt("-","−","mbin"),dt("−","−","mbin"),dt("\\pm","±","mbin"),dt("\\mp","∓","mbin"),dt("*","∗","mbin"),dt("\\times","×","mbin"),dt("\\div","÷","mbin"),dt("\\surd","√"),dt("\\divides","∣","mbin"),dt("\\ltimes","⋉","mbin","ams"),dt("\\rtimes","⋊","mbin","ams"),dt("\\leftthreetimes","⋋","mbin","ams"),dt("\\rightthreetimes","⋌","mbin","ams"),dt("\\intercal","⊺","mbin","ams"),dt("\\dotplus","∔","mbin","ams"),dt("\\centerdot","⋅","mbin","ams"),dt("\\doublebarwedge","⩞","mbin","ams"),dt("\\divideontimes","⋇","mbin","ams"),dt("\\cdot","⋅","mbin"),dt("\\infty","∞"),dt("\\prime","′"),dt("\\doubleprime","″"),dt("\\angle","∠"),dt("`","‘"),dt("\\$","$"),dt("\\%","%"),dt("\\_","_"),dt("\\alpha","α"),dt("\\beta","β"),dt("\\gamma","γ"),dt("\\delta","δ"),dt("\\epsilon","ϵ"),dt("\\varepsilon","ε"),dt("\\zeta","ζ"),dt("\\eta","η"),dt("\\theta","θ"),dt("\\vartheta","ϑ"),dt("\\iota","ι"),dt("\\kappa","κ"),dt("\\varkappa","ϰ","mord","ams"),dt("\\lambda","λ"),dt("\\mu","μ"),dt("\\nu","ν"),dt("\\xi","ξ"),dt("\\omicron","o"),dt("\\pi","π"),dt("\\varpi","ϖ"),dt("\\rho","ρ"),dt("\\varrho","ϱ"),dt("\\sigma","σ"),dt("\\varsigma","ς"),dt("\\tau","τ"),dt("\\phi","ϕ"),dt("\\varphi","φ"),dt("\\upsilon","υ"),dt("\\chi","χ"),dt("\\psi","ψ"),dt("\\omega","ω"),dt("\\Gamma","Γ"),dt("\\Delta","Δ"),dt("\\Theta","Θ"),dt("\\Lambda","Λ"),dt("\\Xi","Ξ"),dt("\\Pi","Π"),dt("\\Sigma","Σ"),dt("\\Upsilon","Υ"),dt("\\Phi","Φ"),dt("\\Psi","Ψ"),dt("\\Omega","Ω"),dt("\\digamma","ϝ","mord","ams"),dt("\\emptyset","∅"),dt("\\varnothing","∅","mord","ams"),dt("\\cap","∩","mbin"),dt("\\cup","∪","mbin"),dt("\\setminus","∖","mbin"),dt("\\smallsetminus","∖","mbin","ams"),dt("\\complement","∁","mord","ams"),dt("\\in","∈","mrel"),dt("\\notin","∉","mrel"),dt("\\not","̸","mrel"),dt("\\ni","∋","mrel"),dt("\\owns","∋","mrel"),dt("\\subset","⊂","mrel"),dt("\\supset","⊃","mrel"),dt("\\subseteq","⊆","mrel"),dt("\\supseteq","⊇","mrel"),dt("\\subsetneq","⊊","mrel","ams"),dt("\\varsubsetneq","","mrel","ams"),dt("\\subsetneqq","⫋","mrel","ams"),dt("\\varsubsetneqq","","mrel","ams"),dt("\\nsubset","⊄","mrel","ams"),dt("\\nsupset","⊅","mrel","ams"),dt("\\nsubseteq","⊈","mrel","ams"),dt("\\nsupseteq","⊉","mrel","ams"),dt("\\ "," ","spacing"),dt("~"," ","spacing"),dt("\\space"," ","spacing"),dt("\\!",null,"spacing"),dt("\\,",null,"spacing"),dt("\\:",null,"spacing"),dt("\\;",null,"spacing"),dt("\\enskip",null,"spacing"),dt("\\enspace",null,"spacing"),dt("\\quad",null,"spacing"),dt("\\qquad",null,"spacing"),dt("\\colon",":","mpunct"),dt("\\cdotp","⋅","mpunct"),dt("\\ldots","…","minner"),dt("\\cdots","⋯","minner"),dt("\\ddots","⋱","minner"),dt("\\mathellipsis","…","minner"),dt("\\vdots","⋮"),dt("\\ldotp",".","mpunct"),dt(",",",","mpunct"),dt(";",";","mpunct"),dt("\\wedge","∧","mbin"),dt("\\vee","∨","mbin"),dt("\\lnot","¬"),dt("\\neg","¬"),dt("\\land","∧","mbin"),dt("\\lor","∨","mbin"),dt("\\barwedge","⊼","mbin","ams"),dt("\\veebar","⊻","mbin","ams"),dt("\\nor","⊻","mbin","ams"),dt("\\curlywedge","⋏","mbin","ams"),dt("\\curlyvee","⋎","mbin","ams"),dt("\\square","□","mord","ams"),dt("\\Box","□","mord","ams"),dt("\\blacksquare","■","mord","ams"),dt("\\boxminus","⊟","mbin","ams"),dt("\\boxplus","⊞","mbin","ams"),dt("\\boxtimes","⊠","mbin","ams"),dt("\\boxdot","⊡","mbin","ams"),dt("\\circ","∘","mbin"),dt("\\bigcirc","◯","mbin"),dt("\\bullet","∙","mbin"),dt("\\circleddash","⊝","mbin","ams"),dt("\\circledast","⊛","mbin","ams"),dt("\\oplus","⊕","mbin"),dt("\\ominus","⊖","mbin"),dt("\\otimes","⊗","mbin"),dt("\\odot","⊙","mbin"),dt("\\circledcirc","⊚","mbin","ams"),dt("\\oslash","⊘","mbin"),dt("\\circledS","Ⓢ","mord","ams"),dt("\\circledR","®","mord","ams"),dt("\\triangle","△"),dt("\\triangleq","≜","mrel","ams"),dt("\\bigtriangleup","△","mbin"),dt("\\vartriangle","△","mrel","ams"),dt("\\triangledown","▽","mord","ams"),dt("\\bigtriangledown","▽","mbin"),dt("\\triangleleft","◃","mbin"),dt("\\vartriangleleft","⊲","mrel","ams"),dt("\\trianglelefteq","⊴","mrel","ams"),dt("\\ntriangleleft","⋪","mrel","ams"),dt("\\ntrianglelefteq","⋬","mrel","ams"),dt("\\triangleright","▹","mbin"),dt("\\vartriangleright","⊳","mrel","ams"),dt("\\trianglerighteq","⊵","mrel","ams"),dt("\\ntriangleright","⋫","mrel","ams"),dt("\\ntrianglerighteq","⋭","mrel","ams"),dt("\\blacktriangle","▲","mord","ams"),dt("\\blacktriangledown","▼","mord","ams"),dt("\\blacktriangleleft","◀","mrel","ams"),dt("\\blacktriangleright","▶","mrel","ams"),dt("\\/","/"),dt("|","∣","textord"),dt("\\And","&","mbin"),dt("\\imath","ı"),dt("\\jmath","ȷ"),dt("\\degree","°"),dt("'","′"),dt('"',"”");const Dt={acute:"ˊ",grave:"ˋ",dot:"˙",ddot:"¨",mathring:"˚",tilde:"~",bar:"ˉ",breve:"˘",check:"ˇ",hat:"^",vec:"⃗"};Tt(Object.keys(Dt),"{body:auto}",null,(function(t,e){return{type:"accent",accent:Dt[t.slice(1)],limits:"accent",skipBoundary:!0,body:e[0]}})),Tt(["widehat","widecheck","widetilde"],"{body:auto}",null,(t,e)=>{const s=Lt(e[0]);return{type:"accent",svgAccent:t.slice(1)+(s.length>5?"4":["1","1","2","2","3","3"][s.length]),limits:"accent",skipBoundary:!0,body:e[0]}}),Tt("utilde","{body:auto}",null,(t,e)=>{const s=Lt(e[0]),i="widetilde"+(s.length>5?"4":["1","1","2","2","3","3"][s.length]);return{type:"overunder",body:e[0],svgBelow:i,skipBoundary:!0}},(t,e,s,i)=>`\\utilde{${i(s,s.body)}}`),Tt("^","{:string}",{},(t,e)=>({type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:e[0]&&{a:"â",e:"ê",i:"î",o:"ô",u:"û",A:"Â",E:"Ê",I:"Î",O:"Ô",U:"Û"}[e[0]]||"^"})),Tt("`","{:string}",{},(t,e)=>({type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:e[0]&&{a:"à",e:"è",i:"ì",o:"ò",u:"ù",A:"À",E:"È",I:"Ì",O:"Ò",U:"Ù"}[e[0]]||"`"})),Tt("'","{:string}",{},(function(t,e){return{type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:e[0]&&{a:"á",e:"é",i:"í",o:"ó",u:"ú",A:"Á",E:"É",I:"Í",O:"Ó",U:"Ú"}[e[0]]||"^"}})),Tt("~","{:string}",{},(function(t,e){return{type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:e[0]&&{n:"ñ",N:"Ñ",a:"ã",o:"õ",A:"Ã",O:"Õ"}[e[0]]||"´"}})),Tt("c","{:string}",{},(function(t,e){return{type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:e[0]&&{c:"ç",C:"Ç"}[e[0]]||""}})),Tt(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overbrace","overlinesegment","overgroup"],"{:auto}",null,(t,e)=>({type:"overunder",body:e[0],svgAbove:t.slice(1),skipBoundary:!0}),(t,e,s,i)=>`${t}{${i(s,s.body)}}`),Tt(["underrightarrow","underleftarrow","underleftrightarrow","underbrace","underlinesegment","undergroup"],"{:auto}",null,(t,e)=>({type:"overunder",body:e[0],svgBelow:t.slice(1),skipBoundary:!0}),(t,e,s,i)=>`${t}{${i(s,s.body)}}`),Tt(["xrightarrow","xleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","xLeftrightarrow","xrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xrightleftarrows","xrightequilibrium","xleftequilibrium"],"[:auto]{:auto}",null,(t,e)=>({type:"overunder",mathtype:"mrel",svgBody:t.slice(1),overscript:e[1],underscript:e[0],skipBoundary:!0}),(t,e,s,i)=>t+(s.underscript?`[${i(s,s.underscript)}]`:"")+`{${i(s,s.overscript)}}`),zt("math","",{},(function(){return{mathstyle:"textstyle"}})),zt("displaymath","",{},(function(){return{mathstyle:"displaystyle"}})),zt("array","{columns:colspec}",{},(function(t,e){return{colFormat:e[0],mathstyle:"textstyle"}})),zt("eqnarray","",{},(function(){return{}})),zt("equation","",{},(function(){return{colFormat:[{align:"c"}]}})),zt("subequations","",{},(function(){return{colFormat:[{align:"c"}]}})),zt("multline","",{},(function(){return{firstRowFormat:[{align:"l"}],colFormat:[{align:"c"}],lastRowFormat:[{align:"r"}]}})),zt(["align","align*","aligned"],"",{},(function(t,e,s){let i=0;for(const t of s)i=Math.max(i,t.length);const a=[{gap:0},{align:"r"},{gap:0},{align:"l"}];let r=2;for(;r<i;)a.push({gap:1}),a.push({align:"r"}),a.push({gap:0}),a.push({align:"l"}),r+=2;return a.push({gap:0}),{arraycolsep:0,colFormat:a,jot:.3}})),zt("split","",{},(function(){return{}})),zt(["gather","gathered"],"",{},(function(){return{colFormat:[{gap:.25},{align:"c"},{gap:0}],jot:.3}})),zt(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","smallmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*","smallmatrix*"],"[columns:colspec]",{},(function(t,e){const s={mathstyle:"textstyle"};switch(t){case"pmatrix":case"pmatrix*":s.lFence="(",s.rFence=")";break;case"bmatrix":case"bmatrix*":s.lFence="[",s.rFence="]";break;case"Bmatrix":case"Bmatrix*":s.lFence="\\lbrace",s.rFence="\\rbrace";break;case"vmatrix":case"vmatrix*":s.lFence="\\vert",s.rFence="\\vert";break;case"Vmatrix":case"Vmatrix*":s.lFence="\\Vert",s.rFence="\\Vert";break;case"smallmatrix":case"smallmatrix*":s.mathstyle="scriptstyle";break;case"matrix":case"matrix*":s.lFence=".",s.rFence="."}return s.colFormat=e[0]||[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],s})),zt("cases","",{},(function(){return{arraystretch:1.2,lFence:"\\lbrace",rFence:".",colFormat:[{align:"l"},{gap:1},{align:"l"}]}})),zt("theorem","",{},(function(){return{}})),zt("center","",{},(function(){return{colFormat:[{align:"c"}]}})),Tt("enclose","{notation:string}[style:string]{body:auto}",null,(t,e)=>{let s=e[0]||[];const i={type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",captureSelection:!0,body:e[2]};if(e[1]){const t=e[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const e of t){const t=e.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(t)i.strokeWidth=x(t[1],"px"),isFinite(i.strokeWidth)||(i.strokeWidth=1),i.strokeStyle=t[2],i.strokeColor=t[3];else{const t=e.match(/\s*([a-z]*)\s*=\s*"(.*)"/);t&&("mathbackground"===t[1]?i.backgroundcolor=t[2]:"mathcolor"===t[1]?i.strokeColor=t[2]:"padding"===t[1]?i.padding=x(t[2],"px"):"shadow"===t[1]&&(i.shadow=t[2]))}}"dashed"===i.strokeStyle?i.svgStrokeStyle="5,5":"dotted"===i.strokeStyle&&(i.svgStrokeStyle="1,5")}i.borderStyle=i.strokeWidth+"px "+i.strokeStyle+" "+i.strokeColor,s=s.toString().split(/[, ]/).filter(t=>t.length>0).map(t=>t.toLowerCase()),i.notation={};for(const t of s)i.notation[t]=!0;return i.notation.updiagonalarrow&&(i.notation.updiagonalstrike=!1),i.notation.box&&(i.notation.left=!1,i.notation.right=!1,i.notation.bottom=!1,i.notation.top=!1),i}),Tt("cancel","{body:auto}",null,(function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0},body:e[0]}})),Tt("bcancel","{body:auto}",null,(function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{downdiagonalstrike:!0},body:e[0]}})),Tt("xcancel","{body:auto}",null,(function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0,downdiagonalstrike:!0},body:e[0]}}));const $t={m0:"#3f3d99",m1:"#993d71",m2:"#998b3d",m3:"#3d9956",m4:"#3d5a99",m5:"#993d90",m6:"#996d3d",m7:"#43993d",m8:"#3d7999",m9:"#843d99"},Ft=["#d35d60","#7293cb","#e1974d","#84bb5d","#9066a7","#aD6a58","#f5a4ce","#fff590","#212121","#818787","#d4d5d2","#ffffff"],qt=["#cc2428","#3769b1","#da7e30","#409852","#6b4c9a","#922426","#e7298a","#ffe907","#000000","#525055","#adafaa","#ffffff"],Pt={apricot:"#FBB982",aquamarine:"#00B5BE",bittersweet:"#C04F17",black:"#221E1F",blue:"#2D2F92",bluegreen:"#00B3B8",blueviolet:"#473992",brickred:"#B6321C",brown:"#792500",burntorange:"#F7921D",cadetblue:"#74729A",carnationpink:"#F282B4",cerulean:"#00A2E3",cornflowerblue:"#41B0E4",cyan:"#00AEEF",dandelion:"#FDBC42",darkorchid:"#A4538A",emerald:"#00A99D",forestgreen:"#009B55",fuchsia:"#8C368C",goldenrod:"#FFDF42",gray:"#949698",green:"#00A64F",greenyellow:"#DFE674",junglegreen:"#00A99A",lavender:"#F49EC4",limegreen:"#8DC73E",magenta:"#EC008C",mahogany:"#A9341F",maroon:"#AF3235",melon:"#F89E7B",midnightblue:"#006795",mulberry:"#A93C93",navyblue:"#006EB8",olivegreen:"#3C8031",orange:"#F58137",orangered:"#ED135A",orchid:"#AF72B0",peach:"#F7965A",periwinkle:"#7977B8",pinegreen:"#008B72",plum:"#92268F",processblue:"#00B0F0",purple:"#99479B",rawsienna:"#974006",red:"#ED1B23",redorange:"#F26035",redviolet:"#A1246B",rhodamine:"#EF559F",royalblue:"#0071BC",royalpurple:"#613F99",rubinered:"#ED017D",salmon:"#F69289",seagreen:"#3FBC9D",sepia:"#671800",skyblue:"#46C5DD",springgreen:"#C6DC67",tan:"#DA9D76",tealblue:"#00AEB3",thistle:"#D883B7",turquoise:"#00B4CE",violet:"#58429B",violetred:"#EF58A0",white:"#FFFFFF",wildstrawberry:"#EE2967",yellow:"#FFF200",yellowgreen:"#98CC70",yelloworange:"#FAA21A"};function Et(t){const e=t.toLowerCase().split("!");let s,i,a,r=255,n=255,o=255,l=-1;const c=e.length>0&&"-"===e[0].charAt(0);c&&(e[0]=e[0].slice(1));for(let t=0;t<e.length;t++){s=r,i=n,a=o;let c=e[t].match(/([a-z0-9]*)/);c&&(c=c[1]);let h=Pt[c]||$t[c];h||(h=e[t]);let m=h.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(m&&m[1]&&m[2]&&m[3])r=Math.max(0,Math.min(255,parseInt(m[1],16))),n=Math.max(0,Math.min(255,parseInt(m[2],16))),o=Math.max(0,Math.min(255,parseInt(m[3],16)));else if(m=h.match(/^#([0-9a-f]{3})$/i),m&&m[1]){const t=parseInt(m[1][0],16),e=parseInt(m[1][1],16),s=parseInt(m[1][2],16);r=Math.max(0,Math.min(255,16*t+t)),n=Math.max(0,Math.min(255,16*e+e)),o=Math.max(0,Math.min(255,16*s+s))}else{if(m=h.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),!(m&&m[1]&&m[2]&&m[3]))return null;r=Math.max(0,Math.min(255,parseInt(m[1]))),n=Math.max(0,Math.min(255,parseInt(m[2]))),o=Math.max(0,Math.min(255,parseInt(m[3])))}l>=0&&(r=(1-l)*r+l*s,n=(1-l)*n+l*i,o=(1-l)*o+l*a,l=-1),t+1<e.length&&(l=Math.max(0,Math.min(100,parseInt(e[++t])))/100)}return l>=0&&(r=l*r+(1-l)*s,n=l*n+(1-l)*i,o=l*o+(1-l)*a),c&&(r=255-r,n=255-n,o=255-o),"#"+("00"+Math.round(r).toString(16)).slice(-2)+("00"+Math.round(n).toString(16)).slice(-2)+("00"+Math.round(o).toString(16)).slice(-2)}function Bt(t){let e=t.toUpperCase();for(const t in Pt)if(Pt[t]===e){e=t;break}for(const t in $t)if($t[t]===e){e=t;break}return e}Tt("ensuremath","{:math}",{},(t,e)=>({type:"group",mode:"math",body:e[0],skipBoundary:!0,latexOpen:"\\ensuremath{",latexClose:"}"}),(t,e,s,i)=>i(s,s.body)),Tt("color","{:color}",{},(t,e)=>({color:e[0]})),Tt("textcolor","{:color}{content:auto*}",{},(t,e)=>({color:e[0]})),Tt("boxed","{content:math}",null,(t,e)=>({type:"box",framecolor:"black",skipBoundary:!0,body:e[0]})),Tt("colorbox","{background-color:string}{content:auto}",{},(t,e)=>({type:"box",backgroundcolor:Et(e[0]),skipBoundary:!0,body:e[1],verbatimBackgroundcolor:e[0]}),(t,e,s,i)=>`${t}{${s.verbatimBackgroundcolor||Bt(s.backgroundcolor)}}{${i(s,s.body)}}`),Tt("fcolorbox","{frame-color:string}{background-color:string}{content:auto}",{},(function(t,e){return{type:"box",framecolor:Et(e[0]),backgroundcolor:Et(e[1]),skipBoundary:!0,body:e[2],verbatimBackgroundcolor:e[1],verbatimFramecolor:e[0]}}),(t,e,s,i)=>`${t}{${s.verbatimFramecolor||s.colorToString(s.framecolor)}{${s.verbatimBackgroundcolor||Bt(s.backgroundcolor)}}{${i(s,s.body)}}`),Tt("bbox","[:bbox]{body:auto}",{},(function(t,e){return e[0]?{type:"box",padding:e[0].padding,border:e[0].border,backgroundcolor:e[0].backgroundcolor,skipBoundary:!0,body:e[1]}:{type:"box",skipBoundary:!0,body:e[1]}}),(t,e,s,i)=>{let a=t;if(isFinite(s.padding)||void 0!==s.border||void 0!==s.backgroundcolor){const t=[];isFinite(s.padding)&&t.push(Math.floor(100*s.padding)/100+"em"),s.border&&t.push("border:"+s.border),s.backgroundcolor&&t.push(Bt(s.backgroundcolor)),a+=`[${t.join(",")}]`}return a+`{${i(s,s.body)}}`}),Tt(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{},(function(t,e){return{fontSize:{tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[t.slice(1)]}})),Tt("fontseries","{:text}",{mode:"text"},(t,e)=>({fontSeries:Lt(e[0])})),Tt("fontshape","{:text}",{mode:"text"},(t,e)=>({fontShape:Lt(e[0])})),Tt("fontfamily","{:text}",{mode:"text"},(t,e)=>({fontFamily:Lt(e[0])})),Tt("selectfont","",{mode:"text"},(t,e)=>({})),Tt("bf","",{},(t,e)=>({fontSeries:"b",fontShape:"n",fontFamily:"cmr"})),Tt(["boldsymbol","bm"],"{:math*}",{},(t,e)=>({mode:"math",cssClass:"ML__boldsymbol"})),Tt("bold","{:math*}",{},(t,e)=>({mode:"math",variantStyle:"bold"})),Tt("bfseries","",{mode:"text"},(t,e)=>({fontSeries:"b"})),Tt("mdseries","",{mode:"text"},(t,e)=>({fontSeries:"m"})),Tt("upshape","",{mode:"text"},(t,e)=>({fontShape:"n"})),Tt("slshape","",{mode:"text"},(t,e)=>({fontShape:"sl"})),Tt("scshape","",{mode:"text"},(t,e)=>({fontShape:"sc"})),Tt("textbf","{:text*}",{},(t,e)=>({mode:"text",fontSeries:"b"})),Tt("textmd","{:text*}",{},(t,e)=>({mode:"text",fontSeries:"m"})),Tt("textup","{:text*}",{},(t,e)=>({mode:"text",fontShape:"n"})),Tt("textnormal","{:text*}",{},(t,e)=>({mode:"text",fontShape:"n",fontSeries:"m"})),Tt("textsl","{:text*}",{},(t,e)=>({mode:"text",fontShape:"sl"})),Tt("textit","{:text*}",{},(t,e)=>({mode:"text",fontShape:"it"})),Tt("textsc","{:text*}",{},(t,e)=>({mode:"text",fontShape:"sc"})),Tt("textrm","{:text*}",{},(t,e)=>({mode:"text",fontFamily:"roman"})),Tt("textsf","{:text*}",{},(t,e)=>({mode:"text",fontFamily:"sans-serif"})),Tt("texttt","{:text*}",{},(t,e)=>({mode:"text",fontFamily:"monospace"})),Tt("mathbf","{:math*}",{},(t,e)=>({mode:"math",variant:"normal",variantStyle:"bold"})),Tt("mathit","{:math*}",{},(t,e)=>({mode:"math",variant:"normal",variantStyle:"italic"})),Tt("mathbfit","{:math*}",{},(t,e)=>({mode:"math",variant:"normal",variantStyle:"bolditalic"})),Tt("mathrm","{:math*}",{},(t,e)=>({mode:"math",variant:"normal",variantStyle:"up"})),Tt("mathsf","{:math*}",{},(t,e)=>({mode:"math",variant:"sans-serif",variantStyle:"up"})),Tt("mathtt","{:math*}",{},(t,e)=>({mode:"math",variant:"monospace",variantStyle:"up"})),Tt("it","",{},(t,e)=>({fontSeries:"m",fontShape:"it",fontFamily:"cmr",variantStyle:"it"})),Tt("rmfamily","",{},(t,e)=>({fontFamily:"roman"})),Tt("sffamily","",{},(t,e)=>({fontFamily:"sans-serif"})),Tt("ttfamily","",{},(t,e)=>({fontFamily:"monospace"})),Tt(["Bbb","mathbb"],"{:math*}",{},(t,e)=>({variant:"double-struck",variantStyle:"up"})),Tt(["frak","mathfrak"],"{:math*}",{},(t,e)=>({variant:"fraktur",variantStyle:"up"})),Tt("mathcal","{:math*}",{},(t,e)=>({variant:"calligraphic",variantStyle:"up"})),Tt("mathscr","{:math*}",{},(t,e)=>({variant:"script",variantStyle:"up"})),Tt("mbox","{:text}",null,(t,e)=>({type:"group",mode:"math",body:e[0]})),Tt("text","{:text*}",null,(t,e)=>({mode:"text"})),Tt("class","{name:text}{content:auto*}",null,(t,e)=>({cssClass:Lt(e[0])})),Tt("cssId","{id:text}{content:auto}",null,(t,e)=>({type:"group",body:e[1],cssId:Lt(e[0])})),Tt("em","",null,(t,e)=>({cssClass:"ML__emph"})),Tt("emph","{:auto}",null,(t,e)=>({cssClass:"ML__emph",body:e[0],type:"group",skipBoundary:!0}));const Kt={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};Tt(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",null,(function(t,e){return{type:"sizeddelim",size:Kt[t].size,cls:Kt[t].mclass,delim:e[0]}})),Tt(["hspace","hspace*"],"{width:skip}",{},(function(t,e){return{type:"spacing",width:e[0]||0}})),Tt(["mathop","mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",null,(function(t,e){const s={type:{"\\mathop":"mop","\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t],body:e[0],captureSelection:!0};return"\\mathop"===t&&(s.limits="limits",s.isFunction=!0),s}),(t,e,s,i)=>`${t}{${i(s,s.body)}}`),Tt(["operatorname","operatorname*"],"{operator:math}",null,(function(t,e){const s={type:"mop",captureSelection:!0,body:e[0],isFunction:!0};return s.body.forEach(t=>{t.isFunction=!1,t.variant||t.variantStyle||(t.variant="main",t.variantStyle="up"),t.type="mord",t.body={"∗":"*","−":"-"}[t.body]||t.body}),"\\operatorname"===t?s.limits="nolimits":"\\operatorname*"===t&&(s.limits="limits"),s})),Tt("unicode","{charcode:number}",null,(t,e)=>{let s=parseInt(e[0]);return isFinite(s)||(s=10067),{type:"mord",body:String.fromCodePoint(s),codepoint:s}},(t,e,s,i)=>`${t}{"${("000000"+s.codepoint.toString(16)).toUpperCase().substr(-6)}}`),Tt("rule","[raise:dimen]{width:dimen}{thickness:dimen}",null,(function(t,e){return{type:"rule",shift:e[0],width:e[1],height:e[2]}})),Tt("overline","{:auto}",null,(function(t,e){return{type:"line",position:"overline",skipBoundary:!0,body:e[0]}})),Tt("underline","{:auto}",null,(function(t,e){return{type:"line",position:"underline",skipBoundary:!0,body:e[0]}})),Tt("overset","{annotation:auto}{symbol:auto}",null,(function(t,e){return{type:"overunder",overscript:e[0],skipBoundary:!0,body:e[1]}}),(t,e,s,i)=>`${t}{${i(s,s.overscript)}}{${i(s,s.body)}}`),Tt("underset","{annotation:auto}{symbol:auto}",null,(function(t,e){return{type:"overunder",underscript:e[0],skipBoundary:!0,body:e[1]}}),(t,e,s,i)=>`${t}{${i(s,s.overscript)}}{${i(s,s.body)}}`),Tt(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0},(function(t,e){return{type:"genfrac",numer:e[0],denom:e[1],hasBarLine:!1,leftDelim:e[2],rightDelim:e[3],mathstyle:"auto"}}),(t,e,s,i)=>`${i(s,s.numer)} ${t}${s.leftDelim}${s.rightDelim}${i(s,s.denom)}`),Tt(["stackrel","stackbin"],"{annotation:auto}{symbol:auto}",null,(function(t,e){return{type:"overunder",overscript:e[0],skipBoundary:!0,body:e[1],mathtype:"\\stackrel"===t?"mrel":"mbin"}}),(t,e,s,i)=>`${t}{${i(s,s.overscript)}}{${i(s,s.body)}}`),Tt("rlap","{:auto}",null,(function(t,e){return{type:"overlap",align:"right",skipBoundary:!0,body:e[0]}})),Tt("llap","{:auto}",null,(function(t,e){return{type:"overlap",align:"left",skipBoundary:!0,body:e[0]}})),Tt("mathrlap","{:auto}",null,(function(t,e){return{type:"overlap",mode:"math",align:"right",skipBoundary:!0,body:e[0]}})),Tt("mathllap","{:auto}",null,(function(t,e){return{type:"overlap",mode:"math",align:"left",skipBoundary:!0,body:e[0]}})),Tt(["arcsin","arccos","arctan","arctg","arcctg","arg","ch","cos","cosec","cosh","cot","cotg","coth","csc","ctg","cth","sec","sin","sinh","sh","tan","tanh","tg","th"],"",null,(function(t){return{type:"mop",limits:"nolimits",isSymbol:!1,isFunction:!0,body:t.slice(1),variant:"main",variantStyle:"up"}})),Tt(["deg","dim","exp","hom","ker","lb","lg","ln","log"],"",null,(function(t){return{type:"mop",limits:"nolimits",isSymbol:!1,isFunction:!0,body:t.slice(1),variant:"main",variantStyle:"up"}})),Tt(["lim","mod"],"",null,(function(t){return{type:"mop",limits:"limits",isSymbol:!1,body:t.slice(1),variant:"main"}})),Tt(["det","max","min"],"",null,(function(t){return{type:"mop",limits:"limits",isSymbol:!1,isFunction:!0,body:t.slice(1),variant:"main"}})),Tt("sqrt","[index:auto]{radicand:auto}",null,(t,e)=>({type:"surd",body:e[1],index:e[0]}),(t,e,s,i)=>{let a="";return s.index&&(a+=`[${i(s,s.index)}]`),a+=`{${i(s,s.body)}}`,t+a}),Tt(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{numerator}{denominator}",null,(t,e)=>{const s={type:"genfrac",numer:e[0],denom:e[1],mathstyle:"auto"};switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":case"\\cfrac":s.hasBarLine=!0;break;case"\\\\atopfrac":s.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s.hasBarLine=!1,s.leftDelim="(",s.rightDelim=")"}switch(t){case"\\dfrac":case"\\dbinom":s.mathstyle="displaystyle";break;case"\\tfrac":case"\\tbinom":s.mathstyle="textstyle"}return"\\cfrac"===t&&(s.continuousFraction=!0),s},(t,e,s,i)=>`${t}{${i(s,s.numer)}}{${i(s,s.denom)}}`),Tt(["over","atop","choose"],"",{infix:!0},(t,e)=>{const s=e[0],i=e[1];let a=!1,r=null,n=null;switch(t){case"\\atop":break;case"\\over":a=!0;break;case"\\choose":a=!1,r="(",n=")";break;default:throw new Error("Unrecognized genfrac command")}return{type:"genfrac",numer:s,denom:i,hasBarLine:a,leftDelim:r,rightDelim:n,mathstyle:"auto"}},(t,e,s,i)=>`{${i(s,s.numer)}${t} ${i(s,s.denom)}}`),Tt("pdiff","{numerator}{denominator}",null,(function(t,e){return{type:"genfrac",numer:e[0],denom:e[1],numerPrefix:"∂",denomPrefix:"∂",hasBarLine:!0,leftDelim:null,rightDelim:null,mathstyle:"auto"}}),(t,e,s,i)=>`${t}{${i(s,s.numer)}}{${i(s,s.denom)}}`),Tt(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","smallint","intop"],"",null,(function(t){return{type:"mop",limits:"auto",isSymbol:!0,variant:"main",body:{coprod:"∐",bigvee:"⋁",bigwedge:"⋀",biguplus:"⨄",bigcap:"⋂",bigcup:"⋃",intop:"∫",prod:"∏",sum:"∑",bigotimes:"⨂",bigoplus:"⨁",bigodot:"⨀",bigsqcup:"⨆",smallint:"∫"}[t.slice(1)]}}));const Ot={int:"∫",iint:"∬",iiint:"∭",oint:"∮",oiint:"∯",oiiint:"∰",intclockwise:"∱",varointclockwise:"∲",ointctrclockwise:"∳",intctrclockwise:"⨑",sqcup:"⊔",sqcap:"⊓",uplus:"⊎",wr:"≀",amalg:"⨿",Cap:"⋒",Cup:"⋓",doublecap:"⋒",doublecup:"⋓"};function It(t,e,s,i,a,r){const n=Q(t,Z(X("Size"+s+"-Regular",kt("math",e)),"delimsizing size"+s),a.mathstyle,D.TEXT,r);return i&&n.setTop((1-a.mathstyle.sizeMultiplier)*a.mathstyle.metrics.axisHeight),n.setStyle("color",a.color),"number"==typeof a.opacity&&n.setStyle("opacity",a.opacity),n}function Rt(t,e){let s="";return"Size1-Regular"===e?s=" delim-size1":"Size4-Regular"===e&&(s=" delim-size4"),Z(X(e,kt("math",t)),"delimsizinginner"+s)}function Nt(t,e,s,i,a,r){let n,o,l,c;n=l=c=kt("math",e),o=null;let h="Size1-Regular";"\\vert"===e||"\\lvert"===e||"\\rvert"===e||"\\mvert"===e||"\\mid"===e?l=n=c="∣":"\\Vert"===e||"\\lVert"===e||"\\rVert"===e||"\\mVert"===e||"\\|"===e?l=n=c="∥":"\\uparrow"===e?l=c="⏐":"\\Uparrow"===e?l=c="‖":"\\downarrow"===e?n=l="⏐":"\\Downarrow"===e?n=l="‖":"\\updownarrow"===e?(n="↑",l="⏐",c="↓"):"\\Updownarrow"===e?(n="⇑",l="‖",c="⇓"):"["===e||"\\lbrack"===e?(n="⎡",l="⎢",c="⎣",h="Size4-Regular"):"]"===e||"\\rbrack"===e?(n="⎤",l="⎥",c="⎦",h="Size4-Regular"):"\\lfloor"===e?(l=n="⎢",c="⎣",h="Size4-Regular"):"\\lceil"===e?(n="⎡",l=c="⎢",h="Size4-Regular"):"\\rfloor"===e?(l=n="⎥",c="⎦",h="Size4-Regular"):"\\rceil"===e?(n="⎤",l=c="⎥",h="Size4-Regular"):"("===e?(n="⎛",l="⎜",c="⎝",h="Size4-Regular"):")"===e?(n="⎞",l="⎟",c="⎠",h="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(n="⎧",o="⎨",c="⎩",l="⎪",h="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(n="⎫",o="⎬",c="⎭",l="⎪",h="Size4-Regular"):"\\lgroup"===e?(n="⎧",c="⎩",l="⎪",h="Size4-Regular"):"\\rgroup"===e?(n="⎫",c="⎭",l="⎪",h="Size4-Regular"):"\\lmoustache"===e?(n="⎧",c="⎭",l="⎪",h="Size4-Regular"):"\\rmoustache"===e?(n="⎫",c="⎩",l="⎪",h="Size4-Regular"):"\\surd"===e?(n="",c="⎷",l="",h="Size4-Regular"):"\\ulcorner"===e?(n="┌",l=c=" "):"\\urcorner"===e?(n="┐",l=c=" "):"\\llcorner"===e?(c="└",l=n=" "):"\\lrcorner"===e&&(n="┘",l=n=" ");const m=y(kt("math",n),h),d=m.height+m.depth,p=y(kt("math",l),h),u=p.height+p.depth,f=y(kt("math",c),h),g=f.height+f.depth;let b=0,x=1;if(null!==o){const t=y(kt("math",o),h);b=t.height+t.depth,x=2}const v=d+g+b,k=Math.ceil((s-v)/(x*u)),w=v+k*x*u;let S=a.mathstyle.metrics.axisHeight;i&&(S*=a.mathstyle.sizeMultiplier);const M=w/2-S,A=[];if(A.push(Rt(c,h)),null===o)for(let t=0;t<k;t++)A.push(Rt(l,h));else{for(let t=0;t<k;t++)A.push(Rt(l,h));A.push(Rt(o,h));for(let t=0;t<k;t++)A.push(Rt(l,h))}A.push(Rt(n,h));const _=et(a,A,"bottom",M);return _.setStyle("color",a.color),"number"==typeof a.opacity&&_.setStyle("opacity",a.opacity),Q(t,Z(_,"delimsizing mult"),a.mathstyle,D.TEXT,r)}Tt(Object.keys(Ot),"",null,(function(t){return{type:"mop",limits:"nolimits",isSymbol:!0,body:Ot[t.slice(1)],variant:{"⋒":"ams","⋓":"ams"}[Ot[t.slice(1)]]}})),Tt(["Re","Im"],"",null,(function(t){return{type:"mop",limits:"nolimits",isSymbol:!1,isFunction:!0,body:{"\\Re":"ℜ","\\Im":"ℑ"}[t],variant:"fraktur"}})),Tt("middle","{:delim}",null,(function(t,e){return{type:"delim",delim:e[0]}}));const Ht=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd"],Wt=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],Vt=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],jt=[0,1.2,1.8,2.4,3],Ut=[{type:"small",mathstyle:D.SCRIPTSCRIPT},{type:"small",mathstyle:D.SCRIPT},{type:"small",mathstyle:D.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Gt=[{type:"small",mathstyle:D.SCRIPTSCRIPT},{type:"small",mathstyle:D.SCRIPT},{type:"small",mathstyle:D.TEXT},{type:"stack"}],Zt=[{type:"small",mathstyle:D.SCRIPTSCRIPT},{type:"small",mathstyle:D.SCRIPT},{type:"small",mathstyle:D.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function Xt(t,e,s,i,a,r){if(!e||0===e.length||"."===e)return Yt(t,a,t);let n;"<"===e||"\\lt"===e?e="\\langle":">"!==e&&"\\gt"!==e||(e="\\rangle"),n=Vt.includes(e)?Ut:Ht.includes(e)?Zt:Gt;const o=function(t,e,s,i){for(let r=Math.min(2,3-i.mathstyle.size);r<s.length&&"stack"!==s[r].type;r++){const i=y(t,"small"===(a=s[r]).type?"Main-Regular":"large"===a.type?"Size"+a.size+"-Regular":"Size4-Regular");if(i.defaultMetrics)return{type:"small",mathstyle:D.SCRIPT};let n=i.height+i.depth;if("small"===s[r].type&&(n*=s[r].mathstyle.sizeMultiplier),n>e)return s[r]}var a;return s[s.length-1]}(kt("math",e),s,n,a);return"small"===o.type?function(t,e,s,i,a,r){const n=Q(t,X("AMS-Regular",kt("math",e)),a.mathstyle,s,r);return i&&n.setTop((1-a.mathstyle.sizeMultiplier/s.sizeMultiplier)*a.mathstyle.metrics.axisHeight),n.setStyle("color",a.color),"number"==typeof a.opacity&&n.setStyle("opacity",a.opacity),n}(t,e,o.mathstyle,i,a,r):"large"===o.type?It(t,e,o.size,i,a,r):Nt(t,e,s,i,a,r)}function Yt(t,e,s){return Y(t,"","sizing"+e.mathstyle.adjustTo(D.TEXT)+" nulldelimiter "+(s||""))}var Jt={makeSizedDelim:function(t,e,s,i,a){return"."===e?Yt(t,i,a):("<"===e||"\\lt"===e?e="\\langle":">"!==e&&"\\gt"!==e||(e="\\rangle"),Ht.includes(e)||Vt.includes(e)?It(t,e,s,!1,i,a):Wt.includes(e)?Nt(t,e,jt[s],!1,i,a):null)},makeCustomSizedDelim:Xt,makeLeftRightDelim:function(t,e,s,i,a,r){if("."===e)return Yt(t,a,r);const n=a.mathstyle.metrics.axisHeight*a.mathstyle.sizeMultiplier,o=5/c;let l=i+n,h=s-n;h=Math.max(l,h);let m=901*h/500;return l=2*h-o,m=Math.max(m,l),Xt(t,e,m,!0,a,r)}};const Qt={},te={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49};function ee(t,e){Qt[t]={decompose:e}}function se(t,e){function s(t){return"mord"===t.type&&/^[0-9,.]$/.test(t.symbol)}function i(t){return"text"===t.mode}t instanceof $||(t=new $(t));const a=!t.generateID||!t.generateID.groupNumbers;let r=[];if(Array.isArray(e)){if(0===e.length)return[];if(1===e.length)r=e[0].decompose(t),r&&a&&e[0].isSelected&&r.forEach(t=>t.selected(!0));else{let n="none",o=e[1].type,l=[],c=null,h=!0,m=null;for(let d=0;d<e.length;d++){"mbin"===e[d].type&&(/first|none|mrel|mpunct|mopen|mbin|mop/.test(n)||/none|mrel|mpunct|mclose/.test(o))&&(e[d].type="mord"),"​"===e[d].body&&(e[d].superscript||e[d].subscript)||(m=null),t.generateID.groupNumbers&&c&&(h&&s(e[d])||!h&&i(e[d]))&&(t.generateID.overrideID=c);const p=e[d].decompose(t,m);if(t.generateID&&(t.generateID.overrideID=null),p){const n=[].concat(...p);m=n,t.generateID&&t.generateID.groupNumbers&&((s(e[d])||i(e[d]))&&(c&&h===s(e[d])||(h=s(e[d]),c=e[d].id)),(!s(e[d])&&!i(e[d])||e[d].superscript||e[d].subscript)&&c&&(c=null)),a&&e[d].isSelected?(l=l.concat(n),l.forEach(t=>t.selected(!0))):(l.length>0&&(r=[...r,...l],l=[]),r=r.concat(n))}n=e[d].getFinalBaseElement().type,o=e[d+1]?e[d+1].getInitialBaseElement().type:"none"}l.length>0&&(r=[...r,...l],l=[])}}else e&&(r=e.decompose(t),r&&a&&e.isSelected&&r.forEach(t=>t.selected(!0)));if(!r||0===r.length)return null;if(t.mathstyle!==t.parentMathstyle){const e=t.mathstyle.sizeMultiplier/t.parentMathstyle.sizeMultiplier;for(const t of r)t.height*=e,t.depth*=e}if(t.size!==t.parentSize){const e=te[t.size]/te[t.parentSize];for(const t of r)t.height*=e,t.depth*=e}return r}class ie{constructor(t,e,s,i){this.mode=t,this.type=e,this.body=s,this.applyStyle(i)}getStyle(){return{mode:this.mode,color:this.phantom?"transparent":this.color,backgroundColor:this.phantom?"transparent":this.backgroundColor,variant:this.variant,variantStyle:this.variantStyle,fontFamily:this.fontFamily,fontShape:this.fontShape,fontSeries:this.fontSeries,fontSize:this.fontSize,cssId:this.cssId,cssClass:this.cssClass}}applyStyle(t){Object.assign(this,t),"none"===this.fontFamily&&(this.fontFamily=""),"auto"===this.fontShape&&(this.fontShape=""),"auto"===this.fontSeries&&(this.fontSeries=""),"none"===this.color&&(this.color=""),"none"===this.backgroundColor&&(this.backgroundColor=""),"auto"===this.fontSize&&(this.fontSize=""),this.fontSize&&(this.maxFontSize=te[this.fontSize]),"text"===this.mode&&"root"!==this.type&&(this.type="")}getInitialBaseElement(){let t;return Array.isArray(this.body)&&this.body.length>0&&("first"!==this.body[0].type?t=this.body[0].getInitialBaseElement():this.body[1]&&(t=this.body[1].getInitialBaseElement())),t||this}getFinalBaseElement(){return Array.isArray(this.body)&&this.body.length>0?this.body[this.body.length-1].getFinalBaseElement():this}isCharacterBox(){const t=this.getInitialBaseElement();return/minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(t.type)}forEach(t){if(t(this),Array.isArray(this.body))for(const e of this.body)e&&e.forEach(t);else this.body&&"object"==typeof this.body&&t(this.body);if(this.superscript)for(const e of this.superscript)e&&e.forEach(t);if(this.subscript)for(const e of this.subscript)e&&e.forEach(t);if(this.overscript)for(const e of this.overscript)e&&e.forEach(t);if(this.underscript)for(const e of this.underscript)e&&e.forEach(t);if(this.numer)for(const e of this.numer)e&&e.forEach(t);if(this.denom)for(const e of this.denom)e&&e.forEach(t);if(this.index)for(const e of this.index)e&&e.forEach(t);if(this.array)for(const e of this.array)for(const s of e)for(const e of s)e.forEach(t)}filter(t){let e=[];t(this)&&e.push(this);for(const s of["body","superscript","subscript","overscript","underscript","numer","denom","index"])if(Array.isArray(this[s]))for(const i of this[s])i&&(e=e.concat(i.filter(t)));if(Array.isArray(this.array))for(const s of this.array)for(const i of s)i&&(e=e.concat(i.filter(t)));return e}decomposeGroup(t){const e=J(se(t.clone({mathstyle:this.mathstyle}),this.body));return this.cssId&&(e.cssId=this.cssId),e.applyStyle({backgroundColor:this.backgroundColor,cssClass:this.cssClass}),e}decomposeOverlap(t){return J([Z(se(t,this.body),"inner"),Z(null,"fix")],"left"===this.align?"llap":"rlap")}decomposeRule(t){const e=t.mathstyle,s=J("","rule");let i=this.shift&&!isNaN(this.shift)?this.shift:0;i/=e.sizeMultiplier;const a=this.width/e.sizeMultiplier,r=this.height/e.sizeMultiplier;return s.setStyle("border-right-width",a,"em"),s.setStyle("border-top-width",r,"em"),s.setStyle("margin-top",-(r-i),"em"),s.setStyle("border-color",t.color),s.width=a,s.height=r+i,s.depth=-i,s}decompose(t,e){let s=null;if(!this.type||/mord|minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(this.type)?(s="string"==typeof this.body?this.makeSpan(t,this.body):this.makeSpan(t,se(t,this.body)),s.type=this.type):"group"===this.type||"root"===this.type?s=this.decomposeGroup(t):"delim"===this.type?(s=Z(null,""),s.delim=this.delim):"sizeddelim"===this.type?s=this.bind(t,Jt.makeSizedDelim(this.cls,this.delim,this.size,t)):"overlap"===this.type?s=this.decomposeOverlap(t):"rule"===this.type?s=this.decomposeRule(t):"msubsup"===this.type?(s=J("​"),e&&(s.height=e[0].height,s.depth=e[0].depth)):"space"===this.type?s=this.makeSpan(t," "):"spacing"===this.type?"​"===this.body?s=this.makeSpan(t,"​"):" "===this.body?s="math"===this.mode?this.makeSpan(t," "):this.makeSpan(t," "):this.width?(s=Z("​","mspace "),this.width>0?s.setWidth(this.width):s.setStyle("margin-left",this.width,"em")):s=Z("​","mspace "+({qquad:"qquad",quad:"quad",enspace:"enspace",";":"thickspace",":":"mediumspace",",":"thinspace","!":"negativethinspace"}[this.body]||"quad")):"mathstyle"===this.type?t.setMathstyle(this.mathstyle):"command"===this.type||"error"===this.type?(s=this.makeSpan(t,this.body),s.classes="",this.error&&(s.classes+=" ML__error"),this.suggestion&&(s.classes+=" ML__suggestion")):s="placeholder"===this.type?this.makeSpan(t,"⬚"):"first"===this.type?this.makeSpan(t,"​"):Qt[this.type].decompose(t,this),!s)return s;if(this.caret&&"msubsup"!==this.type&&"command"!==this.type&&"placeholder"!==this.type&&"first"!==this.type&&(Array.isArray(s)?s[s.length-1].caret=this.caret:s.caret=this.caret),this.containsCaret&&(Array.isArray(s)?(s[0].classes=(s[0].classes||"")+" ML__contains-caret",s[s.length-1].classes=(s[s.length-1].classes||"")+" ML__contains-caret"):s.classes=(s.classes||"")+" ML__contains-caret"),!this.limits&&(this.superscript||this.subscript))if(Array.isArray(s)){const e=s[s.length-1];s[s.length-1]=this.attachSupsub(t,e,e.type)}else s=[this.attachSupsub(t,s,s.type)];return Array.isArray(s)?s:[s]}attachSupsub(t,e,s){if(!this.superscript&&!this.subscript)return e;const a=t.mathstyle;let r=null,n=null;this.superscript&&(r=Z(se(t.sup(),this.superscript),a.adjustTo(a.sup()))),this.subscript&&(n=Z(se(t.sub(),this.subscript),a.adjustTo(a.sub())));let o,l=0,h=0;this.isCharacterBox()||(l=j(e)-a.metrics.supDrop,h=U(e)+a.metrics.subDrop),o=a===D.DISPLAY?a.metrics.sup1:a.cramped?a.metrics.sup3:a.metrics.sup2;const m=D.TEXT.sizeMultiplier*a.sizeMultiplier,d=.5/c/m;let p=null;if(n&&r){l=Math.max(l,o,r.depth+.25*a.metrics.xHeight),h=Math.max(h,a.metrics.sub2);const s=i;if(l-U(r)-(j(n)-h)<4*s){h=4*s-(l-r.depth)+j(n);const t=.8*a.metrics.xHeight-(l-U(r));t>0&&(l+=t,h-=t)}p=et(t,[n,h,r,-l],"individualShift"),this.isSymbol&&p.children[0].setLeft(-G(e))}else n&&!r?(h=Math.max(h,a.metrics.sub1,j(n)-.8*a.metrics.xHeight),p=et(t,[n],"shift",h),p.children[0].setRight(d),this.isCharacterBox()&&p.children[0].setLeft(-G(e))):!n&&r&&(l=Math.max(l,o,r.depth+.25*a.metrics.xHeight),p=et(t,[r],"shift",-l),p.children[0].setRight(d));const u=Z(p,"msubsup");return this.caret&&(u.caret=this.caret),Y(s,[e,u])}attachLimits(t,e,s,i){const c=this.superscript?Z(se(t.sup(),this.superscript),t.mathstyle.adjustTo(t.mathstyle.sup())):null,h=this.subscript?Z(se(t.sub(),this.subscript),t.mathstyle.adjustTo(t.mathstyle.sub())):null;return function(t,e,s,i,c,h){if(!c&&!h)return e;e=Z(e);let m=0,d=0;c&&(m=Math.max(a,n-U(c))),h&&(d=Math.max(r,o-j(h)));let p=null;if(h&&c){const a=l+j(h)+U(h)+d+U(e)+s;p=et(t,[l,h,d,e,m,c,l],"bottom",a),p.children[0].setLeft(-i),p.children[2].setLeft(i)}else if(h&&!c){const a=j(e)-s;p=et(t,[l,h,d,e],"top",a),p.children[0].setLeft(-i)}else if(!h&&c){const a=U(e)+s;p=et(t,[e,m,c,l],"bottom",a),p.children[1].setLeft(i)}return Y("mop",p,"op-limits")}(t,e,s,i,c,h)}bind(t,e){return"first"!==this.type&&"​"!==this.body&&(this.id=function(t){let e;return"boolean"==typeof t.generateID&&t.generateID?e=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36):"object"==typeof t.generateID&&(e=t.generateID.overrideID?t.generateID.overrideID:t.generateID.seed.toString(36),t.generateID.seed+=1),e}(t),this.id&&(e.attributes||(e.attributes={}),e.attributes["data-atom-id"]=this.id)),e}makeSpan(t,e){const s=Y("textord"===this.type?"mord":this.type,e),i=this.getStyle();i.letterShapeStyle=t.letterShapeStyle,s.applyStyle(i);const a=i&&i.fontSize?i.fontSize:"size5";return a!==t.parentSize?(s.classes+=" sizing reset-"+t.parentSize,s.classes+=" "+a):t.parentSize!==t.size&&(s.classes+=" sizing reset-"+t.parentSize,s.classes+=" "+t.size),s.maxFontSize=Math.max(s.maxFontSize,t.sizeMultiplier||1),"text"===this.mode&&(s.classes+=" ML__text"),t.mathstyle.isTight()&&(s.isTight=!0),"math"!==this.mode&&(s.italic=0),s.setRight(s.italic),"number"==typeof t.opacity&&s.setStyle("opacity",t.opacity),this.bind(t,s),this.caret&&(this.superscript||this.subscript||(s.caret=this.caret,t.mathstyle.isTight()&&(s.isTight=!0))),s}}function ae(t,e){const s=new ie(t=t||"math","root",e||[]);return 0!==s.body.length&&"first"===s.body[0].type||s.body.unshift(new ie("","first")),s}function re(t){const e=Z("​","arraycolsep");return e.setWidth(t,"em"),e}function ne(t,e,s,i){const a=[];for(const r of e){const e=Z(se(t,i));e.depth=r.depth,e.height=r.height,a.push(e),a.push(r.pos-s)}return et(t,a,"individualShift")}ee("genfrac",(t,e)=>{const s="auto"===e.mathstyle?t.mathstyle:D.toMathstyle(e.mathstyle),a=t.clone({mathstyle:s});let r=[];e.numerPrefix&&r.push(J(e.numerPrefix));const n=e.continuousFraction?s:s.fracNum();r=r.concat(se(a.clone({mathstyle:n}),e.numer));const o=tt(r,t.mathstyle.adjustTo(n));let l=[];e.denomPrefix&&l.push(J(e.denomPrefix));const c=e.continuousFraction?s:s.fracDen();l=l.concat(se(a.clone({mathstyle:c}),e.denom));const h=tt(l,t.mathstyle.adjustTo(c)),m=e.hasBarLine?i/s.sizeMultiplier:0;let d,p,u;s.size===D.DISPLAY.size?(d=s.metrics.num1,p=m>0?3*m:7*i,u=s.metrics.denom1):(m>0?(d=s.metrics.num2,p=m):(d=s.metrics.num3,p=3*i),u=s.metrics.denom2);const f=o?o.depth:0,g=h?h.height:0;let y;if(0===m){const t=d-f-(g-u);t<p&&(d+=.5*(p-t),u+=.5*(p-t)),y=et(a,[o,-d,h,u],"individualShift")}else{const t=s.metrics.axisHeight;d-f-(t+.5*m)<p&&(d+=p-(d-f-(t+.5*m))),t-.5*m-(g-u)<p&&(u+=p-(t-.5*m-(g-u)));const i=Z(null," frac-line");i.applyStyle(e.getStyle()),i.height=m;const r=[];o&&(r.push(o),r.push(-d)),r.push(i),r.push(m/2-t),h&&(r.push(h),r.push(u)),y=et(a,r,"individualShift")}y.classes+=" mfrac",y.height*=s.sizeMultiplier/t.mathstyle.sizeMultiplier,y.depth*=s.sizeMultiplier/t.mathstyle.sizeMultiplier;const b=s.size===D.DISPLAY.size?s.metrics.delim1:s.metrics.delim2,x=e.bind(t,Jt.makeCustomSizedDelim("mopen",e.leftDelim,b,!0,t.clone({mathstyle:s}))),v=e.bind(t,Jt.makeCustomSizedDelim("mclose",e.rightDelim,b,!0,t.clone({mathstyle:s})));x.applyStyle(e.getStyle()),v.applyStyle(e.getStyle());const k=J([x,y,v],t.parentSize!==t.size?"sizing reset-"+t.parentSize+" "+t.size:"");return e.bind(t,k)}),ee("array",(t,e)=>{let s=e.colFormat;s&&0===s.length&&(s=[{align:"l"}]),s||(s=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]);const i=[];let a=0;for(const t of s)t.align&&a++;for(const t of e.array){let e=0;for(;e<t.length;){const s=[],r=Math.min(t.length,e+a);for(;e<r;)s.push(t[e++]);i.push(s)}}1===i[i.length-1].length&&0===i[i.length-1][0].length&&i.pop();const r=D.toMathstyle(e.mathstyle)||t.mathstyle,n=e.arraystretch||1,o="number"==typeof e.arraycolsep?e.arraycolsep:m,l=n*d,c=.7*l,u=.3*l;let f=0,g=0;const y=[],b=i.length;for(let s=0;s<b;++s){const a=i[s];g=Math.max(g,a.length);let r=c,n=u;const o=[];for(let s=0;s<a.length;++s){const i=se(t.clone({mathstyle:e.mathstyle}),a[s])||[],l=[J(null)].concat(i);n=Math.max(n,U(l)),r=Math.max(r,j(l)),o.push(l)}let l=s===b-1?0:e.jot||0;e.rowGaps&&e.rowGaps[s]&&(l=e.rowGaps[s],l>0&&(l+=u,n<l&&(n=l),l=0)),o.height=r,o.depth=n,f+=r,o.pos=f,f+=n+l,y.push(o)}const x=f/2+r.metrics.axisHeight,v=[];for(let e=0;e<g;e++){const s=[];for(const t of y){const i=t[e];i&&(i.depth=t.depth,i.height=t.height,s.push(i),s.push(t.pos-x))}s.length>0&&v.push(et(t,s,"individualShift"))}const k=[];let w=!1,S=!1,M=0,A=!e.lFence;for(const e of s){if(e.align&&M>=v.length)break;if(e.align&&M<v.length)w?k.push(re(2*o)):(S||A)&&k.push(re(o)),k.push(Z(v[M],"col-align-"+e.align)),M++,w=!0,S=!1,A=!1;else if(void 0!==e.gap)"number"==typeof e.gap?k.push(re(e.gap)):k.push(ne(t,y,x,e.gap)),w=!1,S=!1,A=!1;else if(e.rule){const e=Z(null,"vertical-separator");e.setStyle("height",f,"em"),e.setStyle("margin-top",3*t.mathstyle.metrics.axisHeight-x,"em"),e.setStyle("vertical-align","top");let s=0;S?s=h-p:w&&(s=o-p),e.setLeft(s,"em"),k.push(e),w=!1,S=!0,A=!1}}if(w&&!e.rFence&&k.push(re(o)),!(e.lFence&&"."!==e.lFence||e.rFence&&"."!==e.rFence))return J(k,"mtable");const _=Z(k,"mtable"),C=j(_),L=U(_);return J([e.bind(t,Jt.makeLeftRightDelim("mopen",e.lFence,C,L,t)),_,e.bind(t,Jt.makeLeftRightDelim("mclose",e.rFence,C,L,t))])}),ee("overunder",(t,e)=>{const s=e.svgBody?st(e.svgBody):se(t,e.body),i=t.clone({mathstyle:"scriptstyle"});let l,c;return e.svgAbove?l=st(e.svgAbove):e.overscript&&(l=Z(se(i,e.overscript),t.mathstyle.adjustTo(i.mathstyle))),e.svgBelow?c=st(e.svgBelow):e.underscript&&(c=Z(se(i,e.underscript),t.mathstyle.adjustTo(i.mathstyle))),l&&c&&(c.setLeft(.3),c.setRight(.3),l.setLeft(.3),l.setRight(.3)),function(t,e,s,i,l){if(!s&&!i)return e;let c=0,h=0;s&&(c=Math.max(a,n-U(s))),i&&(h=Math.max(r,o-j(i)));let m=null;if(i&&s){const a=j(i)+U(i)+U(e);m=et(t,[0,i,n+U(e),e,-c,s,r],"bottom",a)}else if(i&&!s){m=et(t,[0,i,h,e],"top",j(e))}else s&&!i&&(m=et(t,[e,Math.max(r,c-U(s)),s,0],"bottom",U(e)));return Y(l,m,"op-over-under")}(t,s,l,c,e.mathtype||"mord")}),ee("accent",(t,e)=>{const s=t.mathstyle;let i=se(t.cramp(),e.body);(e.superscript||e.subscript)&&(i=e.attachSupsub(t,J(i),"mord"));let r=0;Array.isArray(e.body)&&1===e.body.length&&e.body[0].isCharacterBox()&&(r=function(t){if(!t)return 0;if(Array.isArray(t)){let e=0;for(const s of t)e+=s.skew||0;return e}return t.skew}(i));let n,o=Math.min(j(i),s.metrics.xHeight);if(e.svgAccent)n=st(e.svgAccent),o=-o+a;else{const t=X("Main-Regular",e.accent,"math");t.italic=0;const s="⃗"===e.accent?" accent-vec":"";n=Z(Z(t),"accent-body"+s)}return n=et(t,[i,-o,n]),n.children[1].setLeft(2*r),J(n,"accent")}),ee("enclose",(t,e)=>{const s=J(se(t,e.body)),i="number"==typeof e.padding?e.padding:u,a=Z("","ML__notation");a.setStyle("position","absolute"),a.setStyle("height",j(s)+U(s)+2*i,"em"),a.height=j(s)+i,a.depth=U(s)+i,0!==i?a.setStyle("width","calc(100% + "+2*i+"em)"):a.setStyle("width","100%"),a.setStyle("top","0"),a.setStyle("left",-i,"em"),a.setStyle("z-index","-1"),e.backgroundcolor&&a.setStyle("background-color",e.backgroundcolor),e.notation.box&&a.setStyle("border",e.borderStyle),e.notation.actuarial&&(a.setStyle("border-top",e.borderStyle),a.setStyle("border-right",e.borderStyle)),e.notation.madruwb&&(a.setStyle("border-bottom",e.borderStyle),a.setStyle("border-right",e.borderStyle)),e.notation.roundedbox&&(a.setStyle("border-radius",(j(s)+U(s))/2,"em"),a.setStyle("border",e.borderStyle)),e.notation.circle&&(a.setStyle("border-radius","50%"),a.setStyle("border",e.borderStyle)),e.notation.top&&a.setStyle("border-top",e.borderStyle),e.notation.left&&a.setStyle("border-left",e.borderStyle),e.notation.right&&a.setStyle("border-right",e.borderStyle),e.notation.bottom&&a.setStyle("border-bottom",e.borderStyle);let r="";if(e.notation.horizontalstrike&&(r+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',r+=` stroke-width="${e.strokeWidth}" stroke="${e.strokeColor}"`,r+=' stroke-linecap="round"',e.svgStrokeStyle&&(r+=` stroke-dasharray="${e.svgStrokeStyle}"`),r+="/>"),e.notation.verticalstrike&&(r+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',r+=` stroke-width="${e.strokeWidth}" stroke="${e.strokeColor}"`,r+=' stroke-linecap="round"',e.svgStrokeStyle&&(r+=` stroke-dasharray="${e.svgStrokeStyle}"`),r+="/>"),e.notation.updiagonalstrike&&(r+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',r+=` stroke-width="${e.strokeWidth}" stroke="${e.strokeColor}"`,r+=' stroke-linecap="round"',e.svgStrokeStyle&&(r+=` stroke-dasharray="${e.svgStrokeStyle}"`),r+="/>"),e.notation.downdiagonalstrike&&(r+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',r+=` stroke-width="${e.strokeWidth}" stroke="${e.strokeColor}"`,r+=' stroke-linecap="round"',e.svgStrokeStyle&&(r+=` stroke-dasharray="${e.svgStrokeStyle}"`),r+="/>"),r){let t;"none"!==e.shadow&&(t="auto"===e.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+e.shadow+")"),function(t,e,s){t.svgOverlay=e,t.svgStyle=s}(a,r,t)}const n=Z([a,s]);return n.setStyle("position","relative"),n.setStyle("display","inline"),n.setStyle("vertical-align",-i+U(s),"em"),n.height=j(s)+i,n.depth=U(s)+i,n.setLeft(i),n.setRight(i),n}),ee("box",(t,e)=>{const s="number"==typeof e.padding?e.padding:u,i=J(se(t,e.body)),a=Z("","ML__box");a.setStyle("position","absolute"),a.setStyle("height",j(i)+U(i)+2*s,"em"),0!==s?a.setStyle("width","calc(100% + "+2*s+"em)"):a.setStyle("width","100%"),a.setStyle("bottom",-U(i),"em"),a.setStyle("left",-s,"em"),a.setStyle("z-index","-1"),a.setStyle("box-sizing","border-box"),e.backgroundcolor&&a.setStyle("background-color",e.backgroundcolor),e.framecolor&&a.setStyle("border",f+"em solid "+e.framecolor),e.border&&a.setStyle("border",e.border),i.setStyle("display","inline-block"),i.setStyle("height",j(i)+U(i),"em"),i.setStyle("vertical-align",-U(i)+s,"em");const r=Z([a,i]);return r.setStyle("position","relative"),r.setStyle("vertical-align",-s+U(i),"em"),r.height=j(i)+s,r.depth=U(i)+s,r.setLeft(s),r.setRight(s),r}),ee("mop",(t,e)=>{const s=t.mathstyle;let i,a=0,r=0;if(e.isSymbol){const n=s.size===D.DISPLAY.size&&"\\smallint"!==e.symbol;i=X(n?"Size2-Regular":"Size1-Regular",e.body,"op-symbol "+(n?"large-op":"small-op")),i.type="mop",a=(i.height-i.depth)/2-s.metrics.axisHeight*s.sizeMultiplier,r=i.italic,i.applyStyle({color:e.phantom?"transparent":e.color,backgroundColor:e.phantom?"transparent":e.backgroundColor,cssId:e.cssId,cssClass:e.cssClass,letterShapeStyle:t.letterShapeStyle})}else i=Array.isArray(e.body)?Y("mop",se(t,e.body),void 0):e.makeSpan(t,e.body);e.bind(t,i),e.isSymbol&&i.setTop(a);let n=i;if(e.superscript||e.subscript){const o=e.limits||"auto";n=e.alwaysHandleSupSub||"limits"===o||"auto"===o&&s.size===D.DISPLAY.size?e.attachLimits(t,i,a,r):e.attachSupsub(t,i,"mop")}return n}),ee("line",(t,e)=>{const s=t.mathstyle,a=se(t.cramp(),e.body),r=i/s.sizeMultiplier,n=Z(null,t.mathstyle.adjustTo(D.TEXT)+" "+e.position+"-line");let o;if(n.height=r,n.maxFontSize=1,"overline"===e.position)o=et(t,[a,3*r,n,r]);else{const e=Z(a);o=et(t,[r,n,3*r,e],"top",j(e))}return J(o,e.position)}),ee("leftright",(t,e)=>{if(!e.body)return e.leftDelim?new ie("math","mopen",e.leftDelim).decompose(t):e.rightDelim?new ie("math","mclose",e.rightDelim).decompose(t):null;const s=t.clone(),i=se(s,e.body),a=s.mathstyle;let r=0,n=0,o=[];if(r=j(i)*a.sizeMultiplier,n=U(i)*a.sizeMultiplier,e.leftDelim&&(o.push(e.bind(t,Jt.makeLeftRightDelim("mopen",e.leftDelim,r,n,s,"ML__open"))),o[o.length-1].applyStyle(e.getStyle())),i){for(let a=0;a<i.length;a++)if(i[a].delim){const o=i[a].caret,l=/ML__selected/.test(i[a].classes);i[a]=e.bind(t,Jt.makeLeftRightDelim("minner",i[a].delim,r,n,s)),i[a].caret=o,i[a].selected(l)}o=o.concat(i)}if(e.rightDelim){let i,a=e.rightDelim;"?"===a&&(a={"(":")","\\{":"\\}","\\[":"\\]","\\lbrace":"\\rbrace","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"}[e.leftDelim],a=a||e.leftDelim,i="ML__smart-fence__close"),o.push(e.bind(t,Jt.makeLeftRightDelim("mclose",a,r,n,s,(i||"")+" ML__close"))),o[o.length-1].applyStyle(e.getStyle())}return e.inner?Y("minner",o,a.cls()):o}),ee("surd",(t,e)=>{const s=t.mathstyle,a=se(t.cramp(),e.body),r=i/s.sizeMultiplier;let n=r;s.id<D.TEXT.id&&(n=s.metrics.xHeight);let o=r+n/4;const l=Math.max(2*n,(j(a)+U(a))*s.sizeMultiplier)+(o+r),c=Z(Jt.makeCustomSizedDelim("","\\surd",l,!1,t),"sqrt-sign");c.applyStyle(e.getStyle());const h=c.height+c.depth-r;h>j(a)+U(a)+o&&(o=(o+h-(j(a)+U(a)))/2),c.setTop(c.height-j(a)-(o+r));const m=Z(null,t.mathstyle.adjustTo(D.TEXT)+" sqrt-line");m.applyStyle(e.getStyle()),m.height=r;const d=et(t,[a,o,m,r]);if(!e.index)return e.bind(t,J([c,d],"sqrt"));const p=t.clone({mathstyle:D.SCRIPTSCRIPT}),u=et(t,[Z(se(p,e.index),s.adjustTo(D.SCRIPTSCRIPT))],"shift",-.6*(Math.max(c.height,d.height)-Math.max(c.depth,d.depth)));return e.bind(t,J([Z(u,"root"),c,d],"sqrt"))});const oe=[[8205,1],[65038,2],[127995,5],[129456,4],[917536,96]];let le;const ce=[127462,127487];function he(t){var e;return le||(le={},oe.forEach(t=>{for(let e=t[0];e<=t[0]+t[1]-1;e++)le[e]=!0})),null!==(e=le[t])&&void 0!==e&&e}function me(t){return t>=ce[0]&&t<=ce[1]}function de(t){if(/^[\x20-\xFF]*$/.test(t))return t;const e=[],s=function(t){const e=[];for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);if(13===i&&10===t.charCodeAt(s+1)&&(i=10,s++),13!==i&&12!==i||(i=10),0===i&&(i=65533),i>=55296&&i<=56319){const e=t.charCodeAt(s+1);if(e>=56320&&e<=57343){const t=i-55296,a=e-56320;i=Math.pow(2,16)+t*Math.pow(2,10)+a,s++}}e.push(i)}return e}(t);let i=0;for(;i<s.length;){const t=s[i++],a=s[i];if(8205===a){const t=i-1;for(i+=2;8205===s[i];)i+=2;e.push(String.fromCodePoint(...s.slice(t,i-t+1)))}else if(he(a)){const t=i-1;for(;he(s[i]);)i+=8205===s[i]?2:1;e.push(String.fromCodePoint(...s.slice(t,i-t)))}else me(t)?(i+=1,e.push(String.fromCodePoint(...s.slice(i-2,2)))):e.push(String.fromCodePoint(t))}return e}class pe{constructor(t,e){this.type=t,this.value=e}}class ue{constructor(t){this.s=de(t),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:null}peek(){return this.s[this.pos]}scan(t){let e;return e="string"==typeof this.s?t.exec(this.s.slice(this.pos)):t.exec(this.s.slice(this.pos).join("")),e?(this.pos+=e[0].length,e[0]):null}isWhiteSpace(){return/[ \f\n\r\t\v\xA0\u2028\u2029]/.test(this.s[this.pos])}makeToken(){if(this.end())return null;if(this.isWhiteSpace())return this.get(),new pe("space");let t=null;if("\\"===this.peek()){if(this.get(),!this.end()){let e=this.scan(/^[a-zA-Z*]+/);"bgroup"===e?t=new pe("{"):"egroup"===e?t=new pe("}"):(e||(e=this.get()),t=new pe("command",e))}}else if("{"===this.peek()||"}"===this.peek())t=new pe(this.get());else if("#"===this.peek()){if(this.get(),!this.end()){let e=!1,s=this.peek();if(/[0-9?]/.test(s)&&(e=!0,this.pos+1<this.s.length)){const t=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(t)}e?(t=new pe("#"),s=this.get(),t.value=s>="0"&&s<="9"?parseInt(s):"?"):t=new pe("literal","#")}}else"$"===this.peek()?(this.get(),"$"===this.peek()?(this.get(),t=new pe("$$")):t=new pe("$")):t=new pe("literal",this.get());return t}}const fe={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML_bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},ge={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[0-9A-Z ]$/,fraktur:/^[0-9A-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^’‘]$/,monospace:/^[0-9A-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039b\u039e\u03A0\u03A3\u03A5\u03A8\u03a9]$/,"sans-serif":/^[0-9A-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039b\u039e\u03A0\u03A3\u03A5\u03A8\u03a9]$/},ye=/^[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5]$/,be=[/^[a-z]$/,/^[A-Z]$/,ye,/^[\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9]$/],xe={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function ve(t,e,s){return E(e,"fontSize").map(t=>{const e=function(t,e,s){return E(e,"fontSeries").map(t=>{const e=function(t,e,s){return E(e,"fontShape").map(t=>{const e=function(t,e,s){let i=!1;return e.map(t=>{let e="",s="";return t.latex?e=t.latex:"string"==typeof t.body?e=vt("text",t.body):t.symbol&&(e=t.symbol.replace(/\\/g,"\\backslash ")),!i||e&&!/^[a-zA-Z0-9*]/.test(e)||(s="{}"),i=/\\[a-zA-Z0-9]+\*?$/.test(e),s+e}).join("")}(0,t);return"it"===t[0].fontShape?"\\textit{"+e+"}":"sl"===t[0].fontShape?"\\textsl{"+e+"}":"sc"===t[0].fontShape?"\\textsc{"+e+"}":"n"===t[0].fontShape?"\\textup{"+e+"}":t[0].fontShape?"\\fontshape{"+t[0].fontShape+"}"+e:e}).join("")}(0,t);return"b"===t[0].fontSeries?"\\textbf{"+e+"}":"l"===t[0].fontSeries?"\\textlf{"+e+"}":"m"===t[0].fontSeries?"\\textmd{"+e+"}":t[0].fontSeries?"\\fontseries{"+t[0].fontSeries+"}"+e:e}).join("")}(0,t),s={size1:"tiny",size2:"scriptsize",size3:"footnotesize",size4:"small",size5:"normalsize",size6:"large",size7:"Large",size8:"LARGE",size9:"huge",size10:"Huge"}[t[0].fontSize]||"";return s?"\\"+s+" "+e:e}).join("")}K("math",{emitLatexRun:function(t,e,s){let i=t.variant;return t.variantStyle&&"up"!==t.variantStyle&&(i+="-"+t.variantStyle),E(e,"color").map(e=>{const a=E(e,"variant").map(e=>{let a=e[0].variant;if(e[0].variantStyle&&"up"!==e[0].variantStyle&&(a+="-"+e[0].variantStyle),e.every(e=>{const s=Mt(e.symbol,t.mode,null);if(!s||!s.variant&&!s.variantStyle)return!1;let i=e.variant;return e.variantStyle&&"up"!==e.variantStyle&&(i+="-"+e.variantStyle),i===a}))return e.map(t=>t.toLatex(s)).join("");let r="";return a&&a!==i&&(r={calligraphic:"\\mathcal{",fraktur:"\\mathfrak{","double-struck":"\\mathbb{",script:"\\mathscr{",monospace:"\\mathtt{","sans-serif":"\\mathsf{",normal:"\\mathrm{","normal-italic":"\\mathit{","normal-bold":"\\mathbf{","normal-bolditalic":"\\mathbfit{",ams:"","ams-italic":"\\mathit{","ams-bold":"\\mathbf{","ams-bolditalic":"\\mathbfit{",main:"","main-italic":"\\mathit{","main-bold":"\\mathbf{","main-bolditalic":"\\mathbfit{"}[a]),r+e.map(t=>t.toLatex(s)).join("")+(r?"}":"")}).join("");return!e[0].color||parent&&parent.color===e[0].color?a:"\\textcolor{"+Bt(e[0].color)+"}{"+a+"}"})},applyStyle:function(t,e){const s="auto"!==e.letterShapeStyle&&e.letterShapeStyle?e.letterShapeStyle:"tex";let i=e.variant||"normal",a=e.variantStyle||"";"normal"===i&&!a&&/\u00a3|\u0131|\u0237/.test(t.body)&&(i="main",a="italic"),a||1!==t.body.length||be.forEach((e,i)=>{e.test(t.body)&&"it"===xe[s][i]&&(a="italic")}),"up"===a&&(a="");const r=a?i+"-"+a:i,[n,o]=fe[r];return ge[i]&&!ge[i].test(t.body)?(t.body=bt(t.body,i,a),t.variant="",t.variantStyle="",null):(ye.test(t.body)&&(t.classes+=" lcGreek"),o&&(t.classes+=" "+o),n)}});const ke={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};function we(t){let e=!1;const s=t.map(t=>"literal"===t.type?t.value:"{"===t.type?"{":"}"===t.type?"}":"command"===t.type?"\\"+t.value:"placeholder"===t.type?"#?":"#"===t.type?(e=!0,"#"+t.value):"space"===t.type?" ":"$"===t.type?"$":"$$"===t.type?"$$":"").join("");return e?"":s}K("text",{emitLatexRun:function(t,e,s){const i=function(t,e,s){return E(e,"color").map(e=>{const s=function(t,e,s){return function(t,e,s){return E(e,"fontFamily").map(t=>{const e=ve(0,t),s={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[t[0].fontFamily]||"";return s?"\\"+s+"{"+e+"}":t[0].fontFamily?"\\fontfamily{"+t[0].fontFamily+"}"+e:e}).join("")}(0,e)}(0,e);return!e[0].color||"none"===e[0].color||t&&t.color===e[0].color?s:"\\textcolor{"+Bt(e[0].color)+"}{"+s+"}"}).join("")}(t,e);return e.every(t=>t.fontSeries||t.fontShape||t.fontFamily)&&e[0].mode===t.mode?i:`\\text{${i}}`},applyStyle:function(t,e){const s=e.fontFamily;if(ke[s]?t.classes+=" "+ke[s]:s&&t.setStyle("font-family",s),e.fontShape&&(t.classes+=" "+({it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[e.fontShape]||"")),e.fontSeries){const s=e.fontSeries.match(/(.?[lbm])?(.?[cx])?/);s&&(t.classes+=" "+({ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[s[1]||""]||""),t.classes+=" "+({uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[s[2]||""]||""))}return"Main-Regular"},parse:(t,e)=>function(t,e){let s,i=[];for(;t.length>0;){const a=t.shift();if("space"===a.type)s=new ie("text",""," ",e.style),s.symbol=" ",i.push(s);else if("placeholder"===a.type)s=new ie("text","placeholder",a.value),s.captureSelection=!0,i.push(s);else if("command"===a.type){let s;t.unshift(a),[s,t]=e.parse("text",t,e),i=[...i,...s]}else if("literal"===a.type){const t=Mt(a.value,"text",e.macros);s=new ie("text",t?t.type:"",t?t.value:a.value,e.style),s.symbol=a.value,s.latex=ft("text",a.value),i.push(s)}else if("$"===a.type||"$$"===a.type){const s=t.slice(0,t.findIndex(t=>t.type===a.type));t=t.slice(s.length+1);const[r]=e.parse("math",s,e);i=[...i,...r]}else"{"===a.type||a.type}return[i,t]}(t,e)[0]});class Se{constructor(t,e,s){this.tokens=t,this.index=0,this.args=e,this.macros=s,this.mathList=[],this.style={},this.parseMode="math",this.tabularMode=!1,this.endCount=0}swapMathList(t){const e=this.mathList;return this.mathList=t||[],e}swapParseMode(t){const e=this.parseMode;return this.parseMode=t,e}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:null}peek(t){const e=this.index+(t||0);return e<this.tokens.length?this.tokens[e]:null}lastMathAtom(){const t=0===this.mathList.length?"none":this.mathList[this.mathList.length-1].type;if("mop"!==t&&"msubsup"!==t){const t=new ie(this.parseMode,"msubsup","​");t.attributes={"aria-hidden":!0},this.mathList.push(t)}return this.mathList[this.mathList.length-1]}hasToken(t){const e=this.index;return e<this.tokens.length&&this.tokens[e].type===t}hasLiteral(t){const e=this.index;return e<this.tokens.length&&"literal"===this.tokens[e].type&&(!t||this.tokens[e].value===t)}hasLiteralPattern(t){return this.hasToken("literal")&&t.test(this.tokens[this.index].value)}hasCommand(t){const e=this.index;return e<this.tokens.length&&"command"===this.tokens[e].type&&this.tokens[e].value===t}hasInfixCommand(){const t=this.index;if(t<this.tokens.length&&"command"===this.tokens[t].type){const e=Mt("\\"+this.tokens[t].value,this.parseMode,this.macros);return e&&e.infix}return!1}hasColumnSeparator(){const t=this.index;return!!(this.tabularMode&&t<this.tokens.length)&&"literal"===this.tokens[t].type&&"&"===this.tokens[t].value}hasRowSeparator(){const t=this.index;return!!(this.tabularMode&&t<this.tokens.length)&&"command"===this.tokens[t].type&&("\\"===this.tokens[t].value||"cr"===this.tokens[t].value)}parseColumnSeparator(){return!!this.hasColumnSeparator()&&(this.index++,!0)}placeholder(){if(this.args&&"string"==typeof this.args["?"])return Me(this.args["?"],this.parseMode,null,this.macros);const t=new ie(this.parseMode,"placeholder","?",this.style);return t.captureSelection=!0,[t]}hasImplicitCommand(t){if(this.index<this.tokens.length){const e=this.tokens[this.index];if("command"===e.type)return t.includes(e.value)}return!1}parseRowSeparator(){return!!this.hasRowSeparator()&&(this.index++,!0)}parseToken(t){return!!this.hasToken(t)&&(this.index++,!0)}skipWhitespace(){let t=!1;for(;this.hasToken("space");)this.index++,t=!0;return t}skipUntilToken(t){for(;!this.end()&&!this.parseToken(t);)this.get()}parseArguments(t){if(!t||!t.params)return["",[],""];let e="";const s=[];let i=t.infix?2:0;for(;i<t.params.length;){const a=t.params[i];a.optional?s.push(this.scanOptionalArg(a.type)):a.type.endsWith("*")?e=a.type.slice(0,-1):s.push(this.scanArg(a.type)||this.placeholder()),i+=1}return[e,s]}parseCommand(t){return!!this.hasCommand(t)&&(this.index++,!0)}parseLiteral(t){return!!this.hasLiteral(t)&&(this.index++,!0)}parseFiller(){let t=!1,e=!1;do{const s=this.skipWhitespace(),i=this.parseCommand("relax");t=t||s||i,e=!s&&!i}while(!e);return t}parseKeyword(t){const e=this.index;let s=this.end(),i="";for(;!s;){const e=this.get();"literal"===e.type&&(i+=e.value),s=this.end()||"literal"!==e.type||i.length>=t.length}const a=t.toUpperCase()===i.toUpperCase();return a||(this.index=e),a}scanString(){let t="",e=this.end();for(;!e;){if(this.hasLiteral("]"))e=!0;else if(this.hasToken("literal"))t+=this.get().value;else if(this.skipWhitespace())t+=" ";else if(this.hasToken("command")){const e=this.get();"space"===e.value?t+=" ":t+=e.value}else e=!0;e=e||this.end()}return t}scanLiteralArg(){let t="";if(this.hasToken("{")){this.get();let e=1;for(;e>0&&!this.end();){const s=this.get();"space"===s.type?t+=" ":"#"===s.type?t+="#"+s.value:"command"===s.type?t+="\\"+s.value:"}"===s.type?(e-=1,e>0&&(t+="}")):"{"===s.type?(e+=1,t+="{"):t+=s.value}}return t}scanColor(){return Et(this.scanString())}scanNumber(t){const e=this.parseLiteral("-");e||this.parseLiteral("+"),this.skipWhitespace(),t=!!t;let s=10,i=/[0-9]/;this.parseLiteral("'")?(s=8,i=/[0-7]/,t=!0):(this.parseLiteral('"')||this.parseLiteral("x"))&&(s=16,i=/[0-9A-F]/,t=!0);let a="";for(;this.hasLiteralPattern(i);)a+=this.get().value;if(!t&&(this.parseLiteral(".")||this.parseLiteral(",")))for(a+=".";this.hasLiteralPattern(i);)a+=this.get().value;const r=t?parseInt(a,s):parseFloat(a);return e?-r:r}scanDimen(){const t=this.scanNumber(!1);let e;return this.skipWhitespace(),e=this.parseKeyword("pt")?b(t,"pt"):this.parseKeyword("mm")?b(t,"mm"):this.parseKeyword("cm")?b(t,"cm"):this.parseKeyword("ex")?b(t,"ex"):this.parseKeyword("px")?b(t,"px"):this.parseKeyword("em")?b(t,"em"):this.parseKeyword("bp")?b(t,"bp"):this.parseKeyword("dd")?b(t,"dd"):this.parseKeyword("pc")?b(t,"pc"):this.parseKeyword("in")?b(t,"in"):this.parseKeyword("mu")?b(t,"mu"):b(t,"pt"),e}scanSkip(){const t=this.scanDimen();return this.skipWhitespace(),this.parseKeyword("plus")&&this.scanDimen(),this.skipWhitespace(),this.parseKeyword("minus")&&this.scanDimen(),t}scanColspec(){this.skipWhitespace();const t=[];for(;!this.end()&&!this.hasToken("}")&&!this.hasLiteral("]");)if(this.hasLiteral()){const e=this.get().value;if("lcr".includes(e))t.push({align:e});else if("|"===e)t.push({rule:!0});else if("@"===e){if(this.parseToken("{")){const e=this.swapParseMode("math");t.push({gap:this.scanImplicitGroup(t=>"}"===t.type)}),this.swapParseMode(e)}this.parseToken("}")}}return t}scanModeSet(){let t;if(this.parseCommand("(")&&(t=")"),!t&&this.parseCommand("[")&&(t="]"),!t)return null;const e=this.swapParseMode("math"),s=new ie("math","group");return s.mathstyle=")"===t?"textstyle":"displaystyle",s.body=this.scanImplicitGroup(e=>"command"===e.type&&e.value===t),this.parseCommand(t),this.swapParseMode(e),s.body&&0!==s.body.length?s:null}scanModeShift(){if(!this.hasToken("$")&&!this.hasToken("$$"))return null;const t=this.get().type,e=new ie("math","group");e.mathstyle="$"===t?"textstyle":"displaystyle",e.latexOpen="textstyle"===e.mathstyle?"$":"$$",e.latexClose=e.latexOpen;const s=this.swapParseMode("math");return e.body=this.scanImplicitGroup(e=>e.type===t),this.parseToken(t),this.swapParseMode(s),e.body&&0!==e.body.length?e:null}scanEnvironment(){if(!this.parseCommand("begin"))return null;const t=this.scanArg("string"),e=St(t),s=[];if(e&&e.params)for(const t of e.params)if(t.optional){const e=this.scanOptionalArg(t.type);s.push(e)}else s.push(this.scanArg(t.type));const i=this.parseMode,a=this.tabularMode,r=this.swapMathList([]);this.tabularMode=e.tabular;const n=[],o=[];let l=[],c=!1;do{if(c=this.end(),!c&&this.parseCommand("end")&&(c=this.scanArg("string")===t),!c)if(this.parseColumnSeparator())l.push(this.swapMathList([]));else if(this.parseRowSeparator()){l.push(this.swapMathList([]));let t=0;this.skipWhitespace(),this.parseLiteral("[")&&(t=this.scanDimen(),this.skipWhitespace(),this.parseLiteral("]")),o.push(t||0),n.push(l),l=[]}else this.mathList=this.mathList.concat(this.scanImplicitGroup(t=>"}"===t.type||"literal"===t.type&&"&"===t.value||"command"===t.type&&/^(end|cr|\\)$/.test(t.value)))}while(!c);l.push(this.swapMathList([])),l.length>0&&n.push(l);const h=this.swapMathList(r);if(this.parseMode=i,this.tabularMode=a,!e.tabular&&0===h.length)return null;if(e.tabular&&0===n.length)return null;const m=new ie(this.parseMode,"array",h,e.parser?e.parser(t,s,n):{});return m.array=n,m.rowGaps=o,m.env={...e},m.env.name=t,m}scanImplicitGroup(t){const e=this.style;t||(t=t=>"}"===t.type);let s=null,i=null,a=[],r=null;const n=this.swapMathList([]);for(;!this.end()&&!t(this.peek());)if(this.hasImplicitCommand(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"])){this.parseMode="math";const t=new ie("math","mathstyle");t.mathstyle=this.get().value,this.mathList.push(t)}else this.hasInfixCommand()&&!s?(s=this.get(),i=Mt("\\"+s.value,"math",this.macros),i&&([,a]=this.parseArguments(i)),r=this.swapMathList([])):this.parseAtom();let o;return s?(a.unshift(this.swapMathList(n)),a.unshift(r),o=[new ie(this.parseMode,i.type,i.value||s.value,i.parse?i.parse("\\"+s.value,a):null)],o[0].symbol="\\"+s.value):o=this.swapMathList(n),this.style=e,o}scanGroup(){if(!this.parseToken("{"))return null;const t=new ie(this.parseMode,"group");return t.body=this.scanImplicitGroup(t=>"}"===t.type),this.parseToken("}"),t.latexOpen="{",t.latexClose="}",t}scanSmartFence(){if(this.skipWhitespace(),!this.parseLiteral("("))return null;const t=new ie(this.parseMode,"leftright");t.leftDelim="(",t.inner=!1;const e=this.swapMathList([]);let s=1;for(;!this.end()&&0!==s;)this.hasLiteral("(")&&(s+=1),this.hasLiteral(")")&&(s-=1),0!==s&&this.parseAtom();return 0===s&&this.parseLiteral(")"),t.rightDelim=0===s?")":"?",t.body=this.swapMathList(e),t}scanDelim(){this.skipWhitespace();const t=this.get();if(!t)return null;let e=".";"command"===t.type?e="\\"+t.value:"literal"===t.type&&(e=t.value);const s=Mt(e,"math",this.macros);return s&&("mopen"===s.type||"mclose"===s.type||/^(\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(e))?e:null}scanLeftRight(){if(this.parseCommand("right")||this.parseCommand("mright"))return null;const t=this.style;let e="right";if(!this.parseCommand("left")){if(!this.parseCommand("mleft"))return null;e="mright"}const s=this.scanDelim();if(!s)return null;const i=this.swapMathList([]);for(;!this.end()&&!this.parseCommand(e);)this.parseAtom();this.style=t;const a=this.scanDelim(),r=new ie(this.parseMode,"leftright");return r.leftDelim=s,r.rightDelim=a,r.inner="right"===e,r.body=this.swapMathList(i),r}parseSupSub(){if("math"!==this.parseMode)return!1;let t=!1;for(;this.hasLiteral("^")||this.hasLiteral("_")||this.hasLiteral("'");){let e;if(this.hasLiteral("^")?e="superscript":this.hasLiteral("_")&&(e="subscript"),this.parseLiteral("^")||this.parseLiteral("_")){const s=this.scanArg();if(s){const i=this.lastMathAtom();i[e]=i[e]||[],i[e]=i[e].concat(s),t=!0}}else if(this.parseLiteral("'")){const e=this.lastMathAtom();e.superscript=e.superscript||[],e.superscript.push(new ie(e.parseMode,"mord","′")),t=!0}}return t}parseLimits(){if(this.parseCommand("limits")){const t=this.lastMathAtom();return t.limits="limits",t.explicitLimits=!0,!0}if(this.parseCommand("nolimits")){const t=this.lastMathAtom();return t.limits="nolimits",t.explicitLimits=!0,!0}return!1}scanOptionalArg(t){if(t=t&&"auto"!==t?t:this.parseMode,this.skipWhitespace(),!this.parseLiteral("["))return null;const e=this.parseMode;this.parseMode=t;const s=this.swapMathList();let i;for(;!this.end()&&!this.parseLiteral("]");)if("string"===t)i=this.scanString();else if("number"===t)i=this.scanNumber();else if("dimen"===t)i=this.scanDimen();else if("skip"===t)i=this.scanSkip();else if("colspec"===t)i=this.scanColspec();else if("color"===t)i=this.scanColor()||"#ffffff";else if("bbox"===t){const t=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const e of t){const t=Et(e);if(t)i=i||{},i.backgroundcolor=t;else{const t=e.match(/^\s*([0-9.]+)\s*([a-z][a-z])/);if(t)i=i||{},i.padding=b(t[1],t[2]);else{const t=e.match(/^\s*border\s*:\s*(.*)/);t&&(i=i||{},i.border=t[1])}}}}else this.mathList=this.mathList.concat(this.scanImplicitGroup(t=>"literal"===t.type&&"]"===t.value));this.parseMode=e;const a=this.swapMathList(s);return i||a}scanArg(t){let e;if(t=t&&"auto"!==t?t:this.parseMode,this.parseFiller(),!this.parseToken("{")){if("delim"===t)return this.scanDelim()||".";if(/^(math|text)$/.test(t)){const e=this.parseMode;this.parseMode=t;const s=this.scanToken();return this.parseMode=e,s}}if(this.hasToken("#")){const t=this.get();return this.skipUntilToken("}"),"?"===t.value?this.placeholder():this.args?!this.args[t.value]&&this.args["?"]?this.placeholder():"string"==typeof this.args[t.value]?Me(this.args[t.value],this.parseMode,null,this.macros):this.args[t.value]||null:null}const s=this.parseMode;this.parseMode=t;const i=this.swapMathList([]);if("string"===t)e=this.scanString(),this.skipUntilToken("}");else if("number"===t)e=this.scanNumber(),this.skipUntilToken("}");else if("dimen"===t)e=this.scanDimen(),this.skipUntilToken("}");else if("skip"===t)e=this.scanSkip(),this.skipUntilToken("}");else if("colspec"===t)e=this.scanColspec(),this.skipUntilToken("}");else if("color"===t)e=this.scanColor()||"#ffffff",this.skipUntilToken("}");else if("delim"===t)e=this.scanDelim()||".",this.skipUntilToken("}");else{const s=this.index;let i=1;do{const t=this.get();"}"===t.type&&(i-=1),"{"===t.type&&(i+=1)}while(i>0&&!this.end());if(e=function(t,e,s){return B[t]&&B[t].parse?B[t].parse(e,s):null}(t,this.tokens.slice(s,this.index-1),{args:this.args,macros:this.macros,smartFence:this.smartFence,style:this.style,parse:(t,s,i)=>{const a=new Se(s,i.args,i.macros);return a.parseMode=t,a.style=i.style,e=a.scanImplicitGroup(),[e,s.slice(a.index)]}}),!e){this.index=s;do{this.mathList=this.mathList.concat(this.scanImplicitGroup())}while(!this.parseToken("}")&&!this.end())}}this.parseMode=s;const a=this.swapMathList(i);return e||a}scanToken(){const t=this.get();if(!t)return null;let e=null;if("space"===t.type)"text"===this.parseMode&&(e=new ie("text",""," ",this.style),e.symbol=" ");else if("placeholder"===t.type)e=new ie(this.parseMode,"placeholder",t.value),e.captureSelection=!0;else if("command"===t.type){if("placeholder"===t.value)e=new ie(this.parseMode,"placeholder",this.scanArg("string"),this.style),e.captureSelection=!0;else if("char"===t.value){const t=this.index;let s=Math.floor(this.scanNumber(!0));(!isFinite(s)||s<0||s>1114111)&&(s=10067),e=new ie(this.parseMode,"math"===this.parseMode?"mord":"",String.fromCodePoint(s)),e.symbol="\\char",e.latex="\\char"+we(this.tokens.slice(t))}else if("hskip"===t.value||"kern"===t.value){const s=this.scanSkip();isFinite(s)&&(e=new ie(this.parseMode,"spacing",null,this.style),e.width=s),e.symbol="\\"+t.value,e.latex="\\"+t.value}else if(e=this.scanMacro(t.value),!e){const s=Mt("\\"+t.value,this.parseMode),i=this.index,[a,r]=this.parseArguments(s);if(s&&!s.infix){if(s.parse){const i=s.parse("\\"+t.value,r);if(i.type)e=new ie(this.parseMode,s.type,a?this.scanArg(a):null,{...this.style,...i});else{const t=this.parseMode;if(i.mode&&(this.parseMode=i.mode,delete i.mode),a){const t=this.style;this.style={...this.style,...i},e=this.scanArg(a),this.style=t}else this.style={...this.style,...i};this.parseMode=t}}else{const i={...this.style,variant:s.variant||this.style.variant,variantStyle:s.variantStyle||this.style.variantStyle};e=new ie(this.parseMode,s.type||"mop",s.value||t.value,i),s.skipBoundary&&(e.skipBoundary=!0)}if(e&&!/^(llap|rlap|class|cssId)$/.test(t.value)){e.symbol="\\"+t.value;const s=we(this.tokens.slice(i,this.index));if(s&&(e.latex=e.symbol+s),e.isFunction&&this.smartFence){const t=this.scanSmartFence();t&&(e=[e,t])}}}s||(e=new ie("text","error","\\"+t.value),e.symbol="\\"+t.value,e.latex="\\"+t.value)}}else if("literal"===t.type){const s=Mt(t.value,this.parseMode,this.macros);if(s){const i={...this.style};e=new ie(this.parseMode,s.type,s.value||t.value,i),s.isFunction&&(e.isFunction=!0)}else e=new ie(this.parseMode,"math"===this.parseMode?"mord":"",t.value,this.style);if(e.symbol=t.value,e.latex=ft(this.parseMode,t.value),s&&s.isFunction&&this.smartFence){const t=this.scanSmartFence();t&&(e=[e,t])}}else"#"===t.type&&("?"===t.value?e=this.placeholder():this.args&&(e=this.args[t.value]||this.placeholder()));return e&&!Array.isArray(e)?[e]:e}scanMacro(t){if(!this.macros||!this.macros[t])return null;const e=this.index,s={};let i,a=0;"string"==typeof this.macros[t]?(i=this.macros[t],/(^|[^\\])#1/.test(i)&&(a=1),/(^|[^\\])#2/.test(i)&&(a=2),/(^|[^\\])#3/.test(i)&&(a=3),/(^|[^\\])#4/.test(i)&&(a=4),/(^|[^\\])#5/.test(i)&&(a=5),/(^|[^\\])#6/.test(i)&&(a=6),/(^|[^\\])#7/.test(i)&&(a=7),/(^|[^\\])#8/.test(i)&&(a=8),/(^|[^\\])#9/.test(i)&&(a=9)):(i=this.macros[t].def,a=this.macros[t].args||0);for(let t=1;t<=a;t++)s[t]=this.scanLiteralArg();this.args&&"string"==typeof this.args["?"]&&(s["?"]=this.args["?"]);const r=new ie(this.parseMode,"group",Me(i,this.parseMode,s,this.macros));return r.captureSelection=!0,r.symbol="\\"+t,r.latex="\\"+t+we(this.tokens.slice(e)),r}parseAtom(){let t=this.scanEnvironment()||this.scanModeShift()||this.scanModeSet()||this.scanGroup()||this.scanLeftRight();return!(t||!this.parseSupSub()&&!this.parseLimits())||(t||(t=this.scanToken()),Array.isArray(t)?this.mathList=this.mathList.concat(t):t&&this.mathList.push(t),null!==t)}}function Me(t,e,s,i,a){let r=[];const n=new Se(function(t){const e=[],s=t.toString().split(/\r?\n/);let i="",a="";for(const t of s){i+=a,a=" ";const e=t.match(/((?:\\%)|[^%])*/);e&&(i+=e[0])}const r=new ue(i);for(;!r.end();){const t=r.makeToken();t&&e.push(t)}return e}(t),s,i);for(n.parseMode=e||"math",a&&(n.smartFence=!0);!n.end();)r=r.concat(n.scanImplicitGroup());return r}function Ae(t,e){let s="";for(const e of t)s+=e.relation+":"+e.offset+"/";return e&&(s+="#"+e),s}function _e(t){const e={path:[],extent:0},s=t.split("#");s.length>1&&(e.extent=parseInt(s[1]));const i=s[0].split("/");for(const t of i){const s=t.match(/([^:]*):(.*)/);s&&e.path.push({relation:s[1],offset:parseInt(s[2])})}return e}var Ce={pathFromString:_e,pathToString:Ae,pathDistance:function(t,e){let s=0,i=-1,a=!1;for(;!a;)i+=1,a=i>=t.length||i>=e.length,a=a||!(t[i].relation===e[i].relation&&t[i].offset===e[i].offset);return s=i===t.length&&i===e.length?0:i+1===t.length&&i+1===e.length&&t[i].relation===e[i].relation?1:2,s},pathCommonAncestor:function(t,e){const s=[],i=Math.min(t.length-1,e.length-1);let a=0;for(;a<=i&&t[a].relation===e[a].relation&&t[a].offset===e[a].offset;)s.push(t[a]),a+=1;return s},clone:function(t){return _e(Ae(t)).path}};const Le={Left:"moveToPreviousChar",Right:"moveToNextChar",Up:"moveUp",Down:"moveDown","Shift-Left":"extendToPreviousChar","Shift-Right":"extendToNextChar","Shift-Up":"extendUp","Shift-Down":"extendDown",Backspace:"deletePreviousChar","Alt-Del":"deletePreviousChar",Del:"deleteNextChar","Alt-Backspace":"deleteNextChar","Alt-Left":"moveToPreviousWord","Alt-Right":"moveToNextWord","Alt-Shift-Left":"extendToPreviousWord","Alt-Shift-Right":"extendToNextWord","Ctrl-Left":"moveToGroupStart","Ctrl-Right":"moveToGroupEnd","Ctrl-Shift-Left":"extendToGroupStart","Ctrl-Shift-Right":"extendToGroupEnd","math:Spacebar":"moveAfterParent","math:Shift-Spacebar":"moveBeforeParent",Home:"moveToMathFieldStart","mac:Meta-Left":"moveToMathFieldStart","Shift-Home":"extendToMathFieldStart","mac:Meta-Shift-Left":"extendToMathFieldStart",End:"moveToMathFieldEnd","mac:Meta-Right":"moveToMathFieldEnd","Shift-End":"extendToMathFieldEnd","mac:Meta-Shift-Right":"extendToMathFieldEnd",PageUp:"moveToGroupStart",PageDown:"moveToGroupEnd","math:Tab":"moveToNextPlaceholder","math:F8":"moveToNextPlaceholder","math:Shift-Tab":"moveToPreviousPlaceholder","math:Shift-F8":"moveToPreviousPlaceholder","text:Tab":"moveToNextPlaceholder","text:F8":"moveToNextPlaceholder","text:Shift-Tab":"moveToPreviousPlaceholder","text:Shift-F8":"moveToPreviousPlaceholder","math:Esc":["switch-mode","command"],"math:Backslash":["switch-mode","command"],"math:IntlBackslash":["switch-mode","command"],"math:Alt-Equal":["apply-style",{mode:"text"}],"text:Alt-Equal":["apply-style",{mode:"math"}],"command:Esc":["complete",{discard:!0}],"command:Tab":["complete",{acceptSuggestion:!0}],"command:Return":"complete","command:Enter":"complete","command:Shift-Esc":["complete",{discard:!0}],"command:Down":"nextSuggestion","ios:command:Tab":"nextSuggestion","command:Up":"previousSuggestion","!mac:Ctrl-KeyA":"selectAll","mac:Meta-KeyA":"selectAll",Cut:"cut",Copy:"copy",Paste:"paste",Clear:"delete","!mac:Ctrl-KeyZ":"undo","mac:Meta-KeyZ":"undo",Undo:"undo","!mac:Ctrl-KeyY":"redo","mac:Meta-Shift-KeyY":"redo","!mac:Ctrl-Shift-KeyZ":"redo","mac:Meta-Shift-KeyZ":"redo",Redo:"redo",EraseEof:"deleteToGroupEnd","mac:Ctrl-KeyB":"moveToPreviousChar","mac:Ctrl-KeyF":"moveToNextChar","mac:Ctrl-KeyP":"moveUp","mac:Ctrl-KeyN":"moveDown","mac:Ctrl-KeyA":"moveToMathFieldStart","mac:Ctrl-KeyE":"moveToMathFieldEnd","mac:Ctrl-Shift-KeyB":"extendToPreviousChar","mac:Ctrl-Shift-KeyF":"extendToNextChar","mac:Ctrl-Shift-KeyP":"extendUp","mac:Ctrl-Shift-KeyN":"extendDown","mac:Ctrl-Shift-KeyA":"extendToMathFieldStart","mac:Ctrl-Shift-KeyE":"extendToMathFieldEnd","mac:Ctrl-Alt-KeyB":"moveToPreviousWord","mac:Ctrl-Alt-KeyF":"moveToNextWord","mac:Ctrl-Shift-Alt-KeyB":"extendToPreviousWord","mac:Ctrl-Shift-Alt-KeyF":"extendToNextWord","mac:Ctrl-KeyH":"deletePreviousChar","mac:Ctrl-KeyD":"deleteNextChar","mac:Ctrl-KeyL":"scrollIntoView","mac:Ctrl-KeyT":"transpose","math:Shift-Quote":["switch-mode","text","","“"],"text:Shift-Quote":["switch-mode","math","”",""],"math:Ctrl-Digit2":["insert","\\sqrt{#0}"],"math:Ctrl-Digit5":"moveToOpposite","math:Ctrl-Digit6":"moveToSuperscript","math:Ctrl-Minus":"moveToSubscript","math:Alt-BracketLeft":["insert","\\left\\lbrack #0 \\right\\rbrack"],"math:Alt-Shift-BracketLeft":["insert","\\left\\lbrace #0 \\right\\rbrace"],"math:Return":"addRowAfter","math:Enter":"addRowAfter","math:Ctrl-Comma":"addColumnAfter","math:Alt-KeyQ":["insert","\\theta"],"math:Alt-KeyP":["insert","\\pi"],"math:Alt-KeyV":["insert","\\sqrt{#0}"],"math:Alt-KeyW":["insert","\\sum_{i=#?}^{#?}"],"math:Alt-KeyB":["insert","\\int_{#?}^{#?}"],"math:Alt-KeyU":["insert","\\cup"],"math:Alt-KeyN":["insert","\\cap"],"math:Alt-KeyO":["insert","\\emptyset"],"math:Alt-KeyD":["insert","\\differentialD"],"math:Alt-Shift-KeyO":["insert","\\varnothing"],"math:Alt-Shift-KeyD":["insert","\\partial"],"math:Alt-Shift-KeyP":["insert","\\prod_{i=#?}^{#?}"],"math:Alt-Shift-KeyU":["insert","\\bigcup"],"math:Alt-Shift-KeyN":["insert","\\bigcap"],"math:Alt-Shift-KeyA":["insert","\\forall"],"math:Alt-Shift-KeyE":["insert","\\exists"],"math:Alt-Digit5":["insert","\\infty"],"math:Alt-Digit6":["insert","\\wedge"],"math:Alt-Shift-Digit6":["insert","\\vee"],"math:Alt-Digit9":["insert","("],"math:Alt-Digit0":["insert",")"],"math:Alt-Shift-Backslash":["insert","|"],"math:Alt-Backslash":["insert","\\backslash"],"math:Slash":["insert","\\frac{#@}{#?}"],"math:Alt-Slash":["insert","\\frac{#?}{#@}"],"math:NumpadDivide":["insert","\\frac{#@}{#?}"],"math:Alt-NumpadDivide":["insert","\\frac{#?}{#@}"],"math:Shift-Backquote":["insert","\\~"],"math:Alt-Shift-Slash":["insert","\\/"],"Alt-Shift-KeyK":"toggleKeystrokeCaption","Alt-Space":"toggleVirtualKeyboard","mac:Ctrl-Meta-Up":["speak","parent",{withHighlighting:!1}],"!mac:Ctrl-Alt-Up":["speak","parent",{withHighlighting:!1}],"mac:Ctrl-Meta-Down":["speak","all",{withHighlighting:!1}],"!mac:Ctrl-Alt-Down":["speak","all",{withHighlighting:!1}],"mac:Ctrl-Meta-Left":["speak","left",{withHighlighting:!1}],"!mac:Ctrl-Alt-Left":["speak","left",{withHighlighting:!1}],"mac:Ctrl-Meta-Right":["speak","right",{withHighlighting:!1}],"!mac:Ctrl-Alt-Right":["speak","right",{withHighlighting:!1}],"!mac:Ctrl-Alt-Period":["speak","selection",{withHighlighting:!1}],"mac:Ctrl-Meta-Period":["speak","selection",{withHighlighting:!1}],"mac:Ctrl-Meta-Shift-Up":["speak","parent",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Up":["speak","parent",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Down":["speak","all",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Down":["speak","all",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Left":["speak","left",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Left":["speak","left",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Right":["speak","right",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Right":["speak","right",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Period":["speak","selection",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Period":["speak","selection",{withHighlighting:!0}]},ze={"\\theta":"Alt-KeyQ","\\sqrt":["Alt-KeyV","Ctrl-Digit2"],"\\pi":"Alt-KeyP","\\prod":"Alt-Shift-KeyP","\\sum":"Alt-KeyW","\\int":"Alt-KeyB","\\cup":"Alt-KeyU","\\cap":"Alt-KeyN","\\bigcup":"Alt-Shift-KeyU","\\bigcap":"Alt-Shift-KeyN","\\forall":"Alt-Shift-KeyA","\\exists":"Alt-Shift-KeyE","\\infty":"Alt-Digit5","\\wedge":"Alt-Digit5","\\vee":"Alt-Shift-Digit6","\\differentialD":"Alt-keyD","\\partial":"Alt-Shift-KeyD","\\frac":"Slash","\\emptyset":"Alt-KeyO","\\varnothing":"Alt-Shift-KeyO","\\~":"~"},Te={"''":{mode:"math",value:"^{\\doubleprime}"},alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:{mode:"math",value:"\\pi"},"pi ":{mode:"text",value:"\\pi "},Pi:{mode:"math",value:"\\Pi"},theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:{mode:"math",value:"\\nabla"},grad:{mode:"math",value:"\\nabla"},del:{mode:"math",value:"\\partial"},"∞":"\\infty",oo:{mode:"math",after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"∑":{mode:"math",value:"\\sum"},sum:{mode:"math",value:"\\sum_{#?}^{#?}"},prod:{mode:"math",value:"\\prod_{#?}^{#?}"},sqrt:{mode:"math",value:"\\sqrt"},"∆":{mode:"math",value:"\\differentialD"},"∂":{mode:"math",value:"\\differentialD"},sin:{mode:"math",value:"\\sin"},cos:{mode:"math",value:"\\cos"},tan:{mode:"math",value:"\\tan"},tanh:{mode:"math",value:"\\tanh"},log:{mode:"math",value:"\\log"},ln:{mode:"math",value:"\\ln"},exp:{mode:"math",value:"\\exp"},lim:{mode:"math",value:"\\lim_{#?}"},dx:"\\differentialD x",dy:"\\differentialD y",dt:"\\differentialD t",AA:{mode:"math",value:"\\forall"},EE:{mode:"math",value:"\\exists"},"!EE":{mode:"math",value:"\\nexists"},"&&":{mode:"math",value:"\\land"},xin:{mode:"math",after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{mode:"math",after:"nothing+letter+closefence",value:"\\in"},"!in":{mode:"math",value:"\\notin"},NN:"\\N",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",PP:"\\P",xx:"\\times","+-":"\\pm","!=":"\\ne",">=":"\\ge","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","≈":"\\approx","?=":"\\questeq","÷":"\\div","¬":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},"eta ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta "},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},"mu ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu "},nu:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},"nu ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu "},"µ":"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega","Ω":"\\omega",forall:"\\forall",exists:{mode:"math",value:"\\exists"},"!exists":{mode:"math",value:"\\nexists"},":.":{mode:"math",value:"\\therefore"},liminf:"\\operatorname*{lim~inf}_{#?}",limsup:"\\operatorname*{lim~sup}_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:{mode:"math",value:"\\mod"},max:{mode:"math",value:"\\max"},min:{mode:"math",value:"\\min"},erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:{mode:"math",value:"\\operatorname{bessel}"},mean:{mode:"math",value:"\\operatorname{mean}"},median:{mode:"math",value:"\\operatorname{median}"},fft:{mode:"math",value:"\\operatorname{fft}"},lcm:{mode:"math",value:"\\operatorname{lcm}"},gcd:{mode:"math",value:"\\operatorname{gcd}"},randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:{mode:"math",value:"\\operatorname{Re}"},Im:{mode:"math",value:"\\operatorname{Im}"},mm:{mode:"math",after:"nothing+digit",value:"\\operatorname{mm}"},cm:{mode:"math",after:"nothing+digit",value:"\\operatorname{cm}"},km:{mode:"math",after:"nothing+digit",value:"\\operatorname{km}"},kg:{mode:"math",after:"nothing+digit",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function De(t,e,s){if(!s)return s;if("string"==typeof s)return s;if("string"==typeof s.mode&&s.mode!==t)return null;if(!e)return s?s.value:void 0;let i=!1,a=!1,r=!1,n=!1,o=!1,l=!1,c=!1,h=!1,m=!1,d=!1,p=!1,u=!1,f=!1,g=!1,y=e[e.length-1],b=e.length-1;for(;y&&/msubsup|placeholder/.test(y.type);)b-=1,y=e[b];return i=!y||"first"===y.type,y&&(f="text"===y.mode,a=!f&&"mord"===y.type&&ht.test(y.body),r=!f&&"mord"===y.type&&/[0-9]+$/.test(y.body),n=!f&&y.isFunction,o="genfrac"===y.type,l="surd"===y.type,c="mbin"===y.type,h="mrel"===y.type,m="mpunct"===y.type||"minner"===y.type,d=y.array,p="mopen"===y.type,u="mclose"===y.type||"leftright"===y.type,g="space"===y.type),void 0!==s.after?/nothing/.test(s.after)&&i||/letter/.test(s.after)&&a||/digit/.test(s.after)&&r||/function/.test(s.after)&&n||/frac/.test(s.after)&&o||/surd/.test(s.after)&&l||/binop/.test(s.after)&&c||/relop/.test(s.after)&&h||/punct/.test(s.after)&&m||/array/.test(s.after)&&d||/openfence/.test(s.after)&&p||/closefence/.test(s.after)&&u||/text/.test(s.after)&&f||/space/.test(s.after)&&g?s.value:null:s.value}function $e(t){let e="other";return navigator&&navigator.platform&&navigator.userAgent&&(/^(mac)/i.test(navigator.platform)?e="mac":/^(win)/i.test(navigator.platform)?e="win":/(android)/i.test(navigator.userAgent)?e="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(e="chromeos")),e===t?t:"!"+t}function Fe(t){let e=t;return Array.isArray(e)&&e.length>0&&(e=e[0]+"("+e.slice(1).join("")+")"),e}function qe(t,e){let s="";Array.isArray(t)||(t=[t]);for(const i of t){let t;const a=i.match(/(^[^:]*):/),r=a?a[1]:"";if(r===$e("mac")||r===$e("win")||r===$e("ios")||r===$e("android")||r===$e("chromeos")||r===$e("other")){const e=i.match(/:([^:]*)$/);t=e?e[1]:i}else if(!["mac","!mac","win","!win","ios","!ios","android","!android","chromeos","!chromeos","other","!other"].includes(r)){const e=i.match(/:([^:]*)$/);t=e?e[1]:i}if(t){const i="mac"===$e("mac")||"ios"===$e("ios"),a=t.length>1?t.split("-"):[t];let r="";for(const t of a)!i&&r.length>0&&(r+='<span class="ML__shortcut-join">+</span>'),"Key"===t.substr(0,3)?r+=t.substr(3,1):"Digit"===t.substr(0,5)?r+=t.substr(5,1):r+={Meta:i?"⌘":"command",Shift:i?"⇧":"shift",Alt:i?"⌥":"alt",Ctrl:i?"⌃":"control","\n":i?"⏎":"return",Return:i?"⏎":"return",Enter:i?"⌤":"enter",Tab:i?"⇥":"tab",Esc:"esc",Backspace:i?"⌫":"backspace",Del:i?"⌦":"del",PageUp:i?"⇞":"page up",PageDown:i?"⇟":"page down",Home:i?"⤒":"home",End:i?"⤓":"end",Spacebar:"space",Semicolon:";",Period:".",Comma:",",Minus:"-",Equal:"=",Quote:"'",BracketLeft:"[",BracketRight:"]",Backslash:"\\",IntlBackslash:"\\",Backquote:"`",Slash:"/",NumpadMultiply:"* &#128290;",NumpadDivide:"/ &#128290;",NumpadSubtract:"- &#128290;",NumpadAdd:"+ &#128290;",NumpadDecimal:". &#128290;",NumpadComma:", &#128290;",Help:"help",Left:"⇠",Up:"⇡",Right:"⇢",Down:"⇣"}[t]||t;s.length>0&&(s+=e||" or "),s+=r}}return s}var Pe={KEYBOARD_SHORTCUTS:Le,INLINE_SHORTCUTS:Te,stringify:qe,startsWithString:function(t,e){const s=[];for(let i=0;i<=t.length-1;i++){const a=t.substring(i);e&&e.overrideDefaultInlineShortcuts||Object.keys(Te).forEach(t=>{t.startsWith(a)&&!s.includes(t)&&s.push(t)});const r=e&&e.inlineShortcuts?e.inlineShortcuts:null;r&&Object.keys(r).forEach(t=>{t.startsWith(a)&&s.push(t)})}return s},forString:function(t,e,s,i){let a="";i&&i.overrideDefaultInlineShortcuts||(a=De(t,e,Te[s]));const r=i&&i.inlineShortcuts?i.inlineShortcuts:null;let n;return r&&(n=De(t,e,r[s])),n||a},selectorForKeystroke:function(t,e){for(const s of[$e("mac")+":"+t+":"+e,$e("win")+":"+t+":"+e,$e("ios")+":"+t+":"+e,$e("android")+":"+t+":"+e,$e("chromeos")+":"+t+":"+e,$e("other")+":"+t+":"+e,$e("mac")+":"+e,$e("win")+":"+e,$e("ios")+":"+e,$e("android")+":"+e,$e("chromeos")+":"+e,t+":"+e,e])if(Le[s])return Le[s];return""},forCommand:function(t){let e=[];if("string"==typeof t){const s=ze[t];Array.isArray(s)?e=s.slice():s&&e.push(s)}t=Fe(t);const s=new RegExp("^"+t.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");return Object.keys(Le).forEach(t=>{if(s.test(Fe(Le[t]))){const s=t.match(/:([^:]*)$/);s&&e.push(s[1])}}),qe(e)}};function Ee(t){return 0===t.length||1===t.length&&"first"===t[0].type}function Be(t,e){this.root=ae(),this.path=[{relation:"body",offset:0}],this.extent=0,this.config=t?{...t}:{},this.target=e,this.suppressChangeNotifications=!1}function Ke(t){const e=Object.assign(new Be(t.config,t.target),t);return e.path=Ce.clone(t.path),e}function Oe(t,e){let s=0;for(let i=0;i<e.row;i++)for(let e=0;e<t[i].length;e++)s+=1;return s+=e.col,s}function Ie(t,e){if("string"==typeof e){const t=e.match(/cell([0-9]*)$/);t&&(e=parseInt(t[1]))}const s={row:0,col:0};for(;e>0;)s.col+=1,(!t[s.row]||s.col>=t[s.row].length)&&(s.col=0,s.row+=1),e-=1;return s}function Re(t,e){let s;return"object"!=typeof e&&(e=Ie(t,e)),Array.isArray(t[e.row])&&(s=t[e.row][e.col]||null),!s||0!==s.length&&"first"===s[0].type||s.unshift(Je()),s}function Ne(t){let e=0,s=0,i=1;for(const e of t)s+=1,e.length>i&&(i=e.length);return e=s*i,e}function He(t,e,s){if(!t)return[];e||(e=",");let i,a=[];for(let r of t)r&&r.length>0&&"first"===r[0].type&&(r=r.slice(1)),r&&r.length>0&&(i?a.push(i):i=new ie("math","mpunct",e,s),a=a.concat(r));return a}function We(t,e,s){const i={...e};if(i.row+=s,i.row<0){if(i.col+=s,i.row=t.length-1,i.col<0)return null;for(;i.row>=0&&!Re(t,i);)i.row-=1;if(i.row<0)return null}else if(i.row>=t.length){for(i.col+=s,i.row=0;i.row<t.length&&!Re(t,i);)i.row+=1;if(i.row>t.length-1)return null}return i}function Ve(t){return!!t&&("mord"===t.type&&/[0-9.]/.test(t.body)||"mpunct"===t.type&&","===t.body)}function je(t,e){if(!t)return!1;if(Array.isArray(t)){for(const s of t)if(je(s,e))return!0}else{if(t===e)return!0;if(["body","numer","denom","index","subscript","superscript","underscript","overscript"].some((function(s){return s===e||je(t[s],e)})))return!0;if(t.array)for(let s=Ne(t.array);s>=0;s--)if(je(Re(t.array,s),e))return!0}return!1}function Ue(t){if(t)return 1===t.length&&"leftright"===t[0].type&&"("===t[0].leftDelim&&(t=t[0].body),t}function Ge(t,e){if(!t)return"";if(t.length<=1)return t;if(!e||"ASCIIMath"!==e.format){if(t.startsWith("$$")&&t.endsWith("$$"))return t.substring(2,t.length-2);if(t.startsWith("$")&&t.endsWith("$"))return t.substring(1,t.length-1);if(t=t.replace(/\\\\([^\s\n])/g,"\\$1"),/\\/.test(t))return t}return Ze(t=(t=(t=(t=(t=(t=t.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),e)}function Ze(t,e){if(!t)return"";let s,i=!1;if(i||"^"!==t[0]&&"_"!==t[0]||(s=Xe(t.substr(1),{...e,noWrap:!0}),t=t[0]+"{"+s.match+"}",t+=Ze(s.rest,e),i=!0),i||(s=t.match(/^(sqrt|\u221a)(.*)/),s&&(s=Xe(s[2],{...e,noWrap:!0}),t="\\sqrt{"+s.match+"}",t+=Ze(s.rest,e),i=!0)),i||(s=t.match(/^(\\cbrt|\u221b)(.*)/),s&&(s=Xe(s[2],{...e,noWrap:!0}),t="\\sqrt[3]{"+s.match+"}",t+=Ze(s.rest,e),i=!0)),i||(s=t.match(/^abs(.*)/),s&&(s=Xe(s[1],{...e,noWrap:!0}),t="\\left|"+s.match+"\\right|",t+=Ze(s.rest,e),i=!0)),i||(s=t.match(/^["”“](.*?)["”“](.*)/),s&&(t="\\text{"+s[1]+"}",t+=Ze(s[2],e),i=!0)),i||(s=t.match(/^([^a-zA-Z({[_^\\\s"]+)(.*)/),s&&(t=Ye(s[1],e),t+=Ze(s[2],e),i=!0)),!i&&/^(f|g|h)[^a-zA-Z]/.test(t)&&(s=Xe(t.substring(1),{...e,noWrap:!0}),t="("===t[1]?t[0]+"\\mleft("+s.match+"\\mright)":t[0]+s.match,t+=Ze(s.rest,e),i=!0),i||(s=t.match(/^([a-zA-Z]+)(.*)/),s&&(t=Ye(s[1],e),t+=Ze(s[2],e),i=!0)),!i)if(s=Xe(t,{...e,noWrap:!0}),s.match&&"/"===s.rest[0]){const a=Xe(s.rest.substr(1),{...e,noWrap:!0});a.match&&(t="\\frac{"+s.match+"}{"+a.match+"}"+Ze(a.rest,e)),i=!0}else s.match&&(t="("===t[0]?"\\left("+s.match+"\\right)"+Ze(s.rest,e):s.match+Ze(s.rest,e),i=!0);return i||(s=t.match(/^(\s+)(.*)$/),s&&(t=" "+Ze(s[2],e),i=!0)),t}function Xe(t,e){let s="",i=t=t.trim(),a=t.charAt(0),r={"(":")","{":"}","[":"]"}[a];if(r){let n=1,o=1;for(;o<t.length&&n>0;)t[o]===a&&n++,t[o]===r&&n--,o++;0===n?(e.noWrap&&"("===a?s=Ze(t.substring(1,o-1),e):("{"===a&&"}"===r&&(a="\\{",r="\\}"),s="\\left"+a+Ze(t.substring(1,o-1),e)+"\\right"+r),i=t.substring(o)):(s=t.substring(1,o),i="")}else{let a=t.match(/^([a-zA-Z]+)/);if(a){let s=Pe.forString("math",null,t,e);if(s)return s=s.replace("_{#?}",""),s=s.replace("^{#?}",""),{match:s,rest:t.substring(s.length)}}if(a=t.match(/^([a-zA-Z])/),a)return{match:a[1],rest:t.substring(1)};if(a=t.match(/^(-)?\d+(\.\d*)?/),a)return{match:a[0],rest:t.substring(a[0].length)};/^\\(left|right)/.test(t)||(a=t.match(/^(\\[a-zA-Z]+)/),a&&(i=t.substring(a[1].length),s=a[1]))}return{match:s,rest:i}}function Ye(t,e){let s=Pe.forString("math",null,t,e);return s?(s=s.replace("_{#?}",""),s=s.replace("^{#?}",""),s+=" "):s=t,s}function Je(){return new ie("","first")}Be.prototype._announce=function(t,e,s){"function"==typeof this.config.onAnnounce&&this.config.onAnnounce(this.target,t,e,s)},Be.prototype.filter=function(t,e){e=e<0?-1:1;const s=[],i=new Be;i.path=Ce.clone(this.path),i.extent=this.extent,i.root=this.root,e>=0?i.collapseForward():(i.collapseBackward(),i.move(1));const a=i.anchor();do{t.bind(i)(i.path,i.anchor())&&s.push(i.toString()),e>=0?i.next({iterateAll:!0}):i.previous({iterateAll:!0})}while(a!==i.anchor());return s},Be.prototype.forEach=function(t){this.root.forEach(t)},Be.prototype.forEachSelected=function(t,e){(e=e||{}).recursive=void 0!==e.recursive&&e.recursive;const s=this.siblings(),i=this.startOffset()+1,a=this.endOffset()+1;if(e.recursive)for(let e=i;e<a;e++)s[e]&&"first"!==s[e].type&&s[e].forEach(t);else for(let e=i;e<a;e++)s[e]&&"first"!==s[e].type&&t(s[e])},Be.prototype.toString=function(){return Ce.pathToString(this.path,this.extent)},Be.prototype.adjustPlaceholder=function(){const t=this.siblings();if(t&&t.length<=1){let e;const s=this.relation();if("numer"===s?e="numerator":"denom"===s?e="denominator":"surd"===this.parent().type&&"body"===s?e="radicand":"overunder"===this.parent().type&&"body"===s?e="base":"underscript"!==s&&"overscript"!==s||(e="annotation"),e){const e=[new ie("math","placeholder","⬚",this.anchorStyle())];Array.prototype.splice.apply(t,[1,0].concat(e))}}},Be.prototype.selectionWillChange=function(){"function"!=typeof this.config.onSelectionWillChange||this.suppressChangeNotifications||this.config.onSelectionWillChange(this.target)},Be.prototype.selectionDidChange=function(){"function"!=typeof this.config.onSelectionDidChange||this.suppressChangeNotifications||this.config.onSelectionDidChange(this.target)},Be.prototype.contentWillChange=function(){"function"!=typeof this.config.onContentWillChange||this.suppressChangeNotifications||this.config.onContentWillChange(this.target)},Be.prototype.contentDidChange=function(){"function"!=typeof this.config.onContentDidChange||this.suppressChangeNotifications||this.config.onContentDidChange(this.target)},Be.prototype.setPath=function(t,e){if("string"==typeof t)t=Ce.pathFromString(t);else if(Array.isArray(t)){const s=Ce.clone(t),i=this.path;this.path=s,0===e&&"placeholder"===this.anchor().type&&(s[s.length-1].offset=this.anchorOffset()-1,e=1),t={path:s,extent:e||0},this.path=i}const s=0!==Ce.pathDistance(this.path,t.path),i=t.extent!==this.extent;return(s||i)&&(s&&this.adjustPlaceholder(),this.selectionWillChange(),this.path=Ce.clone(t.path),this.siblings().length<this.anchorOffset()?(this.path=[{relation:"body",offset:0}],this.extent=0):this.setExtent(t.extent),this.selectionDidChange()),s||i},Be.prototype.wordBoundary=function(t,e){e=e<0?-1:1;const s=new Be;s.path=Ce.clone(t),s.root=this.root;let i=0;for(;s.sibling(i)&&"text"===s.sibling(i).mode&&mt.test(s.sibling(i).body);)i+=e;return s.sibling(i)||(i-=e),s.path[s.path.length-1].offset+=i,s.path},Be.prototype.wordBoundaryOffset=function(t,e){e=e<0?-1:1;const s=this.siblings();if(!s[t])return t;if("text"!==s[t].mode)return t;let i;if(mt.test(s[t].body)){let a,r=t;do{a="text"===s[r].mode&&mt.test(s[r].body),r+=e}while(s[r]&&a);i=s[r]?r-2*e:r-e}else if(/\s/.test(s[t].body)){let a=t;for(;s[a]&&"text"===s[a].mode&&/\s/.test(s[a].body);)a+=e;if(s[a]){let t=!0;do{t="text"===s[a].mode&&!/\s/.test(s[a].body),a+=e}while(s[a]&&t);i=s[a]?a-2*e:a-e}else i=a-e}else{let a=t;for(;s[a]&&"text"===s[a].mode&&!/\s/.test(s[a].body);)a+=e;i=s[a]?a:a-e;let r=!0;for(;s[a]&&r;)r="text"===s[a].mode&&/\s/.test(s[a].body),r&&(i=a),a+=e;i=s[a]?a-2*e:a-e}return i-(e>0?0:1)},Be.prototype.setRange=function(t,e,s){s=s||{};const i=Ce.pathDistance(t,e);if(0===i)return s.extendToWordBoundary?(t=this.wordBoundary(t,-1),e=this.wordBoundary(e,1),this.setRange(t,e)):this.setPath(Ce.clone(t),0);if(1===i){const i=e[e.length-1].offset-t[t.length-1].offset;return s.extendToWordBoundary?(t=this.wordBoundary(t,i<0?1:-1),e=this.wordBoundary(e,i<0?-1:1),this.setRange(t,e)):this.setPath(Ce.clone(t),i)}let a=Ce.pathCommonAncestor(t,e);const r=a.length;if(t.length===r||e.length===r||t[r].relation!==e[r].relation)return this.setPath(a,-1);a.push(t[r]),a=Ce.clone(a);let n=e[r].offset-t[r].offset+1;return n<=0?e.length>r+1?(a[r].relation=e[r].relation,a[r].offset=e[r].offset,a[a.length-1].offset-=1,n=2-n):(a[r].relation=e[r].relation,a[r].offset=e[r].offset,n=1-n):e.length<=t.length?a[a.length-1].offset-=1:e.length>t.length&&(a[r].offset-=1),this.setPath(a,n)},Be.prototype.ancestor=function(t){if(t>this.path.length)return null;let e=this.root;for(let s=0;s<this.path.length-t;s++){const t=this.path[s];if(e.array)e=Re(e.array,t.relation)[t.offset];else{if(!e[t.relation])return null;{0!==e[t.relation].length&&"first"===e[t.relation][0].type||e[t.relation].unshift(Je());const s=Math.min(t.offset,e[t.relation].length-1);e=e[t.relation][s]}}}return e},Be.prototype.anchor=function(){if(this.parent().array)return Re(this.parent().array,this.relation())[this.anchorOffset()];const t=this.siblings();return t[Math.min(t.length-1,this.anchorOffset())]},Be.prototype.parent=function(){return this.ancestor(1)},Be.prototype.relation=function(){return this.path.length>0?this.path[this.path.length-1].relation:""},Be.prototype.anchorOffset=function(){return this.path.length>0?this.path[this.path.length-1].offset:0},Be.prototype.focusOffset=function(){return this.path.length>0?this.path[this.path.length-1].offset+this.extent:0},Be.prototype.startOffset=function(){return Math.min(this.focusOffset(),this.anchorOffset())},Be.prototype.endOffset=function(){return Math.max(this.focusOffset(),this.anchorOffset())},Be.prototype.insertFirstAtom=function(){this.siblings()},Be.prototype.siblings=function(){if(0===this.path.length)return[];let t;return this.parent().array?t=Re(this.parent().array,this.relation()):(t=this.parent()[this.relation()]||[],"string"==typeof t&&(t=[])),0!==t.length&&"first"===t[0].type||t.unshift(Je()),t},Be.prototype.sibling=function(t){return this.siblings()[this.startOffset()+t]},Be.prototype.isCollapsed=function(){return 0===this.extent},Be.prototype.setExtent=function(t){this.extent=t},Be.prototype.collapseForward=function(){return 0!==this.extent&&(this.setSelection(this.endOffset()),!0)},Be.prototype.collapseBackward=function(){return 0!==this.extent&&(this.setSelection(this.startOffset()),!0)},Be.prototype.selectGroup_=function(){const t=this.siblings();if("text"===this.anchorMode()){let e=this.startOffset(),s=this.endOffset();for(;t[e]&&"text"===t[e].mode&&mt.test(t[e].body);)e-=1;for(;t[s]&&"text"===t[s].mode&&mt.test(t[s].body);)s+=1;if(s-=1,e>=s)return void this.setSelection(this.endOffset()-1,1);this.setSelection(e,s-e)}else if("mord"===this.sibling(0).type&&/[0-9,.]/.test(this.sibling(0).body)){let e=this.startOffset(),s=this.endOffset();for(;Ve(t[e]);)e-=1;for(;Ve(t[s]);)s+=1;s-=1,this.setSelection(e,s-e)}else this.setSelection(0,"end")},Be.prototype.selectAll_=function(){this.path=[{relation:"body",offset:0}],this.setSelection(0,"end")},Be.prototype.deleteAll_=function(){this.selectAll_(),this.delete_()},Be.prototype.contains=function(t){if(this.isCollapsed())return!1;const e=this.siblings(),s=this.startOffset(),i=this.endOffset();for(let a=s;a<i;a++)if(je(e[a],t))return!0;return!1},Be.prototype.getSelectedAtoms=function(){if(this.isCollapsed())return null;const t=[],e=this.siblings(),s=this.startOffset()+1,i=this.endOffset()+1;for(let a=s;a<i;a++)e[a]&&"first"!==e[a].type&&t.push(e[a]);return t},Be.prototype.commandOffsets=function(){const t=this.siblings();if(t.length<=1)return null;let e=Math.min(this.endOffset(),t.length-1);if("command"!==t[e].type)return null;for(;e>0&&"command"===t[e].type;)e-=1;let s=this.startOffset()+1;for(;s<=t.length-1&&"command"===t[s].type;)s+=1;return s>e?{start:e+1,end:s}:null},Be.prototype.extractCommandStringAroundInsertionPoint=function(t){let e="";const s=this.commandOffsets();if(s){const i=t?this.anchorOffset()+1:s.end,a=this.siblings();for(let t=s.start;t<i;t++)e+=a[t].body||""}return e},Be.prototype.decorateCommandStringAroundInsertionPoint=function(t){const e=this.commandOffsets();if(e){const s=this.siblings();for(let i=e.start;i<e.end;i++)s[i].error=t}},Be.prototype.commitCommandStringBeforeInsertionPoint=function(){const t=this.commandOffsets();if(t){const e=this.siblings(),s=this.anchorOffset()+1;for(let i=t.start;i<s;i++)e[i]&&(e[i].suggestion=!1)}},Be.prototype.spliceCommandStringAroundInsertionPoint=function(t){const e=this.commandOffsets();if(e){if(this.contentWillChange(),t){Array.prototype.splice.apply(this.siblings(),[e.start,e.end-e.start].concat(t));let s=[];for(const e of t)s=s.concat(e.filter(t=>"placeholder"===t.type));this.setExtent(0),this.path[this.path.length-1].offset=e.start-1,0!==s.length&&this.leap(1,!1)||this.setSelection(e.start+t.length-1)}else this.siblings().splice(e.start,e.end-e.start),this.setSelection(e.start-1,0);this.contentDidChange()}},Be.prototype.removeCommandString=function(){this.contentWillChange();const t=this.suppressChangeNotifications;this.suppressChangeNotifications=!0,function t(e){if(e)if(Array.isArray(e))for(let s=e.length-1;s>=0;s--)"command"===e[s].type?e.splice(s,1):t(e[s]);else if(t(e.body),t(e.superscript),t(e.subscript),t(e.underscript),t(e.overscript),t(e.numer),t(e.denom),t(e.index),e.array)for(let s=Ne(e.array);s>=0;s--)t(Re(e.array,s))}(this.root.body),this.suppressChangeNotifications=t,this.contentDidChange()},Be.prototype.getContentFromSiblings=function(t,e){const s=this.siblings();if(Ee(s))return"";if("first"===s[0].type&&0===t&&(t=1),1===t&&e===s.length-1)return this.parent().toLatex();let i="",a=t;for(;a<=e;)i+=s[a].toLatex(),a++;return i},Be.prototype.getImplicitArgOffset=function(){const t=this.siblings();let e=this.startOffset();if("text"===t[e].mode)for(;e>=1&&"text"===t[e].mode;)e--;else for(;e>=1&&/^(mord|surd|msubsup|leftright|mop)$/.test(t[e].type);)e--;return e},Be.prototype.setSelection=function(t,e,s){t=t||0,e=e||0;const i=this.path[this.path.length-1].relation;s||(s=i);const a=this.parent();if(!a&&"body"!==s)return!1;const r=s.startsWith("cell");if(!r&&!a[s]||r&&!a.array)return!1;const n=s!==i;this.path[this.path.length-1].relation=s;const o=this.siblings().length;this.path[this.path.length-1].relation=i;const l=this.extent;"end"===e?e=o-t-1:"start"===e&&(e=-t),this.setExtent(e);const c=this.extent!==l;this.setExtent(l),t<0&&(t=o+t),t=Math.max(0,Math.min(t,o-1));const h=this.path[this.path.length-1].offset;return(n||h!==t||c)&&(n&&this.adjustPlaceholder(),this.selectionWillChange(),this.path[this.path.length-1].relation=s,this.path[this.path.length-1].offset=t,this.setExtent(e),this.selectionDidChange()),!0},Be.prototype.next=function(t){t=t||{};const e={body:"numer",numer:"denom",denom:"index",index:"overscript",overscript:"underscript",underscript:"subscript",subscript:"superscript"};if(this.anchorOffset()===this.siblings().length-1){this.adjustPlaceholder();let s=e[this.relation()];const i=this.parent();for(;s&&!i[s];)s=e[s];if(s)return void this.setSelection(0,0,s);if(this.parent().array){const t=Ne(this.parent().array);let e=parseInt(this.relation().match(/cell([0-9]*)$/)[1])+1;for(;e<t;){if(Re(this.parent().array,e)&&this.setSelection(0,0,"cell"+e))return void this.selectionDidChange();e+=1}}if(1===this.path.length)(this.suppressChangeNotifications||!this.config.onMoveOutOf||this.config.onMoveOutOf(this,"forward"))&&(this.path[0].offset=0);else{const e=!t.iterateAll&&this.parent().skipBoundary;this.path.pop(),e&&this.next(t)}return void this.selectionDidChange()}this.setSelection(this.anchorOffset()+1);const s=this.anchor();if(s&&!s.captureSelection){let i;if(s.array){let t=0;i="";const e=Ne(s.array);for(;!i&&t<e;)Re(s.array,t)&&(i="cell"+t.toString()),t+=1;return this.path.push({relation:i,offset:0}),void this.setSelection(0,0,i)}for(i="body";i;){if(Array.isArray(s[i]))return this.path.push({relation:i,offset:0}),this.insertFirstAtom(),void(!t.iterateAll&&s.skipBoundary&&this.next(t));i=e[i]}}},Be.prototype.previous=function(t){const e={numer:"body",denom:"numer",index:"denom",overscript:"index",underscript:"overscript",subscript:"underscript",superscript:"subscript"};if(!(t=t||{}).iterateAll&&1===this.anchorOffset()&&this.parent()&&this.parent().skipBoundary&&this.setSelection(0),this.anchorOffset()<1){let t=e[this.relation()];for(;t&&!this.setSelection(-1,0,t);)t=e[t];const s=this.parent()?this.parent().type:"none";if("body"!==t||"msubsup"!==s&&"mop"!==s||(t=null),t)return;if(this.adjustPlaceholder(),this.selectionWillChange(),this.relation().startsWith("cell")){let t=parseInt(this.relation().match(/cell([0-9]*)$/)[1])-1;for(;t>=0;){if(Re(this.parent().array,t)&&this.setSelection(-1,0,"cell"+t))return void this.selectionDidChange();t-=1}}return 1===this.path.length?(this.suppressChangeNotifications||!this.config.onMoveOutOf||this.config.onMoveOutOf.bind(this)(-1))&&(this.path[0].offset=this.root.body.length-1):(this.path.pop(),this.setSelection(this.anchorOffset()-1)),void this.selectionDidChange()}const s=this.anchor();if(!s.captureSelection){let t;if(s.array){t="";const e=Ne(s.array);let i=e-1;for(;!t&&i<e;)Re(s.array,i)&&(t="cell"+i.toString()),i-=1;return i+=1,this.path.push({relation:t,offset:Re(s.array,i).length-1}),void this.setSelection(-1,0,t)}for(t="superscript";t;){if(Array.isArray(s[t]))return this.path.push({relation:t,offset:s[t].length-1}),void this.setSelection(-1,0,t);t=e[t]}}this.setSelection(this.anchorOffset()-1),!t.iterateAll&&this.sibling(0)&&this.sibling(0).skipBoundary&&this.previous(t)},Be.prototype.move=function(t,e){const s=(e=e||{extend:!1}).extend||!1;if(this.removeSuggestion(),s)this.extend(t,e);else{const e=Ke(this);if(t>0)for(this.collapseForward()&&t--;t>0;)this.next(),t--;else if(t<0)for(this.collapseBackward()&&t++;0!==t;)this.previous(),t++;this._announce("move",e)}},Be.prototype.up=function(t){const e=(t=t||{extend:!1}).extend||!1;this.collapseBackward();const s=this.relation();if("denom"===s)e?(this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange()):this.setSelection(this.anchorOffset(),0,"numer"),this._announce("moveUp");else if(this.parent().array){let e=Ie(this.parent().array,s);e=We(this.parent().array,e,-1),e&&Re(e)?(this.path[this.path.length-1].relation="cell"+Oe(this.parent().array,e),this.setSelection(this.anchorOffset()),this._announce("moveUp")):this.move(-1,t)}else this._announce("line")},Be.prototype.down=function(t){const e=(t=t||{extend:!1}).extend||!1;this.collapseForward();const s=this.relation();if("numer"===s)e?(this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange()):this.setSelection(this.anchorOffset(),0,"denom"),this._announce("moveDown");else if(this.parent().array){let e=Ie(this.parent().array,s);e=We(this.parent().array,e,1),e&&Re(e)?(this.path[this.path.length-1].relation="cell"+Oe(this.parent().array,e),this.setSelection(this.anchorOffset()),this._announce("moveDown")):this.move(1,t)}else this._announce("line")},Be.prototype.extend=function(t){let e=this.path[this.path.length-1].offset,s=0;const i=Ke(this);s=this.extent+t;const a=e+s;if(a<0&&0!==s){if(this.path.length>1)return this.selectionWillChange(),this.path.pop(),this.setExtent(-1),this.selectionDidChange(),void this._announce("move",i);e=this.path[this.path.length-1].offset,s=this.extent}else if(a>=this.siblings().length){if(this.path.length>1)return this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange(),void this._announce("move",i);this.isCollapsed()&&(e-=1),s-=1}this.setSelection(e,s),this._announce("move",i)},Be.prototype.skip=function(t,e){const s=(e=e||{extend:!1}).extend||!1;t=t<0?-1:1;const i=Ke(this),a=this.siblings(),r=this.focusOffset();let n=r+t;if(s&&(n=Math.min(Math.max(0,n),a.length-1)),n<0||n>=a.length)this.move(t,e);else{if(a[n]&&"text"===a[n].mode){if(n=this.wordBoundaryOffset(n,t),n<0&&!s)return void this.setSelection(0);if(n>a.length)return this.setSelection(a.length-1),void this.move(t,e)}else{const e=a[n]?a[n].type:"";if("mopen"===e&&t>0||"mclose"===e&&t<0){let s="mopen"===e?1:-1;for(n+=t>0?1:-1;n>=0&&n<a.length&&0!==s;)"mopen"===a[n].type?s+=1:"mclose"===a[n].type&&(s-=1),n+=t;0!==s&&(n=r+t),t>0&&(n-=1)}else{for(;a[n]&&"math"===a[n].mode&&a[n].type===e;)n+=t;n-=t>0?1:0}}if(s){const t=this.anchorOffset();this.setSelection(t,n-t)}else this.setSelection(n);this._announce("move",i)}},Be.prototype.jump=function(t,e){const s=(e=e||{extend:!1}).extend||!1;t=t<0?-1:1;const i=this.siblings();let a=this.focusOffset();t>0&&(a=Math.min(a+1,i.length-1));const r=t<0?0:i.length-1;s?this.extend(r-a):this.move(r-a)},Be.prototype.jumpToMathFieldBoundary=function(t,e){const s=(e=e||{extend:!1}).extend||!1;t=(t=t||1)<0?-1:1;const i=Ke(this),a=[{relation:"body",offset:this.path[0].offset}];let r;s?t<0?a[0].offset>0&&(r=-a[0].offset):a[0].offset<this.siblings().length-1&&(r=this.siblings().length-1-a[0].offset):(a[0].offset=t<0?0:this.root.body.length-1,r=0),this.setPath(a,r),this._announce("move",i)},Be.prototype.leap=function(t,e){t=(t=t||1)<0?-1:1,e=e||!0;const s=this.suppressChangeNotifications;this.suppressChangeNotifications=!0;const i=Ke(this),a=this.extent;this.move(t),"placeholder"===this.anchor().type&&this.move(t);const r=this.filter((t,e)=>"placeholder"===e.type||t.length>1&&1===this.siblings().length,t);if(0===r.length){if(this.setPath(i,a),e)if(this.config.onTabOutOf)this.config.onTabOutOf(this.target,t>0?"forward":"backward");else if(document.activeElement){const e='a[href]:not([disabled]),\n                    button:not([disabled]),\n                    textarea:not([disabled]),\n                    input[type=text]:not([disabled]),\n                    select:not([disabled]),\n                    [contentEditable="true"],\n                    [tabindex]:not([disabled]):not([tabindex="-1"])',s=Array.prototype.filter.call(document.querySelectorAll(e),t=>(t.offsetWidth>0||t.offsetHeight>0)&&!t.contains(document.activeElement)||t===document.activeElement);let i=s.indexOf(document.activeElement)+t;i<0&&(i=s.length-1),i>=s.length&&(i=0),s[i].focus()}return this.suppressChangeNotifications=s,!1}return this.selectionWillChange(),this.setPath(r[0]),"placeholder"===this.anchor().type&&this.setExtent(-1),this._announce("move",i),this.selectionDidChange(),this.suppressChangeNotifications=s,!0},Be.prototype.anchorMode=function(){const t=this.isCollapsed()?this.anchor():this.sibling(1);let e;if(t){if("commandliteral"===t.type||"command"===t.type)return"command";e=t.mode}let s=1,i=this.ancestor(s);for(;!e&&i;)i&&(e=i.mode),s+=1,i=this.ancestor(s);return e},Be.prototype.anchorStyle=function(){const t=this.isCollapsed()?this.anchor():this.sibling(1);let e;if(t&&"first"!==t.type){if("commandliteral"===t.type||"command"===t.type)return{};e={color:t.color,backgroundColor:t.backgroundColor,fontFamily:t.fontFamily,fontShape:t.fontShape,fontSeries:t.fontSeries,fontSize:t.fontSize}}let s=1,i=this.ancestor(s);for(;!e&&i;)i&&(e={color:i.color,backgroundColor:i.backgroundColor,fontFamily:i.fontFamily,fontShape:i.fontShape,fontSeries:i.fontSeries,fontSize:i.fontSize}),s+=1,i=this.ancestor(s);return e},Be.prototype.simplifyParen=function(t){if(t&&this.config.removeExtraneousParentheses){for(let e=0;t[e];e++)if("leftright"===t[e].type&&"("===t[e].leftDelim&&Array.isArray(t[e].body)){let s=0,i=0,a=0;for(let r=0;t[e].body[r];r++)"genfrac"===t[e].body[r].type&&(s++,i=r),"first"!==t[e].body[r].type&&a++;0===a&&1===s&&(t[e]=t[e].body[i])}t.forEach(t=>{if("genfrac"===t.type&&(this.simplifyParen(t.numer),this.simplifyParen(t.denom),t.numer=Ue(t.numer),t.denom=Ue(t.denom)),t.superscript&&(this.simplifyParen(t.superscript),t.superscript=Ue(t.superscript)),t.subscript&&(this.simplifyParen(t.subscript),t.subscript=Ue(t.subscript)),t.underscript&&(this.simplifyParen(t.underscript),t.underscript=Ue(t.underscript)),t.overscript&&(this.simplifyParen(t.overscript),t.overscript=Ue(t.overscript)),t.index&&(this.simplifyParen(t.index),t.index=Ue(t.index)),"surd"===t.type?(this.simplifyParen(t.body),t.body=Ue(t.body)):t.body&&Array.isArray(t.body)&&this.simplifyParen(t.body),t.array)for(let e=Ne(t.array);e>=0;e--)this.simplifyParen(Re(t.array,e))})}},Be.prototype.invalidateLatex=function(){let t=1,e=this.ancestor(t);for(;e;)e.latex=void 0,t+=1,e=this.ancestor(t)},Be.prototype.insert=function(t,e){if((e=e||{}).smartFence&&this._insertSmartFence(t,e.style))return;const s=this.suppressChangeNotifications;e.suppressChangeNotifications&&(this.suppressChangeNotifications=!0),this.contentWillChange();const i=this.suppressChangeNotifications;this.suppressChangeNotifications=!0,e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder"),e.format||(e.format="auto"),e.macros=e.macros||this.config.macros;const a=e.mode||this.anchorMode();let r;const n=[this.getSelectedAtoms()];void 0!==e.placeholder&&(n["?"]=e.placeholder),"replaceSelection"!==e.insertionMode||this.isCollapsed()?"replaceAll"===e.insertionMode?(this.root.body=[],this.path=[{relation:"body",offset:0}],this.extent=0):"insertBefore"===e.insertionMode?this.collapseBackward():"insertAfter"===e.insertionMode&&this.collapseForward():this.delete_();const o=this.siblings(),l=this.startOffset();if(l+1<o.length&&o[l+1]&&"placeholder"===o[l+1].type?this.delete_(1):l>0&&o[l]&&"placeholder"===o[l].type&&this.delete_(-1),"math"===a&&"ASCIIMath"===e.format)r=Me(t=Ge(t,{...this.config,format:"ASCIIMath"}),"math",null,e.macros,!1),this.simplifyParen(r);else if("text"!==a&&"auto"===e.format)if("command"===a){r=[];for(const e of t)ct.test(e)&&r.push(new ie("command","command",e))}else if(""===t)r=[new ie("command","command","\\")];else{if(t=(t=Ge(t,this.config)).replace(/(^|[^\\])#\?/g,"$1\\placeholder{}"),n[0])t=t.replace(/(^|[^\\])#@/g,"$1#0");else if(/(^|[^\\])#@/.test(t)){const e=this.getImplicitArgOffset();t=t.replace(/(^|[^\\])#@/g,"$1"+this.getContentFromSiblings(e+1,this.startOffset())),this._deleteAtoms(e-this.startOffset())}else t=t.replace(/(^|[^\\])#@/g,"$1#?");r=Me(t,a,n,e.macros,e.smartFence),this.simplifyParen(r)}else"latex"===e.format?r=Me(t,a,n,e.macros,e.smartFence):"text"!==a&&"text"!==e.format||(r=Me(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/£/g,"\\textsterling "),"text",n,e.macros,!1));this.invalidateLatex(),function t(e,s){e&&s&&(Array.isArray(e)?e.forEach(e=>t(e,s)):"object"==typeof e&&(e.color||e.backgroundColor||e.fontFamily||e.fontShape||e.fontSeries||e.fontSize||(e.applyStyle(s),t(e.body,s),t(e.numer,s),t(e.denom,s),t(e.index,s),t(e.overscript,s),t(e.underscript,s),t(e.subscript,s),t(e.superscript,s))))}(r,e.style);const c=this.parent();if(this.config.removeExtraneousParentheses&&c&&"leftright"===c.type&&"("===c.leftDelim&&Ee(c.body)&&r&&1===r.length&&"genfrac"===r[0].type?(this.path.pop(),this.siblings()[this.anchorOffset()]=r[0]):("latex"!==e.format||1!==n.length||n[0]||Ee(c.body)&&(c.latex=t),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset()+1,0].concat(r))),this.insertFirstAtom(),this.suppressChangeNotifications=i,"placeholder"===e.selectionMode){let t=[];for(const e of r)t=t.concat(e.filter(t=>"placeholder"===t.type));0!==t.length&&this.leap(1,!1)?this._announce("move"):this.setSelection(this.anchorOffset()+r.length)}else"before"===e.selectionMode||("after"===e.selectionMode?this.setSelection(this.anchorOffset()+r.length):"item"===e.selectionMode&&this.setSelection(this.anchorOffset(),r.length));this.contentDidChange(),this.suppressChangeNotifications=s},Be.prototype._insertSmartFence=function(t,e){const s=this.parent();if("leftright"===s.type&&"|"!==s.leftDelim&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(t))return this.insert("\\,\\middle"+t+"\\, ",{mode:"math",format:"latex",style:e}),!0;"{"!==t&&"\\{"!==t||(t="\\lbrace"),"}"!==t&&"\\}"!==t||(t="\\rbrace"),"["!==t&&"\\["!==t||(t="\\lbrack"),"]"!==t&&"\\]"!==t||(t="\\rbrack");const i=ot[t];if(i&&("leftright"!==s.type||"|"!==s.leftDelim)){let s="";const a=this.isCollapsed()||"placeholder"===this.anchor().type;s=this.sibling(0).isFunction?"\\mleft"+t+"\\mright":"\\left"+t+"\\right",s+=a?"?":i;let r=[];return a&&(r=this.siblings().splice(this.anchorOffset()+1,this.siblings().length)),this.insert(s,{mode:"math",format:"latex",style:e}),a&&(this.sibling(0).body=r,this.move(-1)),!0}let a;if(Object.keys(ot).forEach(e=>{t===ot[e]&&(a=e)}),a){if(s&&"leftright"===s.type&&this.endOffset()===this.siblings().length-1)return this.contentWillChange(),s.rightDelim=t,this.move(1),this.contentDidChange(),!0;const i=this.siblings();let a;for(a=this.endOffset();a>=0&&("leftright"!==i[a].type||"?"!==i[a].rightDelim);a--);if(a>=0)return this.contentWillChange(),i[a].rightDelim=t,i[a].body=i[a].body.concat(i.slice(a+1,this.endOffset()+1)),i.splice(a+1,this.endOffset()-a),this.setSelection(a),this.contentDidChange(),!0;if(s&&"leftright"===s.type&&"?"===s.rightDelim){this.contentWillChange(),s.rightDelim=t;const e=i.slice(this.endOffset()+1);return i.splice(this.endOffset()+1),this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.endOffset()+1,0].concat(e)),this.contentDidChange(),!0}const r=this.ancestor(2);return r&&"leftright"===r.type&&"?"===r.rightDelim&&this.endOffset()===i.length-1?(this.move(1),this._insertSmartFence(t,e)):(this.insert(t,{mode:"math",format:"latex",style:e}),!0)}return!1},Be.prototype.positionInsertionPointAfterCommitedCommand=function(){const t=this.siblings(),e=this.commandOffsets();let s=e.start;for(;s<e.end&&!t[s].suggestion;)s++;this.setSelection(s-1)},Be.prototype.removeSuggestion=function(){const t=this.siblings();for(let e=t.length-1;e>=0;e--)t[e].suggestion&&t.splice(e,1)},Be.prototype.insertSuggestion=function(t,e){this.removeSuggestion();const s=[],i=t.substr(e);for(const t of i){const e=new ie("command","command",t);e.suggestion=!0,s.push(e)}Array.prototype.splice.apply(this.siblings(),[this.anchorOffset()+1,0].concat(s))},Be.prototype._deleteAtoms=function(t){t>0?this.siblings().splice(this.anchorOffset()+1,t):(this.siblings().splice(this.anchorOffset()+t+1,-t),this.setSelection(this.anchorOffset()+t))},Be.prototype.delete=function(t){if(0===(t=t||0))this.delete_(0);else if(t>0)for(;t>0;)this.delete_(1),t--;else for(;t<0;)this.delete_(-1),t++},Be.prototype.delete_=function(t){this.contentWillChange(),this.selectionWillChange();const e=this.suppressChangeNotifications;if(this.suppressChangeNotifications=!0,t=(t=t||0)<0?-1:t>0?1:t,this.removeSuggestion(),this.parent().array&&t<0&&0===this.startOffset()){const t=this.parent().array;if(function(t){const e={col:0,row:0};for(;e.row<t.length&&!Re(t,e);)e.row+=1;return Re(t,e)?"cell"+Oe(t,e):""}(t)===this.relation()){const e=function(t,e,s){e||(e=[";",","]);let i,a=[];for(const s of t)i?a.push(i):i=new ie("math","mpunct",e[0],void 0),a=a.concat(He(s,e[1]));return a}(t);this.path.pop(),this.siblings().splice(this.anchorOffset(),1,...e),this.setSelection(this.anchorOffset()-1,e.length)}else{const e=Ie(t,this.relation());if(0===e.col){const s=We(t,e,-1);s.col=t[s.row].length-1,this.path[this.path.length-1].relation="cell"+Oe(t,s);const i=t[s.row][s.col].length,a=He(t[e.row]);t[s.row][s.col]=t[s.row][s.col].concat(a),this.setSelection(i-1,a.length),function(t,e){t.splice(e,1)}(t,e.row)}else if(0===function(t,e){let s=0;const i={col:e,row:0};for(;i.row<t.length;){const e=Re(t,i);if(e&&e.length>0){let t=e.length;"first"===e[0].type&&(t-=1),t>0&&(s+=1)}i.row+=1}return s}(t,e.col)){!function(t,e){let s=0;for(;s<t.length;)t[s][e]&&t[s].splice(e,1),s+=1}(t,e.col),e.col-=1,this.path[this.path.length-1].relation="cell"+Oe(t,e);const s=t[e.row][e.col];this.setSelection(s.length-1,0)}}return this.suppressChangeNotifications=e,this.selectionDidChange(),void this.contentDidChange()}const s=this.siblings();if(this.isCollapsed()){const e=this.anchorOffset();if(t<0)if(0!==e){const t=this.sibling(0);"leftright"===t.type?(t.rightDelim="?",this.move(-1)):!t.captureSelection&&/^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(t.type)?this.move(-1):(this._announce("delete",null,s.slice(e,e+1)),s.splice(e,1),this.setSelection(e-1))}else{const t=this.relation();if("superscript"===t||"subscript"===t){const e=this.parent()[t].filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.parent()[t]=null,this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(e)),this.setSelection(this.anchorOffset()-1),this._announce("deleted: "+t)}else if("denom"===t){const t=this.parent().numer.filter(t=>"placeholder"!==t.type&&"first"!==t.type),e=this.parent().denom.filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(e)),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(t)),this.setSelection(this.anchorOffset()+t.length-1),this._announce("deleted: denominator")}else if("body"===t){const t=this.siblings().filter(t=>"placeholder"!==t.type);this.path.length>1&&(t.shift(),this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(t)),this.setSelection(this.anchorOffset()-1),this._announce("deleted: root"))}else this.move(-1),this.delete(-1)}else if(t>0)if(e!==s.length-1)/^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(this.sibling(1).type)?this.move(1):(this._announce("delete",null,s.slice(e+1,e+2)),s.splice(e+1,1));else if("numer"===this.relation()){const t=this.parent().numer.filter(t=>"placeholder"!==t.type&&"first"!==t.type),e=this.parent().denom.filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(e)),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(t)),this.setSelection(this.anchorOffset()+t.length-1),this._announce("deleted: numerator")}else this.move(1),this.delete(-1)}else{const t=this.startOffset()+1,e=this.endOffset()+1;this._announce("deleted",null,s.slice(t,e)),s.splice(t,e-t),this.setSelection(t-1)}this.suppressChangeNotifications=e,this.selectionDidChange(),this.contentDidChange()},Be.prototype.moveToNextPlaceholder_=function(){this.leap(1)},Be.prototype.moveToPreviousPlaceholder_=function(){this.leap(-1)},Be.prototype.moveToNextChar_=function(){this.move(1)},Be.prototype.moveToPreviousChar_=function(){this.move(-1)},Be.prototype.moveUp_=function(){this.up()},Be.prototype.moveDown_=function(){this.down()},Be.prototype.moveToNextWord_=function(){this.skip(1)},Be.prototype.moveToPreviousWord_=function(){this.skip(-1)},Be.prototype.moveToGroupStart_=function(){this.setSelection(0)},Be.prototype.moveToGroupEnd_=function(){this.setSelection(-1)},Be.prototype.moveToMathFieldStart_=function(){this.jumpToMathFieldBoundary(-1)},Be.prototype.moveToMathFieldEnd_=function(){this.jumpToMathFieldBoundary(1)},Be.prototype.deleteNextChar_=function(){this.delete_(1)},Be.prototype.deletePreviousChar_=function(){this.delete_(-1)},Be.prototype.deleteNextWord_=function(){this.extendToNextBoundary(),this.delete_()},Be.prototype.deletePreviousWord_=function(){this.extendToPreviousBoundary(),this.delete_()},Be.prototype.deleteToGroupStart_=function(){this.extendToGroupStart(),this.delete_()},Be.prototype.deleteToGroupEnd_=function(){this.extendToMathFieldStart(),this.delete_()},Be.prototype.deleteToMathFieldEnd_=function(){this.extendToMathFieldEnd(),this.delete_()},Be.prototype.transpose_=function(){},Be.prototype.extendToNextChar_=function(){this.extend(1)},Be.prototype.extendToPreviousChar_=function(){this.extend(-1)},Be.prototype.extendToNextWord_=function(){this.skip(1,{extend:!0})},Be.prototype.extendToPreviousWord_=function(){this.skip(-1,{extend:!0})},Be.prototype.extendUp_=function(){this.up({extend:!0})},Be.prototype.extendDown_=function(){this.down({extend:!0})},Be.prototype.extendToNextBoundary_=function(){this.skip(1,{extend:!0})},Be.prototype.extendToPreviousBoundary_=function(){this.skip(-1,{extend:!0})},Be.prototype.extendToGroupStart_=function(){this.setExtent(-this.anchorOffset())},Be.prototype.extendToGroupEnd_=function(){this.setExtent(this.siblings().length-this.anchorOffset())},Be.prototype.extendToMathFieldStart_=function(){this.jumpToMathFieldBoundary(-1,{extend:!0})},Be.prototype.extendToMathFieldEnd_=function(){this.jumpToMathFieldBoundary(1,{extend:!0})},Be.prototype.moveToSuperscript_=function(){if(this.collapseForward(),!this.anchor().superscript)if(this.anchor().subscript)this.anchor().superscript=[Je()];else{const t=this.sibling(1);t&&t.superscript?this.path[this.path.length-1].offset+=1:t&&t.subscript?(this.path[this.path.length-1].offset+=1,this.anchor().superscript=[Je()]):("limits"!==this.anchor().limits&&(this.siblings().splice(this.anchorOffset()+1,0,new ie(this.parent().anchorMode,"msubsup","​",this.anchorStyle())),this.path[this.path.length-1].offset+=1),this.anchor().superscript=[Je()])}this.path.push({relation:"superscript",offset:0}),this.selectGroup_()},Be.prototype.moveToSubscript_=function(){if(this.collapseForward(),!this.anchor().subscript)if(this.anchor().superscript)this.anchor().subscript=[Je()];else{const t=this.sibling(1);t&&t.subscript?this.path[this.path.length-1].offset+=1:t&&t.superscript?(this.path[this.path.length-1].offset+=1,this.anchor().subscript=[Je()]):("limits"!==this.anchor().limits&&(this.siblings().splice(this.anchorOffset()+1,0,new ie(this.parent().anchorMode,"msubsup","​",this.anchorStyle())),this.path[this.path.length-1].offset+=1),this.anchor().subscript=[Je()])}this.path.push({relation:"subscript",offset:0}),this.selectGroup_()},Be.prototype.moveToOpposite_=function(){const t={superscript:"subscript",subscript:"superscript",denom:"numer",numer:"denom"}[this.relation()];t||this.moveToSuperscript_(),this.parent()[t]||(this.parent()[t]=[Je()]),this.setSelection(0,"end",t)},Be.prototype.moveBeforeParent_=function(){this.path.length>1?(this.path.pop(),this.setSelection(this.anchorOffset()-1)):this._announce("plonk")},Be.prototype.moveAfterParent_=function(){if(this.path.length>1){const t=Ke(this);this.path.pop(),this.setExtent(0),this._announce("move",t)}else this._announce("plonk")},Be.prototype._addCell=function(t){const e=this.parent();if(e&&"array"===e.type&&Array.isArray(e.array)){const s=this.relation();if(e.array){const i=Ie(e.array,s);"after row"===t||"before row"===t?(i.col=0,i.row=i.row+("after row"===t?1:0),e.array.splice(i.row,0,[[]])):(i.col+="after column"===t?1:0,e.array[i.row].splice(i.col,0,[]));const a=Oe(e.array,i);this.path.pop(),this.path.push({relation:"cell"+a.toString(),offset:0}),this.insertFirstAtom()}}},Be.prototype.convertParentToArray=function(){const t=this.parent();if("leftright"===t.type){t.type="array";const e={"(":"pmatrix","\\lbrack":"bmatrix","\\lbrace":"cases"}[t.leftDelim]||"matrix",s=St(e),i=[[t.body]];s.parser&&Object.assign(t,s.parser(e,[],i)),t.tabularMode=s.tabular,t.parseMode=this.anchorMode(),t.env={...s},t.env.name=e,t.array=i,t.rowGaps=[0],delete t.body,this.path[this.path.length-1].relation="cell0"}},Be.prototype.addRowAfter_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("after row"),this.contentDidChange()},Be.prototype.addRowBefore_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("before row"),this.contentDidChange()},Be.prototype.addColumnAfter_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("after column"),this.contentDidChange()},Be.prototype.addColumnBefore_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("before column"),this.contentDidChange()},Be.prototype._applyStyle=function(t){if(this.isCollapsed())return;const e=this;function s(t,s){let i=!0;return e.forEachSelected(e=>{i=i&&e[t]===s},{recursive:!0}),i}t.color&&s("color",t.color)&&(t.color="none"),t.backgroundColor&&s("backgroundColor",t.backgroundColor)&&(t.backgroundColor="none"),t.fontFamily&&s("fontFamily",t.fontFamily)&&(t.fontFamily="none"),t.series&&(t.fontSeries=t.series),t.fontSeries&&s("fontSeries",t.fontSeries)&&(t.fontSeries="auto"),t.shape&&(t.fontShape=t.shape),t.fontShape&&s("fontShape",t.fontShape)&&(t.fontShape="auto"),t.size&&(t.fontSize=t.size),t.fontSize&&s("fontSize",t.fontSize)&&(t.fontSize="size5"),this.contentWillChange(),this.forEachSelected(e=>e.applyStyle(t),{recursive:!0}),this.contentDidChange()};var Qe={EditableMathlist:Be,parseMathString:Ge};const ts={"#":"#","|":"|","[":"BracketLeft","]":"BracketRight","-":"Minus","+":"Plus","=":"Equal","/":"Slash","\\":"Backslash"},es={Space:"Spacebar"," ":"Spacebar",Escape:"Esc",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},ss={q:"KeyQ",w:"KeyW",e:"KeyE",r:"KeyR",t:"KeyT",y:"KeyY",u:"KeyU",i:"KeyI",o:"KeyO",p:"KeyP",a:"KeyA",s:"KeyS",d:"KeyD",f:"KeyF",g:"KeyG",h:"KeyH",j:"KeyJ",k:"KeyK",l:"KeyL",z:"KeyZ",x:"KeyX",c:"KeyC",v:"KeyV",b:"KeyB",n:"KeyN",m:"KeyM",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",0:"Digit0","!":"Shift-Digit1","@":"Shift-Digit2","#":"Shift-Digit3",$:"Shift-Digit4","%":"Shift-Digit5","^":"Shift-Digit6","&":"Shift-Digit7","*":"Shift-Digit8","(":"Shift-Digit9",")":"Shift-Digit0","-":"Minus",_:"Shift-Minus","/":"Slash","\\":"Backslash","|":"Shift-Backslash","?":"Shift-Slash"," ":"Spacebar"};function is(t){let e,s=!0;"Unidentified"===t.key&&t.target&&(e=ss[t.target.value]||t.target.value),e||(ts[t.key]?(e=ts[t.key],s=!1):e=es[t.key],e||(e=ss[t.key.toLowerCase()])),!e&&t.code&&(e=es[t.code]||t.code);const i=[];return t.ctrlKey&&i.push("Ctrl"),t.metaKey&&i.push("Meta"),s&&t.altKey&&i.push("Alt"),s&&t.shiftKey&&i.push("Shift"),0===i.length?e:(i.push(e),i.join("-"))}function as(t,e){let s,i=null,a=null,r=!1,n=!1;function o(t){clearTimeout(s),s=setTimeout((function(){clearTimeout(s),t()}))}function l(){if(function(t){return t.selectionStart!==t.selectionEnd}(t))return;const s=t.value;t.value="",s.length>0&&e.typedText(s)}const c=t||e.container;c.addEventListener("keydown",(function(s){if("function"==typeof e.allowDeadKey&&e.allowDeadKey()||"Dead"!==s.key&&"Unidentified"!==s.key&&229!==s.keyCode)n=!1;else{n=!0,r=!1;const s=e.blur,i=e.focus;e.blur=null,e.focus=null,t.blur(),t.focus(),e.blur=s,e.focus=i}return!(!r&&"CapsLock"!==s.code&&!/(Control|Meta|Alt|Shift)(Right|Left)/.test(s.code))||(i=s,a=null,e.keystroke(is(s),s))}),!0),c.addEventListener("keypress",(function(t){r||(i&&a&&e.keystroke(is(i),i),a=t,o(l))}),!0),c.addEventListener("keyup",(function(){r||!i||a||l()}),!0),c.addEventListener("paste",(function(){t.focus();const s=t.value;t.value="",s.length>0&&e.paste(s)}),!0),c.addEventListener("copy",(function(t){e.copy&&e.copy(t)}),!0),c.addEventListener("cut",(function(t){e.cut&&e.cut(t)}),!0),c.addEventListener("blur",(function(){i=null,a=null,e.blur&&e.blur()}),!0),c.addEventListener("focus",(function(){e.focus&&e.focus()}),!0),c.addEventListener("compositionstart",()=>{r=!0},!0),c.addEventListener("compositionend",()=>{r=!1,o(l)},!0),c.addEventListener("input",()=>{if(n){const s=e.blur,i=e.focus;e.blur=null,e.focus=null,t.blur(),t.focus(),e.blur=s,e.focus=i,n=!1,r=!1,o(l)}else r||o(l)})}var rs={delegateKeyboardEvents:as,select:as.select,keyboardEventToString:is,eventToChar:function(t){if(!t)return"";let e;return"Unidentified"===t.key&&t.target&&(e=t.target.value),e=e||t.key||t.code,/^(Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(e)&&(e=""),e},charToEvent:function(t){return{key:t,metaKey:!1,ctrlKey:!1,altKey:!1,shiftKey:!1}}};const ns={"\\text":"roman text","\\textrm":"roman text","\\textnormal":"roman text","\\textit":"italic text","\\textbf":"bold text","\\texttt":"monospaced text","\\textsf":"sans-serif text","\\mathrm":["roman","(upright)"],"\\mathbf":"bold","\\bf":"bold","\\bold":"bold","\\mathit":"italic","\\mathbb":"blackboard","\\mathscr":"script","\\mathtt":["typewriter","(monospaced)"],"\\mathsf":"sans-serif","\\mathcal":"caligraphic","\\frak":["fraktur","(gothic)"],"\\mathfrak":["fraktur","(gothic)"],"\\textcolor":"text color","\\color":"color","\\forall":"for all","\\exists":"there exists","\\nexists":"there does not exist","\\frac":"fraction","\\dfrac":"display fraction","\\cfrac":"continuous fraction","\\tfrac":"text fraction","\\binom":"binomial coefficient","\\dbinom":"display binomial coefficient","\\tbinom":"text binomial coefficient","\\pdiff":"partial differential","\\vec":"vector","\\check":"caron","\\acute":"acute","\\breve":"breve","\\tilde":"tilde","\\dot":"dot","\\hat":["hat","circumflex"],"\\ddot":"double dot","\\bar":"bar","\\prime":"prime","\\doubleprime":"double prime","\\varnothing":"empty set","\\emptyset":"empty set","\\subseteq":"subset of or <br>equal to","\\supseteq":"superset of or <br>equal to","\\supset":"superset of","\\subset":"subset of","\\partial":"partial derivative","\\bigcup":"union","\\bigcap":"intersection","\\approx":"approximately equal to","\\notin":"not an element of","\\in":["element of","included in"],"\\infty":"infinity","\\land":"logical and","\\sqrt":"square root","\\prod":"product","\\sum":"summation","\\amalg":["amalgamation","coproduct","free product","disjoint union"],"\\cup":"union with","\\cap":"intersection with","\\int":"integral","\\iint":"surface integral","\\oint":"curve integral","\\iiint":"volume integral","\\iff":"if and only if","\\ln":"natural logarithm","\\boldsymbol":"bold","\\setminus":"set subtraction","\\stackrel":"relation with symbol above","\\stackbin":"operator with symbol above","\\underset":"symbol with annotation below","\\overset":"symbol with annotation above","\\hslash":["h-bar","Planck constant"],"\\gtrsim":"greater than or <br>similar to","\\propto":"proportional to","\\equiv":"equivalent to","\\!":["negative thin space","(-3 mu)"],"\\ ":["space","(6 mu)"],"\\,":["thin space","(3 mu)"],"\\:":["medium space","(4 mu)"],"\\;":["thick space","(5 mu)"],"\\quad":["1 em space","(18 mu)"],"\\qquad":["2 em space","(36 mu)"],"\\enskip":["&#189; em space","(9 mu)"],"\\mp":"minus or plus","\\pm":"plus or minus","\\Im":"Imaginary part of","\\Re":"Real part of","\\gothicCapitalR":"Real part of","\\gothicCapitalI":"Imaginary part part of","\\differentialD":"differential d","\\aleph":["aleph","infinite cardinal",'<a target="_blank" href="https://en.wikipedia.org/wiki/Cardinal_number">Wikipedia <big>&#x203A;</big></a>'],"\\beth":["beth","beth number",'<a target="_blank" href="https://en.wikipedia.org/wiki/Beth_number">Wikipedia <big>&#x203A;</big></a>'],"\\gimel":["gimel","gimel function",'<a target="_blank" href="https://en.wikipedia.org/wiki/Gimel_function">Wikipedia <big>&#x203A;</big></a>'],"\\O":"empty set","\\N":"set of <br>natural numbers","\\Z":"set of <br>integers","\\Q":"set of <br>rational numbers","\\C":"set of <br>complex numbers","\\R":"set of <br>real numbers","\\P":"set of <br>prime numbers","\\lesseqqgtr":"less than, equal to or<br> greater than","\\gnapprox":"greater than and <br>not approximately","\\lnapprox":"lesser than and <br>not approximately","\\j":"dotless j","\\i":"dotless i","\\cdot":"centered dot","\\lmoustache":"left moustache","\\rmoustache":"right moustache","\\nabla":["nabla","del","differential vector operator"],"\\square":["square","d’Alembert operator",'<a target="_blank" href="https://en.wikipedia.org/wiki/D%27Alembert_operator">Wikipedia <big>&#x203A;</big></a>'],"\\blacksquare":["black square","end of proof","tombstone","Halmos symbol"],"\\Box":"end of proof","\\colon":["such that","ratio"],"\\coloneq":["is defined by","is assigned"],"\\Colon":["is defined by","as"],"\\_":["underbar","underscore"],"\\ll":"much less than","\\gg":"much greater than","\\doteq":"approximately equal to","\\Doteq":"approximately equal to","\\doteqdot":"approximately equal to","\\cong":["isomorphism of","(for algebras, modules...)"],"\\det":["determinant of","(of a matrix)"],"\\dotplus":"Cartesian product algebra","\\otimes":["tensor product","(of algebras)","Kronecker product","(of matrices)"],"\\oplus":["direct sum","(of modules)"],"\\lb":"base-2 logarithm","\\lg":"base-10 logarithm","\\wp":["Weierstrass P",'<a target="_blank" href="https://en.wikipedia.org/wiki/Weierstrass%27s_elliptic_functions">Wikipedia <big>&#x203A;</big></a>'],"\\wr":["wreath product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Wreath_product">Wikipedia <big>&#x203A;</big></a>'],"\\top":["tautology","Proposition P is universally true"],"\\bot":["contradiction","Proposition P is contradictory"],"\\mid":["probability","of event A given B"],"\\mho":["Siemens","electrical conductance in SI unit",'<a target="_blank" href="https://en.wikipedia.org/wiki/Siemens_(unit)">Wikipedia <big>&#x203A;</big></a>'],"\\Longrightarrow":"implies","\\Longleftrightarrow":"if, and only if,","\\prec":"precedes","\\preceq":"precedes or is equal to","\\succ":"succeedes","\\succeq":"succeedes or is equal to","\\perp":["is perpendicular to","is independent of"],"\\models":["entails","double-turnstyle, models","is a semantic consequence of",'<a target="_blank" href="https://en.wikipedia.org/wiki/Double_turnstile">Wikipedia <big>&#x203A;</big></a>'],"\\vdash":["satisfies","turnstyle, assertion sign","syntactic inference",'<a target="_blank" href="https://en.wikipedia.org/wiki/Turnstile_(symbol)">Wikipedia <big>&#x203A;</big></a>'],"\\implies":["implies","logical consequence"],"\\impliedby":["implied by","logical consequence"],"\\surd":["surd","root of","checkmark"],"\\ltimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rtimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\leftthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rightthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\divideontimes":["divide on times"],"\\curlywedge":"nor","\\curlyvee":"nand","\\simeq":"is group isomorphic with","\\vartriangleleft":["is a normal subgroup of","is an ideal ring of"],"\\circ":["circle","ring","function composition"],"\\rlap":["overlap right","\\rlap{x}o"],"\\llap":["overlap left","o\\llap{/}"],"\\colorbox":["color box","\\colorbox{#fbc0bd}{...}"],"\\ast":["asterisk","reflexive closure (as a superscript)"],"\\bullet":"bullet","\\lim":"limit"};function os(t,e){t.popover.innerHTML=e;const s=t._getCaretPosition();s&&ls(t,s),t.popover.classList.add("is-visible")}function ls(t,e){const s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerWidth-document.documentElement.clientWidth,r=window.innerHeight-document.documentElement.clientHeight,n=t.virtualKeyboardVisible?t.virtualKeyboard.offsetHeight:0;e.x+t.popover.offsetWidth/2>i-a?t.popover.style.left=i-t.popover.offsetWidth-a+"px":e.x-t.popover.offsetWidth/2<0?t.popover.style.left=0:t.popover.style.left=e.x-t.popover.offsetWidth/2+"px",e.y+t.popover.offsetHeight+5>s-r-n?(t.popover.classList.add("reverse-direction"),t.popover.style.top=e.y-e.height-t.popover.offsetHeight-5+"px"):(t.popover.classList.remove("reverse-direction"),t.popover.style.top=e.y+5+"px")}function cs(t){t.popover.classList.remove("is-visible")}var hs={NOTES:ns,showPopoverWithLatex:function(t,e,s){if(!e||0===e.length)return void cs(t);const i=e,a=Mt(i),r=function(t,e){const s=Me(t,"math",null,e.config.macros),i=Z(se({mathstyle:"displaystyle",macros:e.config.macros},s),"ML__base"),a=Z("","ML__strut");a.setStyle("height",i.height,"em");const r=Z("","ML__strut--bottom");return r.setStyle("height",i.height+i.depth,"em"),r.setStyle("vertical-align",-i.depth,"em"),Z([a,r,i],"ML__mathlive").toMarkup()}(a&&a.template||e,t),n=function(t){let e=ns[t]||"";return Array.isArray(e)&&(e=e.join("<br>")),e}(i),o=Pe.forCommand(i);let l=s?'<div class="ML__popover__prev-shortcut" role="button" aria-label="Previous suggestion"><span><span>&#x25B2;</span></span></div>':"";l+='<span class="ML__popover__content" role="button">',l+='<div class="ML__popover__command">'+r+"</div>",n&&(l+='<div class="ML__popover__note">'+n+"</div>"),o&&(l+='<div class="ML__popover__shortcut">'+o+"</div>"),l+="</span>",l+=s?'<div class="ML__popover__next-shortcut" role="button" aria-label="Next suggestion"><span><span>&#x25BC;</span></span></div>':"",os(t,l);let c=t.popover.getElementsByClassName("ML__popover__content");c&&c.length>0&&t._attachButtonHandlers(c[0],["complete",{acceptSuggestion:!0}]),c=t.popover.getElementsByClassName("ML__popover__prev-shortcut"),c&&c.length>0&&t._attachButtonHandlers(c[0],"previousSuggestion"),c=t.popover.getElementsByClassName("ML__popover__next-shortcut"),c&&c.length>0&&t._attachButtonHandlers(c[0],"nextSuggestion")},showPopover:os,hidePopover:cs,updatePopoverPosition:function t(e,s){if(e.element&&e.element.mathfield===e&&e.popover.classList.contains("is-visible"))if(s&&s.deferred)window.requestAnimationFrame(()=>t(e));else if(e.mathlist.anchor()&&"command"===e.mathlist.anchor().type){const t=e._getCaretPosition();t&&ls(e,t)}else cs(e)}};function ms(t){const e=ms.locale.substring(0,2);let s="";return ms.strings[ms.locale]&&(s=ms.strings[ms.locale][t]),!s&&ms.strings[e]&&(s=ms.strings[e][t]),s||(s=ms.strings.en[t]),s||(s=t),s}ie.prototype.toLatex=function(t){if(!(t=void 0!==t&&t)&&this.latex)return this.latex;let e="",s=0,i=0,a=0;const r=this.symbol,n=(e,s)=>function(t,e,s){let i="";return Array.isArray(e)?i=function(t,e,s){if(0===e.length)return"";if("first"===e[0].type){if(1===e.length)return"";e=e.slice(1)}return 0===e.length?"":E(e,"cssClass").map(e=>{const i=E(e,"color").map(e=>function(t){const e=[];let s=[],i="NONE";return t.forEach(t=>{"first"!==t.type&&(t.mode!==i?(s.length>0&&e.push(s),s=[t],i=t.mode):s.push(t))}),s.length>0&&e.push(s),e}(e).map(e=>function(t,e,s){return B[e[0].mode]&&B[e[0].mode].emitLatexRun?B[e[0].mode].emitLatexRun(t,e,s):""}(t,e,s)).join("")).join("");return!e[0].cssClass||t&&t.cssClass===e[0].cssClass?i:"ML__boldsymbol"===e[0].cssClass?"\\boldsymbol{"+i+"}":"ML__emph"===e[0].cssClass?"\\emph{"+i+"}":"\\class{"+e[0].cssClass+"}{"+i+"}"}).join("")}(t,e,s):"number"==typeof e||"boolean"==typeof e?i=e.toString():"string"==typeof e?i=e.replace(/\s/g,"~"):e&&"function"==typeof e.toLatex&&(i=e.toLatex(s)),i}(e,s,t);switch(this.type){case"group":r?e=t?`${r}{${n(this,this.body)}}`:this.latex:(e=this.latexOpen||(this.cssId||this.cssClass?"":"{"),this.cssId&&(e+="\\cssId{"+this.cssId+"}{"),"ML__emph"===this.cssClass?e+=`\\emph{${n(this,this.body)}`:(this.cssClass&&(e+="\\class{"+this.cssClass+"}{"),e+=n(this,this.body),this.cssClass&&(e+="}")),this.cssId&&(e+="}"),e+=this.latexClose||(this.cssId||this.cssClass?"":"}"));break;case"array":if(e+="\\begin{"+this.env.name+"}","array"===this.env.name){if(e+="{",this.colFormat)for(a=0;a<this.colFormat.length;a++)this.colFormat[a].align?e+=this.colFormat[a].align:this.colFormat[a].rule&&(e+="|");e+="}"}for(i=0;i<this.array.length;i++){for(s=0;s<this.array[i].length;s++)s>0&&(e+=" & "),e+=n(this,this.array[i][s]);i<this.array.length-1&&(e+=" \\\\ ")}e+="\\end{"+this.env.name+"}";break;case"root":e=n(this,this.body);break;case"leftright":this.inner?(e+="\\left"+(this.leftDelim||"."),this.leftDelim&&this.leftDelim.length>1&&(e+=" "),e+=n(this,this.body),e+="\\right"+(this.rightDelim||"."),this.rightDelim&&this.rightDelim.length>1&&(e+=" ")):t&&"("===this.leftDelim&&")"===this.rightDelim?e+=`(${n(this,this.body)})`:(e+="\\mleft"+(this.leftDelim||"."),this.leftDelim&&this.leftDelim.length>1&&(e+=" "),e+=n(this,this.body),e+="\\mright"+(this.rightDelim||"."),this.rightDelim&&this.rightDelim.length>1&&(e+=" "));break;case"delim":case"sizeddelim":e+=r+"{"+this.delim+"}";break;case"rule":e+=r,this.shift&&(e+=`[${n(this,this.shift)}em]`),e+=`{${n(this,this.width)}em}{${n(this,this.height)}em}`;break;case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":e+='\\char"'===r?this.latex+" ":wt(r,null,this,n);break;case"mop":"​"!==this.body&&("\\mathop"===r||"\\operatorname"===r?e+=r+"{"+n(this,this.body)+"}":(e+=r,/^\\.*[a-zA-Z0-9]$/.test(r)&&(e+=" "))),this.explicitLimits&&("limits"===this.limits&&(e+="\\limits "),"nolimits"===this.limits&&(e+="\\nolimits "));break;case"spacing":e+=r,"\\hspace"===r||"\\hspace*"===r?(e+="{",this.width?e+=this.width+"em":e+="0em",e+="}"):(e+=" ",this.width&&(e+=this.width+"em "));break;case"enclose":if(e+=r,"\\enclose"===r){e+="{";let t="";for(const s in this.notation)Object.prototype.hasOwnProperty.call(this.notation,s)&&this.notation[s]&&(e+=t+s,t=" ");e+="}";let s="";t="",this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(s+=t+'mathbackground="'+Bt(this.backgroundcolor)+'"',t=","),this.shadow&&"auto"!==this.shadow&&(s+=t+'shadow="'+this.shadow+'"',t=","),1!==this.strokeWidth||"solid"!==this.strokeStyle?(s+=t+this.borderStyle,t=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(s+=t+'mathcolor="'+Bt(this.strokeColor)+'"',t=","),s&&(e+=`[${s}]`)}e+=`{${n(this,this.body)}}`;break;case"mathstyle":e+="\\"+this.mathstyle+" ";break;case"space":e+=this.symbol;break;case"placeholder":e+="\\placeholder{"+(this.value||"")+"}";break;case"first":case"command":case"msubsup":break;case"error":e+=this.latex;break;case"":break;default:e=wt(r,parent,this,n),e||(e+=r)}if(this.superscript){let t=n(this,this.superscript);1===t.length?("′"===t?t="\\prime ":"″"===t&&(t="\\doubleprime "),e+="^"+t):e+="^{"+t+"}"}if(this.subscript){const t=n(this,this.subscript);1===t.length?e+="_"+t:e+="_{"+t+"}"}return e},ms.plural=function(t,e,s){(s=s||{}).type=s.type||"cardinal";const i=ms.locale.substring(0,2),a="ordinal"===s.type?ms.ordinal:ms.cardinal;let r,n="ordinal"===s.type?ms._ordinalPluralCategories.indexOf(a.select(t)):ms._cardinalPluralCategories.indexOf(a.select(t));return ms.strings[ms.locale]&&(r=ms.strings[ms.locale][e]),!r&&ms.strings[i]&&(r=ms.strings[i][e]),r||(r=ms.strings.en[e],r||(r=e),n="ordinal"===s.type?ms._ordinalPluralCategories.indexOf(ms._ordinalEnglish.select(t)):ms._cardinalPluralCategories.indexOf(ms._cardinalEnglish.select(t))),r.split(";")[n]||r.split(";")[0]},ms.merge=function(t,e){if(t&&e){const s=ms._locale;ms.locale=t,ms.strings[t]={...ms.strings[t],...e},ms.locale=s}else t&&!e&&(e=t,Object.keys(e).forEach(t=>ms.merge(t,e[t])))},Object.defineProperty(ms,"locale",{set(t){ms._locale=t,ms._ordinal=null,ms._cardinal=null},get:()=>(ms._locale||(ms._locale="undefined"==typeof navigator?"en":navigator.language.slice(0,5)),ms._locale)}),Object.defineProperty(ms,"ordinal",{get:()=>(ms._ordinal||(ms._ordinalEnglish=new Intl.PluralRules("en",{type:"ordinal"}),ms._ordinalEnglishPluralCategories=ms._ordinalEnglish.resolvedOptions().pluralCategories,ms._ordinal=new Intl.PluralRules(ms.locale,{type:"ordinal"}),ms._ordinalPluralCategories=ms._ordinal.resolvedOptions().pluralCategories),ms._ordinal)}),Object.defineProperty(ms,"cardinal",{get:()=>(ms._cardinal||(ms._cardinalEnglish=new Intl.PluralRules("en",{type:"cardinal"}),ms._cardinalEnglishPluralCategories=ms._cardinalEnglish.resolvedOptions().pluralCategories,ms._cardinal=new Intl.PluralRules(ms.locale,{type:"cardinal"}),ms._cardinaPluralCategories=ms._ordinal.resolvedOptions().pluralCategories),ms._cardinal)}),ms.strings={en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Symbols and Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo"},ar:{"keyboard.tooltip.functions":"مهام","keyboard.tooltip.greek":"حروف يونانية","keyboard.tooltip.command":"حالة تلقي الأوامر اللاتك","keyboard.tooltip.numeric":"الرقمية","keyboard.tooltip.roman":"رموز الاحرف الرومانية","tooltip.copy to clipboard":"نسخ إلى الحافظة","tooltip.redo":"الإعادة","tooltip.toggle virtual keyboard":"تبديل لوحة المفاتيح الإفتراضية","tooltip.undo":"إلغاء"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"Symbole und römische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen"},el:{"keyboard.tooltip.functions":"συναρτήσεις","keyboard.tooltip.greek":"ελληνικά γράμματα","keyboard.tooltip.command":"Λειτουργία εντολών LaTeX","keyboard.tooltip.numeric":"Αριθμητικός","keyboard.tooltip.roman":"Σύμβολα και ρωμαϊκά γράμματα","tooltip.copy to clipboard":"Αντιγραφή στο πρόχειρο","tooltip.redo":"Ξανακάνω","tooltip.toggle virtual keyboard":"Εναλλαγή εικονικού πληκτρολογίου","tooltip.undo":"Ξεκάνω"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Numérico","keyboard.tooltip.roman":"Símbolos y letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer"},fa:{"keyboard.tooltip.functions":"توابع","keyboard.tooltip.greek":"حروف یونانی","keyboard.tooltip.command":"حالت دستور لاتک","keyboard.tooltip.numeric":"عددی","keyboard.tooltip.roman":"علائم و حروف لاتین","tooltip.copy to clipboard":"کپی به کلیپبورد","tooltip.redo":"بازگشت به بعد","tooltip.toggle virtual keyboard":"نمایش/نهفتن کیبورد مجازی","tooltip.undo":"بازگشت به قبل"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Numérique","keyboard.tooltip.roman":"Lettres et symboles romains","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rétablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalità di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Simboli e lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare"},ja:{"keyboard.tooltip.functions":"関数","keyboard.tooltip.greek":"ギリシャ文字","keyboard.tooltip.command":"LaTeXコマンドモード","keyboard.tooltip.numeric":"数値","keyboard.tooltip.roman":"記号とローマ字","tooltip.copy to clipboard":"クリップボードにコピー","tooltip.redo":"やり直し","tooltip.toggle virtual keyboard":"仮想キーボードの切り替え","tooltip.undo":"元に戻す"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb poleceń LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Symbole i litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywróć","tooltip.toggle virtual keyboard":"Przełącz wirtualną klawiaturę","tooltip.undo":"Cofnij"},ru:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.greek":"Греческие буквы","keyboard.tooltip.command":"Режим командной строки LaTeX","keyboard.tooltip.numeric":"числовой","keyboard.tooltip.roman":"Символы и римские буквы","tooltip.copy to clipboard":"Скопировать в буфер обмена","tooltip.redo":"переделывать","tooltip.toggle virtual keyboard":"Переключить виртуальную клавиатуру","tooltip.undo":"расстегивать"}};const ds={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman","symbols"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},command:{tooltip:"keyboard.tooltip.command",command:"enterCommandMode",label:"<svg><use xlink:href='#svg-command' /></svg>",layers:["lower-command","upper-command","symbols-command"]},style:{tooltip:"keyboard.tooltip.style",layer:"style",label:"<b>b</b><i>i</i>𝔹"}},ps={"\\varphi ":{label:"&Phi;",insert:"\\Phi "},"\\varsigma ":{label:"&Sigma;",insert:"\\Sigma "},"\\epsilon ":{label:"&#x0190;",insert:'{\\char"0190}'},"\\rho ":{label:"&#x3A1",insert:'{\\char"3A1}'},"\\tau ":{label:"&#x3A4;",insert:'{\\char"3A4}'},"\\upsilon ":{label:"&Upsilon;",insert:"\\Upsilon "},"\\theta ":{label:"&Theta;",insert:"\\Theta "},"\\iota ":{label:"&Iota;",insert:'{\\char"399}'},"\\omicron ":{label:"&#x039F;",insert:'{\\char"39F}'},"\\pi ":{label:"&Pi;",insert:"\\Pi "},"\\alpha ":{label:"&Alpha;",insert:'{\\char"391}'},"\\sigma ":{label:"&Sigma;",insert:"\\Sigma "},"\\delta ":{label:"&Delta;",insert:"\\Delta "},"\\phi ":{label:"&#x03a6;",insert:"\\Phi "},"\\gamma ":{label:"&Gamma;",insert:"\\Gamma "},"\\eta ":{label:"&Eta;",insert:'{\\char"397}'},"\\xi ":{label:"&Xi;",insert:"\\Xi "},"\\kappa ":{label:"&Kappa;",insert:'{\\char"39A}'},"\\lambda ":{label:"&Lambda;",insert:"\\Lambda "},"\\zeta ":{label:"&Zeta;",insert:'{\\char"396}'},"\\chi ":{label:"&Chi;",insert:'{\\char"3A7}'},"\\psi ":{label:"&Psi;",insert:"\\Psi "},"\\omega ":{label:"&Omega;",insert:"\\Omega "},"\\beta ":{label:"&Beta;",insert:'{\\char"392}'},"\\nu ":{label:"&Nu;",insert:'{\\char"39D}'},"\\mu ":{label:"&Mu;",insert:'{\\char"39C}'}},us={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",classes:"box"},{latex:"\\cdots",aside:"center ellipsis",classes:"box"},{latex:"\\ldotp",aside:"low dot",classes:"box"},{latex:"\\ldots",aside:"low ellipsis",classes:"box"},{latex:"\\vdots",aside:"",classes:"box"},{latex:"\\ddots",aside:"",classes:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",classes:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",classes:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\nless","\\nleq","\\precsim","\\lesssim","\\lessgtr","\\prec","\\preccurlyeq","\\lessdot","\\nprec"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\ngtr","\\ngeq","\\succsim","\\gtrsim","\\gtrless","\\succ","\\succcurlyeq","\\gtrdot","\\nsucc"],set:["\\in","\\owns","\\subset","\\nsubset","\\supset","\\nsupset"],"!set":["\\notin","\\backepsilon"],subset:[],supset:[],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\ln_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",classes:"small"},{latex:"\\int",classes:"small"},{latex:"\\smallint",classes:"small"},{latex:"\\iint",classes:"small"},{latex:"\\iiint",classes:"small"},{latex:"\\oint",classes:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",classes:"small"},{latex:"\\frac{\\partial}{\\partial x}",classes:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\N",aside:"set of natural numbers"}],p:[{latex:"\\P",aside:"set of primes"}],q:[{latex:"\\Q",aside:"set of rational numbers"}],r:[{latex:"\\R",aside:"set of real numbers"}],z:[{latex:"\\Z",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",classes:"small"},{latex:"g(#?)",classes:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>⁻³⧸₁₈ em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>³⧸₁₈ em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>⁴⧸₁₈ em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>⁵⧸₁₈ em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"⅓ em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"½ em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>',command:'"deleteAll"'}],"->|":[]};let fs={};const gs={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='$$\\exponentialE$$' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-insert='$$\\imaginaryI$$' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='x2' data-insert='$$#@^{2}$$'><span><i>x</i>&thinsp;²</span></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='$$#@^{#?}$$'><span><i>x</i><sup>&thinsp;<small>&#x2b1a;</small></sup></span></li>\n                <li class='keycap tex' data-alt-keys='sqrt' data-insert='$$\\sqrt{#0}$$' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='int' data-latex='\\int_0^\\infty'><span></span></li>\n                <li class='keycap tex' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols'>&infin;≠</li>\n                <li class='keycap' data-alt-keys=','>,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols'>&infin;≠</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='set' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!set' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='supset' data-insert='\\supset '>&#x2283;</li>\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-insert='$$^{\\prime} $$'><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='\\subseteq '>&#x2286;</li>\n                <li class='keycap tex' data-insert='\\supseteq '>&#x2287;</li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='$$\\vec{#@}$$' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='$$\\bar{#@}$$' data-latex='\\bar{#?}' data-aside='bar'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='$$\\lvert #@ \\rvert $$' data-latex='\\lvert #? \\rvert' data-aside='abs'></li>\n                <li class='keycap tex' data-insert='\\ast '>&#x2217;<aside>asterisk</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-roman'>abc</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"{\\\\char\\\"391}\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"0190}'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A1}'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A4}'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"399}'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39F}'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='{\\char\"391}'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"397}'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39A}'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='{\\char\"396}'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A7}'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"392}'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39D}'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39C}'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-command":"\n        <div class='rows'>\n            <ul><row name='lower-1' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-2' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-3' class='tt' shift-layer='upper-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'>01#</li>\n                <li class='keycap tt' data-shifted='[' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"[\"]'>{</li>\n                <li class='keycap tt' data-shifted=']' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"]\"]'>}</li>\n                <li class='keycap tt' data-shifted='(' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"(\"]'>^</li>\n                <li class='keycap tt' data-shifted=')' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \")\"]'>_</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-command":"\n        <div class='rows'>\n            <ul><row name='upper-1' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-2' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-3' class='tt' shift-layer='lower-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'01#</li>\n                <li class='keycap tt'>[</li>\n                <li class='keycap tt'>]</li>\n                <li class='keycap tt'>(</li>\n                <li class='keycap tt'>)</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","symbols-command":"\n        <div class='rows'>\n            <ul><li class='keycap tt'>1</li><li class='keycap tt'>2</li><li class='keycap tt'>3</li><li class='keycap tt'>4</li><li class='keycap tt'>5</li><li class='keycap tt'>6</li><li class='keycap tt'>7</li><li class='keycap tt'>8</li><li class='keycap tt'>9</li><li class='keycap tt'>0</li></ul>\n            <ul><li class='keycap tt'>!</li><li class='keycap tt'>@</li><li class='keycap tt'>#</li><li class='keycap tt'>$</li><li class='keycap tt'>%</li><li class='keycap tt'>^</li><li class='keycap tt'>&</li><li class='keycap tt'>*</li><li class='keycap tt'>+</li><li class='keycap tt'>=</li></ul>\n            <ul>\n                <li class='keycap tt'>\\</li>\n                <li class='keycap tt'>|</li>\n                <li class='keycap tt'>/</li>\n                <li class='keycap tt'>`</li>\n                <li class='keycap tt'>;</li>\n                <li class='keycap tt'>:</li>\n                <li class='keycap tt'>?</li>\n                <li class='keycap tt'>'</li>\n                <li class='keycap tt'>\"</li>\n                <li class='action font-glyph bottom right'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-command'>abc</li>\n                <li class='keycap tt'>&lt;</li>\n                <li class='keycap tt'>&gt;</li>\n                <li class='keycap tt'>~</li>\n                <li class='keycap tt'>,</li>\n                <li class='keycap tt'>.</li>\n                <li class='keycap' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{lcm}(#?)$$' data-latex='\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{ceil}(#?)$$' data-latex='\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\lim_{n\\to\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\int$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{abs}(#?)$$' data-latex='\\operatorname{abs}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\cos'></li>\n                <li class='fnbutton' data-insert='\\cos^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln_{10}'></li>\n                <li class='fnbutton' data-insert='$$10^{#?}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{gcd}(#?)$$' data-latex='\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{floor}(#?)$$' data-latex='\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\sum_{n\\mathop=0}^{\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\int_{0}^{\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{sign}(#?)$$' data-latex='\\operatorname{sign}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\tan'></li>\n                <li class='fnbutton' data-insert='\\tan^{-1}'></li>\n                <li class='fnbutton' data-insert='$$\\log_{#?}$$'></li>\n                <li class='fnbutton' data-insert='$$\\sqrt[#?]{#0}$$'></li>\n                <li class='bigfnbutton' data-insert='$$#0 \\mod$$' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{round}(#?) $$' data-latex='\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\prod_{n\\mathop=0}^{\\infty}$$' data-latex='{\\tiny \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='$$\\frac{\\differentialD #0}{\\differentialD x}$$'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='$$^{#?} $$' data-latex='x^{#?} '></li>\n                <li class='fnbutton' data-insert='$$_{#?} $$' data-latex='x_{#?} '></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",style:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size3\"}]' data-latex='\\scriptsize\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size5\"}]' data-latex='\\scriptsize\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size9\"}]' data-latex='\\huge\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\langle' data-command='[\"insert\", \"\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='$$\\emph{#?} $$' data-latex='\\text{\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\mathfrak{Az}'></li>\n            </ul>\n        </div>"};function ys(t,e,s){const i=Me(t=t.replace(/(^|[^\\])#@/g,"$1#?"),"math",e,s.config.macros),a=Z(se({mathstyle:"displaystyle",macros:s.config.macros},i),"ML__base"),r=Z("","ML__strut");r.setStyle("height",a.height,"em");const n=Z("","ML__strut--bottom");return n.setStyle("height",a.height+a.depth,"em"),n.setStyle("vertical-align",-a.depth,"em"),Z([r,n,a],"ML__mathlive").toMarkup()}function bs(t,e,s){let i="<div class='left'>";const a=e.replace(/\s+/g," ").split(" ");if(a.length>1){const e=Object.assign({},ds,t.config.customVirtualKeyboards||{});for(const t of a){if(!e[t])break;i+="<div class='",t===s?i+="selected ":e[t].command?i+="action ":i+="layer-switch ",i+=(e[t].classes||"")+"'",e[t].tooltip&&(i+="data-tooltip='"+ms(e[t].tooltip)+"' ",i+="data-placement='top' data-delay='1s'"),t!==s&&(e[t].command&&(i+="data-command='\""+e[t].command+"\"'"),e[t].layer&&(i+="data-layer='"+e[t].layer+"'")),i+=">"+e[t].label+"</div>"}}return i+="</div>",i+=`\n        <div class='right'>\n            <div class='action'\n                data-command='"copyToClipboard"'\n                data-tooltip='${ms("tooltip.copy to clipboard")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-copy' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='"undo"'\n                data-tooltip='${ms("tooltip.undo")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-undo' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='"redo"'\n                data-tooltip='${ms("tooltip.redo")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-redo' /></svg>\n            </div>\n        </div>\n    `,"<div class='keyboard-toolbar' role='toolbar'>"+i+"</div>"}function xs(t,e,s){for(let i=0;i<e.length;++i){const a=e[i];a.getAttribute("data-latex")?a.innerHTML=ys(a.getAttribute("data-latex").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\tiny \\char"2B1A}}'},t):""===a.innerHTML&&a.getAttribute("data-insert")?a.innerHTML=ys(a.getAttribute("data-insert").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\tiny \\char"2B1A}}'},t):a.getAttribute("data-content")&&(a.innerHTML=a.getAttribute("data-content").replace(/&quot;/g,'"')),a.getAttribute("data-aside")&&(a.innerHTML+="<aside>"+a.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),a.getAttribute("data-classes")&&a.classList.add(a.getAttribute("data-classes"));let r,n=a.getAttribute("data-insert");if(n&&(n=n.replace(/&quot;/g,'"')),n&&ps[n]&&(a.setAttribute("data-shifted",ps[n].label),a.setAttribute("data-shifted-command",JSON.stringify(["insertAndUnshiftKeyboardLayer",ps[n].insert]))),r=a.getAttribute("data-command")?JSON.parse(a.getAttribute("data-command")):a.getAttribute("data-insert")?["insert",a.getAttribute("data-insert"),{focus:!0,feedback:!0,mode:"math",format:"auto",resetStyle:!0}]:a.getAttribute("data-latex")?["insert",a.getAttribute("data-latex"),{focus:!0,feedback:!0,mode:"math",format:"auto",resetStyle:!0}]:["typedText",a.getAttribute("data-key")||a.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}],s&&(r=[s,r]),a.getAttribute("data-alt-keys")){const t=fs[a.getAttribute("data-alt-keys")];t&&(r={default:r,pressAndHoldStart:["showAlternateKeys",a.getAttribute("data-alt-keys"),t],pressAndHoldEnd:"hideAlternateKeys"})}t._attachButtonHandlers(a,r)}}function vs(t,e){const s={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},i=s[t.config.virtualKeyboardLayout]?s[t.config.virtualKeyboardLayout]:s.qwerty;let a,r=e;r=r.replace(/<arrows\/>/g,"\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToPreviousChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-left\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToPreviousChar\"]'>\n            <svg><use xlink:href='#svg-arrow-left' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-right\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToNextChar\"]'>\n            <svg><use xlink:href='#svg-arrow-right' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextPlaceholder\"]'>\n        <svg><use xlink:href='#svg-tab' /></svg></li>");let n=r.match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;n;){a="";const t=n[2].match(/[a-zA-Z][a-zA-Z0-9-]*=(['"])(.*?)\1/g),e={};for(const s of t){const t=s.match(/([a-zA-Z][a-zA-Z0-9-]*)=(['"])(.*?)\2/);e[t[1]]=t[3]}let o=i[e.name];if(o||(o=s.qwerty[e.name]),o)for(const t of o){let s=e.class||"";s&&(s=" "+s),"~"===t?(a+="<li class='action font-glyph bottom right ",a+=o.length-(o.match(/ /g)||[]).length/2==10?"w10":"w15",a+='\' data-shifted=\'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deletePreviousChar"]\'\n                        >&#x232b;</li>'):" "===t?a+="<li class='separator w5'></li>":"^"===t?a+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+e["shift-layer"]+"'>&#x21e7;</li>":"/"===t?a+="<li class='keycap"+s+"' data-alt-keys='/' data-insert='\\frac{#0}{#?}'>&divide;</li>":"*"===t?a+="<li class='keycap"+s+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===t?a+="<li class='keycap"+s+"' data-alt-keys='-' data-key='-' data-alt-keys='-'>&#x2212;</li>":/tt/.test(s)?a+="<li class='keycap"+s+"' data-alt-keys='"+t+'\' data-command=\'["typedText","'+t+'",{"commandMode":true, "focus":true, "feedback":true}]\'>'+t+"</li>":a+="<li class='keycap"+s+"' data-alt-keys='"+t+"'>"+t+"</li>"}r=r.replace(new RegExp(n[1]+n[2]+n[3]),a),n=r.match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return r}var ks={make:function(t,e){let s='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n            <symbol id="svg-command" viewBox="0 0 640 512">\n                <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n            </symbol>\n\n            <symbol id="svg-undo" viewBox="0 0 512 512">\n                <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n            </symbol>\n            <symbol id="svg-redo" viewBox="0 0 512 512">\n                <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-arrow-left" viewBox="0 0 192 512">\n                <path d="M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z"/>\n            </symbol>\n            <symbol id="svg-arrow-right" viewBox="0 0 192 512">\n                    <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z"/>\n            </symbol>\n            <symbol id="svg-tab" viewBox="0 0 448 512">\n                    <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-copy" viewBox="0 0 448 512">\n                <path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z"/>\n            </symbol>\n            <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n                <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n            </symbol>\n            <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n                <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n            </symbol>\n            <symbol id="svg-trash" viewBox="0 0 448 512">\n                <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n            </symbol>\n        </svg>\n        ';us["foreground-color"]=[];for(const t of qt)us["foreground-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+t+'"></span>',command:'["applyStyle",{"color":"'+t+'"}]'});us["background-color"]=[];for(const t of Ft)us["background-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+t+'"></span>',command:'["applyStyle",{"backgroundColor":"'+t+'"}]'});fs={...us},Object.keys(fs).forEach(t=>{fs[t]=fs[t].slice()});const i="abcdefghijklmnopqrstuvwxyz";for(let t=0;t<26;t++){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[t];fs[e]||(fs[e]=[]),fs[e].unshift({latex:"\\mathbb{"+e+"}",aside:"blackboard",insert:"\\mathbb{"+e+"}"}),fs[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),fs[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),fs[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),fs[e].unshift({latex:"\\mathcal{"+e+"}",aside:"script",insert:"\\mathcal{"+e+"}"}),fs[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"}),fs[e].unshift({latex:"\\mathbb{"+i[t]+"}",aside:"blackboard",insert:"\\mathbb{"+i[t]+"}"}),fs[e].unshift({latex:"\\mathbf{"+i[t]+"}",aside:"bold",insert:"\\mathbf{"+i[t]+"}"}),fs[e].unshift({latex:"\\mathsf{"+i[t]+"}",aside:"sans",insert:"\\mathsf{"+i[t]+"}"}),fs[e].unshift({latex:"\\mathcal{"+i[t]+"}",aside:"script",insert:"\\mathcal{"+i[t]+"}"}),fs[e].unshift({latex:"\\mathfrak{"+i[t]+"}",aside:"fraktur",insert:"\\mathfrak{"+i[t]+"}"})}for(let t=0;t<=26;t++){const e=i[t];fs[e]||(fs[e]=[]),fs[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathbb{"+e+"}"}),fs[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),fs[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),fs[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}for(let t=0;t<10;t++){const e="0123456789"[t];fs[e]||(fs[e]=[]),fs[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),fs[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),fs[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),fs[e].unshift({latex:"\\mathcal{"+e+"}",aside:"script",insert:"\\mathcal{"+e+"}"}),fs[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}let a=t.config.virtualKeyboards;a||(a="all"),a=a.replace(/\ball\b/i,"numeric roman greek functions command");const r=Object.assign({},gs,t.config.customVirtualKeyboardLayers||{}),n=Object.assign({},ds,t.config.customVirtualKeyboards||{}),o=a.replace(/\s+/g," ").split(" ");for(const e of o){if(!n[e])break;let i=n[e].layers||[];n[e].layer&&i.push(n[e].layer),i=Array.from(new Set(i));for(const n of i){if(!r[n])break;if("object"==typeof r[n]){let t="";if(r[n].styles&&(t+=`<style>${r[n].styles}</style>`),r[n].backdrop&&(t+=`<div class='${r[n].backdrop}'>`),r[n].container&&(t+=`<div class='${r[n].container}'>`),r[n].rows){t+="<div class='rows'>";for(const e of r[n].rows){t+="<ul>";for(const s of e)t+="<li",s.class&&(t+=` class="${s.class}"`),s.key&&(t+=` data-key="${s.key}"`),s.command&&("string"==typeof s.command?t+=` data-command='"${s.command}"'`:(t+=" data-command='",t+=JSON.stringify(s.command),t+="'")),s.insert&&(t+=` data-insert="${s.insert}"`),s.latex&&(t+=` data-latex="${s.latex}"`),s.aside&&(t+=` data-aside="${s.aside}"`),s.altKeys&&(t+=` data-alt-keys="${s.altKeys}"`),s.shifted&&(t+=` data-shifted="${s.shifted}"`),s.shiftedCommand&&(t+=` data-shifted-command="${s.shiftedCommand}"`),t+=`>${s.label?s.label:""}</li>`;t+="</ul>"}t+="</div>",r[n].container&&(t+="</div'>"),r[n].backdrop&&(t+="</div'>")}r[n]=t}s+="<div tabindex=\"-1\" class='keyboard-layer' data-layer='"+n+"'>",s+=bs(t,a,e);const i="function"==typeof r[n]?r[n]():r[n];s+=vs(t,i),s+="</div>"}}const l=document.createElement("div");l.className="ML__keyboard",e?l.classList.add(e):t.config.virtualKeyboardTheme?l.classList.add(t.config.virtualKeyboardTheme):/android|cros/i.test(navigator.userAgent)&&l.classList.add("material"),l.innerHTML=s,xs(t,l.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton"));const c=l.getElementsByClassName("layer-switch");for(let e=0;e<c.length;++e)c[e].classList.contains("shift")?t._attachButtonHandlers(c[e],{pressed:["shiftKeyboardLayer","shift"],default:["switchKeyboardLayer",c[e].getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):t._attachButtonHandlers(c[e],{default:["switchKeyboardLayer",c[e].getAttribute("data-layer")]});const h=l.getElementsByClassName("keyboard-layer");return Array.from(h).forEach(t=>{t.addEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation()}),t.addEventListener("touchstart",t=>{t.preventDefault(),t.stopPropagation()})}),h[0].classList.add("is-visible"),window.addEventListener("mouseup",(function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()})),window.addEventListener("blur",(function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()})),window.addEventListener("touchend",(function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()})),window.addEventListener("touchcancel",(function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()})),l},makeKeycap:xs};const ws={"−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega"},Ss={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\langle":"(:","\\rangle":":)"};function Ms(t,e){if(!t)return"";if(Array.isArray(t)){let e="";if(0===t.length)return"";if("first"===t[0].type&&t.shift(),"text"===t[0].mode){let s=0;for(e='"';t[s]&&"text"===t[s].mode;)e+=t[s].body,s++;e+='"'+Ms(t.slice(s))}else{let s=0;for(;t[s]&&"math"===t[s].mode;)e+=Ms(t[s]),s++;e+=Ms(t.slice(s))}return e.trim()}if("text"===t.mode)return'"'+t.body+'"';let s="";const i=t.symbol;let a;switch(t.type){case"group":case"root":s=Ms(t.body);break;case"array":break;case"genfrac":(t.leftDelim||t.rightDelim)&&(s+="."!==t.leftDelim&&t.leftDelim?t.leftDelim:"{:"),t.hasBarLine?(s+="(",s+=Ms(t.numer),s+=")/(",s+=Ms(t.denom),s+=")"):(s+="("+Ms(t.numer)+"),",s+="("+Ms(t.denom)+")"),(t.leftDelim||t.rightDelim)&&(s+="."!==t.rightDelim&&t.rightDelim?t.rightDelim:"{:");break;case"surd":t.index?s+="root("+Ms(t.index)+")("+Ms(t.body)+")":s+="sqrt("+Ms(t.body)+")";break;case"leftright":s+="."!==t.leftDelim&&t.leftDelim?t.leftDelim:"{:",s+=Ms(t.body),s+="."!==t.rightDelim&&t.rightDelim?t.rightDelim:"{:";break;case"sizeddelim":case"delim":case"accent":break;case"line":case"overlap":case"overunder":break;case"mord":s=ws[i]||i||("string"==typeof t.body?t.body:""),"\\"===s[0]&&(s+=""),a=i?i.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null,a?s=String.fromCharCode(parseInt("0x"+a[1])):s.length>0&&"\\"===s.charAt(0)&&(s="string"==typeof t.body?t.body.charAt(0):t.symbol);break;case"mbin":case"mrel":case"textord":case"minner":s=i&&ws[i]?ws[i]:i&&Ss[i]?Ss[i]:t.body;break;case"mopen":case"mclose":s+=t.body;break;case"mpunct":s=Ss[i]||i;break;case"mop":"​"!==t.body&&(s="",s+="\\operatorname"===i?Ms(t.body):t.body||i,s+=" ");break;case"mathstyle":case"box":case"spacing":case"enclose":break;case"space":s=" "}if(t.subscript){s+="_";const e=Ms(t.subscript);e.length>1&&!/^(-)?\d+(\.\d*)?$/.test(e)?s+="("+e+")":s+=e}if(t.superscript){s+="^";const e=Ms(t.superscript);e.length>1&&!/^(-)?\d+(\.\d*)?$/.test(e)?s+="("+e+")":s+=e}return s}const As={"\\pm":"&PlusMinus;","\\times":"&times;","\\colon":":","\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrace":"{","\\rbrace":"}","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};function _s(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Cs(t,e){return t&&e.generateID?' extid="'+t+'"':""}function Ls(t,e,s){let i=!1;e=e||t.atoms.length;let a="",r="",n=-1,o=-1;const l=t.atoms[t.index];if(t.index<e&&("mord"===l.type||"textord"===l.type)&&"0123456789,.".indexOf(l.body)<0&&(r=l.toMathML(s),l.superscript&&(n=t.index),l.subscript&&(o=t.index),t.index+=1),r.length>0){if(i=!0,zs(t)&&(n=t.index,t.index+=1),Ts(t)&&(o=t.index,t.index+=1),n>=0&&o>=0)a="<msubsup>"+r,a+=Es(t.atoms[o].subscript,0,0,s).mathML,a+=Es(t.atoms[n].superscript,0,0,s).mathML,a+="</msubsup>";else if(n>=0){if(a="<msup>"+r,zs(t)){const e=Es(t.atoms[n].superscript,0,0,s).mathML,i=Es(t.atoms[n+1].superscript,0,0,s).mathML;a+="<mi>′</mi>"!==e&&"<mi>&#x2032;</mi>"!==e||"<mi>′</mi>"!==i&&"<mi>&#x2032;</mi>"!==i?"<mi>′</mi>"===e||"<mi>&#x2032;</mi>"===e?"<mi>&#x2032;</mi>":e:"<mi>&#x2033;</mi>"}else a+=Es(t.atoms[n].superscript,0,0,s).mathML;a+="</msup>"}else o>=0?(a="<msub>"+r,a+=Es(t.atoms[o].subscript,0,0,s).mathML,a+="</msub>"):a=r;"mi"!==t.lastType&&"mn"!==t.lastType&&"mtext"!==t.lastType&&"fence"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(a)||(a="<mo>&InvisibleTimes;</mo>"+a),r.endsWith(">f</mi>")||r.endsWith(">g</mi>")?(a+="<mo> &ApplyFunction; </mo>",t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(a)?"mo":"mi",t.mathML+=a}return i}function zs(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&"msubsup"===t.atoms[t.index].type}function Ts(t){return t.index<t.atoms.length&&t.atoms[t.index].subscript&&"msubsup"===t.atoms[t.index].type}function Ds(t,e,s){let i=!1,a="",r=e.atoms[e.index-1];return!!r&&(r.superscript||r.subscript||(zs(e)||Ts(e))&&(r=e.atoms[e.index],e.index+=1),!!r&&(r.superscript&&r.subscript?(a="<msubsup>"+t,a+=Es(r.subscript,0,0,s).mathML,a+=Es(r.superscript,0,0,s).mathML,a+="</msubsup>"):r.superscript?(a="<msup>"+t,a+=Es(r.superscript,0,0,s).mathML,a+="</msup>"):r.subscript&&(a="<msub>"+t,a+=Es(r.subscript,0,0,s).mathML,a+="</msub>"),a.length>0&&(i=!0,e.mathML+=a,e.lastType=""),i))}function $s(t,e,s){let i=!1;e=e||t.atoms.length;const a=t.index;let r="";for(;t.index<e&&"text"===t.atoms[t.index].mode;)r+=t.atoms[t.index].body?t.atoms[t.index].body:" ",t.index+=1;return r.length>0&&(i=!0,r="<mtext"+Cs(t.atoms[a].id,s)+">"+r+"</mtext>",t.mathML+=r,t.lastType="mtext"),i}function Fs(t,e,s){let i=!1;e=e||t.atoms.length;const a=t.index;let r="",n=function(t){let e=-1,s=t.index,i=!1,a=!1;for(;s<t.atoms.length&&!i&&!a;)i="mord"!==t.atoms[s].type||"0123456789,.".indexOf(t.atoms[s].body)<0,a=!i&&t.atoms[s].superscript,s++;return a&&(e=s-1),e}(t);for(n>=0&&n<e&&(e=n);t.index<e&&"mord"===t.atoms[t.index].type&&"0123456789,.".indexOf(t.atoms[t.index].body)>=0;)r+=t.atoms[t.index].body,t.index+=1;return r.length>0&&(i=!0,r="<mn"+Cs(t.atoms[a].id,s)+">"+r+"</mn>",n<0&&zs(t)&&(n=t.index,t.index+=1),n>=0&&(r="<msup>"+r,r+=Es(t.atoms[n].superscript,0,0,s).mathML,r+="</msup>"),t.mathML+=r,t.lastType="mn"),i}function qs(t,e,s){let i=!1;e=e||t.atoms.length;let a="",r="";if(t.index<e&&"mopen"===t.atoms[t.index].type){let n=!1,o=0;const l=t.index;let c=-1,h=l+1;for(;h<e&&!n;)"mopen"===t.atoms[h].type?o+=1:"mclose"===t.atoms[h].type&&(o-=1),-1===o&&(n=!0,c=h),h+=1;n&&(a="<mrow>",a+=Bs(t.atoms[l],s),a+=Es(t.atoms,l+1,c,s).mathML,a+=Bs(t.atoms[c],s),a+="</mrow>","mi"!==t.lastType&&"mn"!==t.lastType&&"mfrac"!==t.lastType&&"fence"!==t.lastType||(a="<mo>&InvisibleTimes;</mo>"+a),t.index=c+1,Ds(a,t,s)&&(i=!0,t.lastType="",a=""),r="fence")}return a.length>0&&(i=!0,t.mathML+=a,t.lastType=r),i}function Ps(t,e,s){let i=!1;e=e||t.atoms.length;let a="",r="";const n=t.atoms[t.index];if(t.index<e&&("mbin"===n.type||"mrel"===n.type))a+=t.atoms[t.index].toMathML(s),t.index+=1,r="mo";else if(t.index<e&&"mop"===n.type){if("limits"===n.limits&&(n.superscript||n.subscript)){const t=Bs(n,s);n.superscript&&n.subscript?(a+=("nolimits"!==n.limits?"<munderover>":"<msubsup>")+t,a+=Es(n.subscript,0,0,s).mathML,a+=Es(n.superscript,0,0,s).mathML,a+="nolimits"!==n.limits?"</munderover>":"</msubsup>"):n.superscript?(a+=("nolimits"!==n.limits?"<mover>":"<msup>")+t,a+=Es(n.superscript,0,0,s).mathML,a+="nolimits"!==n.limits?"</mover>":"</msup>"):(a+=("nolimits"!==n.limits?"<munder>":"<msub>")+t,a+=Es(n.subscript,0,0,s).mathML,a+="nolimits"!==n.limits?"</munder>":"</msub>"),r="mo"}else{const e=t.atoms[t.index],n="\\operatorname"===e.symbol,o=n?'<mi class="MathML-Unit"'+Cs(e.id,s)+">"+Ks(e.body)+"</mi>":Bs(e,s);a+=o,t.index+=1,Ds(a,t,s)&&(i=!0,t.lastType="",a=""),t.index-=1,n||/^<mo>(.*)<\/mo>$/.test(o)?r=n?"mi":"mo":(a+="<mo>&#x2061;</mo>",r="applyfunction")}"mi"!==t.lastType&&"mn"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(a)||(a="<mo>&InvisibleTimes;</mo>"+a),t.index+=1}return a.length>0&&(i=!0,t.mathML+=a,t.lastType=r),i}function Es(t,e,s,i){const a={atoms:t,index:e||0,mathML:"",lastType:""};if(s=s||(t?t.length:0),"number"==typeof t||"boolean"==typeof t)a.mathML=t.toString();else if("string"==typeof t)a.mathML=t;else if(t&&"function"==typeof t.toMathML)a.mathML=t.toMathML(i);else if(Array.isArray(t)){let t=0;for(;a.index<s;)if($s(a,s,i)||Fs(a,s,i)||Ls(a,s,i)||Ps(a,s,i)||qs(a,s,i))t+=1;else if(a.index<s){let e=a.atoms[a.index].toMathML(i);"mn"===a.lastType&&e.length>0&&"genfrac"===a.atoms[a.index].type&&(e="<mo>&#x2064;</mo>"+e),"genfrac"===a.atoms[a.index].type?a.lastType="mfrac":a.lastType="",e.length>0&&(a.mathML+=e,t+=1),a.index+=1}t>1&&(a.mathML="<mrow>"+a.mathML+"</mrow>")}return a}function Bs(t,e){let s="";const i=Ks(t.body);return i&&(s="<mo"+Cs(t.id,e)+">"+i+"</mo>"),s}function Ks(t){if(!t)return"";if("string"==typeof t)return _s(t);if(!Array.isArray(t)&&"string"==typeof t.body)return _s(t.body);let e="";for(const s of t)"string"==typeof s.body&&(e+=s.body);return _s(e)}ie.prototype.toMathML=function(t){const e={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋"},s={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"ℏ","\\cdotp":"⋅","\\ldots":"…","\\cdots":"⋯","\\ddots":"⋱","\\vdots":"⋮","\\ldotp":"."},i={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5};let a,r,n,o,l,c,h="",m="",d={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[this.fontFamily||this.font]||"";d&&(d=' mathvariant="'+d+'"');const p=this.symbol;if("text"===this.mode)h="<mi"+Cs(this.id,t)+">"+this.body+"</mi>";else switch(this.type){case"first":break;case"group":case"root":h=Es(this.body,0,0,t).mathML;break;case"array":if((this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence)&&(h+="<mrow>",this.lFence&&"."!==this.lFence&&(h+="<mo>"+(As[this.lFence]||this.lFence)+"</mo>")),h+="<mtable",this.colFormat){for(h+=' columnalign="',n=0;n<this.colFormat.length;n++)this.colFormat[n].align&&(h+={l:"left",c:"center",r:"right"}[this.colFormat[n].align]+" ");h+='"'}for(h+=">",r=0;r<this.array.length;r++){for(h+="<mtr>",a=0;a<this.array[r].length;a++)h+="<mtd>"+Es(this.array[r][a],0,0,t).mathML+"</mtd>";h+="</mtr>"}h+="</mtable>",(this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence)&&(this.rFence&&"."!==this.rFence&&(h+="<mo>"+(As[this.lFence]||this.rFence)+"</mo>"),h+="</mrow>");break;case"genfrac":(this.leftDelim||this.rightDelim)&&(h+="<mrow>"),this.leftDelim&&"."!==this.leftDelim&&(h+="<mo"+Cs(this.id,t)+">"+(As[this.leftDelim]||this.leftDelim)+"</mo>"),this.hasBarLine?(h+="<mfrac>",h+=Es(this.numer,0,0,t).mathML||"<mi>&nbsp;</mi>",h+=Es(this.denom,0,0,t).mathML||"<mi>&nbsp;</mi>",h+="</mfrac>"):(h+="<mtable"+Cs(this.id,t)+">",h+="<mtr>"+Es(this.numer,0,0,t).mathML+"</mtr>",h+="<mtr>"+Es(this.denom,0,0,t).mathML+"</mtr>",h+="</mtable>"),this.rightDelim&&"."!==this.rightDelim&&(h+="<mo"+Cs(this.id,t)+">"+(As[this.rightDelim]||this.rightDelim)+"</mo>"),(this.leftDelim||this.rightDelim)&&(h+="</mrow>");break;case"surd":this.index?(h+="<mroot"+Cs(this.id,t)+">",h+=Es(this.body,0,0,t).mathML,h+=Es(this.index,0,0,t).mathML,h+="</mroot>"):(h+="<msqrt"+Cs(this.id,t)+">",h+=Es(this.body,0,0,t).mathML,h+="</msqrt>");break;case"leftright":h="<mrow>",this.leftDelim&&"."!==this.leftDelim&&(h+="<mo"+Cs(this.id,t)+">"+(As[this.leftDelim]||this.leftDelim)+"</mo>"),this.body&&(h+=Es(this.body,0,0,t).mathML),this.rightDelim&&"."!==this.rightDelim&&(h+="<mo"+Cs(this.id,t)+">"+(As[this.rightDelim]||this.rightDelim)+"</mo>"),h+="</mrow>";break;case"sizeddelim":case"delim":h+='<mo separator="true"'+Cs(this.id,t)+">"+(As[this.delim]||this.delim)+"</mo>";break;case"accent":h+='<mover accent="true"'+Cs(this.id,t)+">",h+=Es(this.body,0,0,t).mathML,h+="<mo>"+(As[p]||this.accent)+"</mo>",h+="</mover>";break;case"line":case"overlap":break;case"overunder":l=this.overscript,o=this.underscript,(this.svgAbove||l)&&(this.svgBelow||o)?c=this.body:l?(c=this.body,this.body&&this.body[0]&&this.body[0].underscript?(o=this.body[0].underscript,c=this.body[0].body):this.body&&this.body[0]&&"first"===this.body[0].type&&this.body[1]&&this.body[1].underscript&&(o=this.body[1].underscript,c=this.body[1].body)):o&&(c=this.body,this.body&&this.body[0]&&this.body[0].overscript?(l=this.body[0].overscript,c=this.body[0].body):this.body&&this.body[0]&&"first"===this.body[0].type&&this.body[1]&&this.body[1].overscript&&(l=this.body[1].overscript,c=this.body[1].body)),(this.svgAbove||l)&&(this.svgBelow||o)?(h+=`<munderover ${d} ${Cs(this.id,t)}>`,h+=e[this.svgBody]||Es(c,0,0,t).mathML,h+=e[this.svgBelow]||Es(o,0,0,t).mathML,h+=e[this.svgAbove]||Es(l,0,0,t).mathML,h+="</munderover>"):this.svgAbove||l?(h+=`<mover ${d} ${Cs(this.id,t)}>`+(e[this.svgBody]||Es(c,0,0,t).mathML),h+=e[this.svgAbove]||Es(l,0,0,t).mathML,h+="</mover>"):(this.svgBelow||o)&&(h+=`<munder ${d} ${Cs(this.id,t)}>`+(e[this.svgBody]||Es(c,0,0,t).mathML),h+=e[this.svgBelow]||Es(o,0,0,t).mathML,h+="</munder>");break;case"placeholder":case"mord":{h=s[p]||p||("string"==typeof this.body?this.body:"");const e=p?p.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null;e?h="&#x"+e[1]+";":h.length>0&&"\\"===h.charAt(0)&&(h="string"==typeof this.body&&this.body.charCodeAt(0)>255?"&#x"+("000000"+this.body.charCodeAt(0).toString(16)).substr(-4)+";":"string"==typeof this.body?this.body.charAt(0):this.body);const i=/\d/.test(h)?"mn":"mi";h="<"+i+d+Cs(this.id,t)+">"+_s(h)+"</"+i+">";break}case"mbin":case"mrel":case"textord":case"minner":h=p&&s[p]?"<mi"+Cs(this.id,t)+">"+s[p]+"</mi>":p&&As[p]?"<mo"+Cs(this.id,t)+">"+As[p]+"</mo>":Bs(this,t);break;case"mpunct":h='<mo separator="true"'+Cs(this.id,t)+">"+(As[p]||p)+"</mo>";break;case"mop":"​"!==this.body&&(h="<mo"+Cs(this.id,t)+">",h+="\\operatorname"===p?this.body:p||this.body,h+="</mo>");break;case"mathstyle":break;case"box":h='<menclose notation="box"',this.backgroundcolor&&(h+=' mathbackground="'+Et(this.backgroundcolor)+'"'),h+=Cs(this.id,t)+">"+Es(this.body,0,0,t).mathML+"</menclose>";break;case"spacing":h+='<mspace width="'+(i[p]||0)+'em"/>';break;case"enclose":h='<menclose notation="';for(const t in this.notation)Object.prototype.hasOwnProperty.call(this.notation,t)&&this.notation[t]&&(h+=m+t,m=" ");h+=Cs(this.id,t)+'">'+Es(this.body,0,0,t).mathML+"</menclose>";break;case"space":h+="&nbsp;"}return h},ie.toMathML=function(t,e){return Es(t,0,0,e).mathML};const Os={"\\imaginaryI":"ⅈ","\\imaginaryJ":"ⅉ","\\pi":"π","\\exponentialE":"ℯ","﹢":"+","＋":"+","−":"-","-":"-","﹣":"-","－":"-","\\times":"*","\\cdot":"*","⨉":"*","️✖":"*","️×":"*",".":"*","÷":"/","⁄":"/","／":"/","!":"factorial","\\mp":"minusplus","\\ne":"!=","\\coloneq":":=","\\questeq":"?=","\\approx":"approx","\\cong":"congruent","\\sim":"similar","\\equiv":"equiv","\\pm":"plusminus","\\land":"and","\\wedge":"and","\\lor":"or","\\vee":"or","\\oplus":"xor","\\veebar":"xor","\\lnot":"not","\\neg":"not","\\exists":"exists","\\nexists":"!exists","\\forall":"forAll","\\backepsilon":"suchThat","\\therefore":"therefore","\\because":"because","\\nabla":"nabla","\\circ":"circle","\\ominus":"ominus","\\odot":"odot","\\otimes":"otimes","\\zeta":"Zeta","\\Gamma":"Gamma","\\min":"min","\\max":"max","\\mod":"mod","\\lim":"lim","\\sum":"sum","\\prod":"prod","\\int":"integral","\\iint":"integral2","\\iiint":"integral3","\\Re":"Re","\\gothicCapitalR":"Re","\\Im":"Im","\\gothicCapitalI":"Im","\\binom":"nCr","\\partial":"partial","\\differentialD":"differentialD","\\capitalDifferentialD":"capitalDifferentialD","\\Finv":"Finv","\\Game":"Game","\\wp":"wp","\\ast":"ast","\\star":"star","\\asymp":"asymp","\\to":"to","\\gets":"gets","\\in":"elementof","\\notin":"!elementof","\\ni":"ownedby","\\owns":"ownedby","\\subset":"subset","\\supset":"superset","\\complement":"complement","\\rightarrow":"shortLogicalImplies","\\leftarrow":"shortLogicalImpliedBy","\\leftrightarrow":"shortLogicalEquivalent","\\longrightarrow":"logicalImplies","\\longleftarrow":"logicalImpliedBy","\\longleftrightarrow":"logicalEquivalent","\\Rightarrow":"shortImplies","\\Leftarrow":"shortImpliedBy","\\Leftrightarrow":"shortEquivalent","\\implies":"implies","\\Longrightarrow":"implies","\\impliedby":"impliedBy","\\Longleftarrow":"impliedBy","\\iff":"equivalent","\\Longleftrightarrow":"equivalent"},Is={"+":"add","*":"multiply","-":"subtract","/":"divide","=":"equal",":=":"assign","!=":"ne","?=":"questeq",approx:"approx",congruent:"congruent",similar:"similar",equiv:"equiv","<":"lt",">":"gt","<=":"le",">=":"ge","≤":"le","≥":"ge",">>":"gg","<<":"ll","**":"pow","++":"increment","--":"decrement"},Rs={equal:"%0 = %1",ne:"%0 \\ne %1",questeq:"%0 \\questeq %1",approx:"%0 \\approx %1",congruent:"%0 \\cong %1",similar:"%0 \\sim %1",equiv:"%0 \\equiv %1",assign:"%0 := %1",lt:"%0 < %1",gt:"%0 > %1",le:"%0 \\le %1",ge:"%0 \\ge %1",sin:"\\sin%_%^ %0",cos:"\\cos%_%^ %0",tan:"\\tan%_%^ %0",cot:"\\cot%_%^ %0",sec:"\\sec%_%^ %0",csc:"\\csc%_%^ %0",sinh:"\\sinh %0",cosh:"\\cosh %0",tanh:"\\tanh %0",csch:"\\csch %0",sech:"\\sech %0",coth:"\\coth %0",arcsin:"\\arcsin %0",arccos:"\\arccos %0",arctan:"\\arctan %0",arccot:"\\arcctg %0",arcsec:"\\arcsec %0",arccsc:"\\arccsc %0",arsinh:"\\arsinh %0",arcosh:"\\arcosh %0",artanh:"\\artanh %0",arcsch:"\\arcsch %0",arsech:"\\arsech %0",arcoth:"\\arcoth %0",ln:"\\ln%_%^ %",log:"\\log%_%^ %",lg:"\\lg %",lb:"\\lb %",sum:"\\sum%_%^ %0",prod:"\\prod%_%^ %0",Zeta:"\\zeta%_%^ %",Gamma:"\\Gamma %",min:"\\min%_%^ %",max:"\\max%_%^ %",mod:"\\mod%_%^ %",lim:"\\lim%_%^ %",binom:"\\binom %",nabla:"\\nabla %",curl:"\\nabla\\times %0",div:"\\nabla\\cdot %0",floor:"\\lfloor %0 \\rfloor%_%^",ceil:"\\lceil %0 \\rceil%_%^",abs:"\\left| %0 \\right|%_%^",norm:"\\lVert %0 \\rVert%_%^",ucorner:"\\ulcorner %0 \\urcorner%_%^",lcorner:"\\llcorner %0 \\lrcorner%_%^",angle:"\\langle %0 \\rangle%_%^",group:"\\lgroup %0 \\rgroup%_%^",moustache:"\\lmoustache %0 \\rmoustache%_%^",brace:"\\lbrace %0 \\rbrace%_%^","sqrt[]":"\\sqrt[%^]{%0}",sqrt:"\\sqrt{%0}",lcm:"\\operatorname{lcm}%",gcd:"\\operatorname{gcd}%",erf:"\\operatorname{erf}%",erfc:"\\operatorname{erfc}%",randomReal:"\\operatorname{randomReal}%",randomInteger:"\\operatorname{randomInteger}%",and:"%0 \\land %1",or:"%0 \\lor %1",xor:"%0 \\oplus %1",not:"%0 \\lnot %1",circle:"%0 \\circ %1",ast:"%0 \\ast %1",star:"%0 \\star %1",asymp:"%0 \\asymp %1","/":"\\frac{%0}{%1}",Re:"\\Re{%0}",Im:"\\Im{%0}",factorial:"%0!",factorial2:"%0!!"},Ns={degree:880,nabla:740,curl:740,partial:740,differentialD:740,capitalDifferentialD:740,"**":720,odot:710,not:680,div:660,solidus:660,"/":660,setminus:650,"%":640,otimes:410,union:350,intersection:350,"*":390,ast:390,".":390,oplus:300,ominus:300,"+":275,"-":275,"+-":275,"-+":275,circle:265,circledast:265,circledcirc:265,star:265,"..":263,to:262,in:262,"|":261,congruent:265,equiv:260,"=":260,"!=":255,"?=":255,similar:250,approx:247,"<":245,">":243,">=":242,"≥":242,"<=":241,complement:240,subset:240,superset:240,elementof:240,"!elementof":240,exists:230,"!exists":230,forall:230,and:200,xor:195,or:190,suchThat:110,":":100,assign:80,":=":80,therefore:70,because:70,shortLogicalImplies:52,shortImplies:51,logicalImplies:50,implies:49,shortLogicalImpliedBy:48,shortImpliedBy:47,logicalImpliedBy:46,impliedBy:45,shortLogicalEquivalent:44,shortEquivalent:43,logicalEquivalent:42,equivalent:41,",":40,";":30};function Hs(t,e){return Array.isArray(t.arg)?t.arg[e]:void 0}function Ws(t){return t&&Ns[t]||-1}function Vs(t){return/=|=>/.test(t)?"right":"left"}function js(t){if("f"===t||"g"===t)return!0;const e=Rs[t];return!!e&&!!/%[^01_^]?/.test(e)}function Us(t){t=(t||"").trim();let e=Os[t];if(!e)if(/^\\[^{}]+$/.test(t)){const s=Mt(t,"math",{});e=s&&s.value||t.slice(1)}else e=t;return e}function Gs(t){if(!t)return null;const e=Us(ti(t)),s=[Ws(e),Vs(e)];return s[0]<=0?null:s}function Zs(t){return null!==Gs(t)}const Xs={"\\lfloor\\rfloor":"floor","\\lceil\\rceil":"ceil","\\vert\\vert":"abs","\\lvert\\rvert":"abs","||":"abs","\\Vert\\Vert":"norm","\\lVert\\rVert":"norm","\\ulcorner\\urcorner":"ucorner","\\llcorner\\lrcorner":"lcorner","\\langle\\rangle":"angle","\\lgroup\\rgroup":"group","\\lmoustache\\rmoustache":"moustache","\\lbrace\\rbrace":"brace"},Ys={"!":"factorial","\\dag":"dagger","\\dagger":"dagger","\\ddagger":"dagger2","\\maltese":"maltese","\\backprime":"backprime","\\backdoubleprime":"backprime2","\\prime":"prime","\\doubleprime":"prime2","\\$":"$","\\%":"%","\\_":"_","\\degree":"degree"},Js={"+":"add","-":"add","*":"multiply","=":"equal",",":"list",";":"list2",and:"and",or:"or",xor:"xor",union:"union",shortLogicalEquivalent:"logicalEquivalent",logicalEquivalent:"logicalEquivalent",shortEquivalent:"equivalent",equivalent:"equivalent"},Qs={",":"list",";":"list2"};function ti(t){if("string"==typeof t)return t;if(Array.isArray(t)){let e="";for(const s of t)e+=ti(s);return e}if(t.symbol&&!/^\\math(op|bin|rel|open|punct|ord|inner)/.test(t.symbol))return t.symbol;if("leftright"===t.type)return"";if("string"==typeof t.body)return t.body;if(Array.isArray(t.body)){let e="";for(const s of t.body)e+=ti(s);return e}return""}function ei(t){return"string"==typeof t.sym?function(t){let e=Rs[t];if(e)return e.replace("%1","").replace("%0","").replace("%","");if(t.length>1){const s=Mt("\\"+t,"math");!s||s.fontFamily&&"cmr"!==s.fontFamily&&"ams"!==s.fontFamily||(e="\\"+t)}return e||(e=vt("math",t)),e}(t.sym)||t.sym:""}function si(t){return parseFloat(t.num)}function ii(t){return"object"==typeof t&&void 0!==t.num}function ai(t){let e=0;return ii(t)&&(e="object"==typeof t.num?void 0!==t.num.re?Si(t.num.re):0:parseFloat(t.num)),e}function ri(t){let e=0;return ii(t)&&"object"==typeof t.num&&(e=void 0!==t.num.im?Si(t.num.im):0),e}function ni(t){return t&&void 0!==t.sup}function oi(t){return t&&void 0!==t.sub}function li(t,e,s){let i=!1;const a=t.atoms[t.index];return a&&a.type===e&&(i=void 0===s||ti(a)===s),i}function ci(t,...e){const s={fn:t};if(e){const t=[];for(const s of e)s&&t.push(s);t.length>0&&(s.arg=t)}return s}function hi(t){return"number"==typeof t?{num:t.toString()}:"string"==typeof t||"object"==typeof t?{num:t}:void 0}function mi(t){if(ii(t)){const e=ai(t),s=ri(t);return 0!==s?(0!==e&&(t.num.re=(-e).toString()),t.num.im=(-s).toString()):t.num=(-e).toString(),t}return ci("negate",t)}function di(t){const e=t.atoms[t.index+1];return e&&"msubsup"===e.type}function pi(t,e){let s=t.atoms[t.index];return!s||void 0===s.superscript&&void 0===s.subscript?s=null:t.index+=1,s||(s=t.atoms[t.index+1],s&&"msubsup"===s.type&&(s.superscript||s.subscript)?t.index+=2:s=null),s?(void 0!==s.subscript&&(t.ast.sub=vi(s.subscript,e)),void 0!==s.superscript&&("msubsup"===s.type?/['\u2032]|\\prime/.test(ti(s.superscript))?(t.index+=1,s=t.atoms[t.index+1],s&&"msubsup"===s.type&&/['\u2032]|\\prime/.test(ti(s.superscript))?t.ast.sup={sym:"″"}:(t.ast.sup={sym:"′"},t.index-=1)):/['\u2033]|\\doubleprime/.test(ti(s.superscript))?t.ast.sup={sym:"″"}:t.ast&&(t.ast.sup=vi(s.superscript,e)):t.ast.sup=vi(s.superscript,e))):t.index+=1,t}function ui(t,e){const s=t.ast;if(gi(t,"!!"))return t.index+=1,t.ast=ci("factorial2",s),ui(t=pi(t,e),e);if(gi(t,"++"))return t.index+=1,t.ast=ci("increment",s),ui(t=pi(t,e),e);if(gi(t,"--"))return t.index+=1,t.ast=ci("decrement",s),ui(t=pi(t,e),e);const i=t.atoms[t.index];return i&&i.symbol&&Ys[i.symbol]&&(t.ast=ci(Ys[i.symbol],s),t=ui(t=pi(t,e),e)),t}function fi(t,e,s,i){if(t.index=t.index||0,0===t.atoms.length||t.index>=t.atoms.length)return t.ast=void 0,t;const a=t.minPrec;t.minPrec=0;let r=t.atoms[t.index];if(e){if("mopen"===r.type&&ti(r)===e)t.index+=1,r=(t=bi(t,i)).atoms[t.index],r&&"mclose"===r.type&&ti(r)===s&&(di(t)&&(t.ast={group:t.ast}),t=ui(t=pi(t,i),i));else if("textord"===r.type&&ti(r)===e)t.index+=1,r=(t=bi(t,i)).atoms[t.index],r&&"textord"===r.type&&ti(r)===s&&(t.index+=1,t=ui(t=pi(t,i),i));else if("\\lVert"===e&&"textord"===r.type&&"|"===r.symbol){if(r=t.atoms[t.index+1],r&&"textord"===r.type&&"|"===r.symbol){t.index+=2,r=(t=bi(t,i)).atoms[t.index];const e=t.atoms[t.index+1];r&&"textord"===r.type&&"|"===r.symbol&&e&&"textord"===e.type&&"|"===e.symbol&&(t.index+=2,t=ui(t=pi(t,i),i))}}else if("sizeddelim"===r.type&&r.delim===e)t.index+=1,r=(t=bi(t,i)).atoms[t.index],r&&"sizeddelim"===r.type&&r.delim===s&&(t.index+=1,t=ui(t=pi(t,i),i));else{if("leftright"!==r.type||r.leftDelim!==e||"?"!==r.rightDelim&&r.rightDelim!==s)return;t.ast=vi(r.body,i),di(t)&&(t.ast={group:t.ast}),t=ui(t=pi(t,i),i)}return t.minPrec=a,t}{let i=!0;if("mopen"===r.type?(e=r.symbol,s=ot[e]):"sizeddelim"===r.type?(e=r.delim,s=ot[e]):"leftright"===r.type?(i=!1,e=r.leftDelim,"?"===(s=r.rightDelim)&&(s=ot[e])):"textord"===r.type&&(e=r.symbol,s=ot[e]),e&&s){if("|"===e&&"|"===s){const i=t.atoms[t.index+1];i&&"textord"===i.type&&"|"===i.symbol&&(e="\\lVert",s="\\rVert")}if(t=fi(t,e,s))return i&&(t.index+=1),t.ast={fn:Xs[e+s]||e+s,arg:[t.ast]},t.minPrec=a,t}}}function gi(t,e){return t.index=t.index||0,!(t.atoms.length<=1||t.index>=t.atoms.length-1)&&e===ti(t.atoms[t.index])+ti(t.atoms[t.index+1])}function yi(t){if(t.index=t.index||0,!(t.atoms.length<=1||t.index>=t.atoms.length-1)){if(!li(t,"textord","\\nabla")){const e=t.atoms[t.index].symbol+t.atoms[t.index+1].symbol,s=/^(>=|<=|>>|<<|:=|!=)$/.test(e)?e:"";return s&&(t.index+=1),s}return t.index+=1,li(t,"mbin","\\times")?(t.index+=1,t.ast="curl",t):li(t,"mbin","\\cdot")?(t.index+=1,t.ast="div",t):void(t.index-=1)}}function bi(t,e){if(t.index=t.index||0,t.ast=void 0,0===t.atoms.length||t.index>=t.atoms.length)return t;t.minPrec=t.minPrec||0;let s=function t(e,s){if(e.index=e.index||0,e.ast=void 0,0===e.atoms.length||e.index>=e.atoms.length)return e;let i=e.atoms[e.index];if("text"===i.mode){let t="";for(;e.atoms[e.index]&&"text"===e.atoms[e.index].mode;)t+=e.atoms[e.index].body,e.index+=1;return e.ast={text:t},e}const a=Us(ti(i));if(yi(e))e.ast=ci(e.ast,t(e,s).ast);else{if("root"===i.type)return e.index=0,e.atoms=i.body,t(e,s);if("mbin"===i.type&&"-"===a)e.index+=1,(e=t(e,s)).ast=mi(e.ast);else if("mbin"===i.type&&"+"===a)e.index+=1,(e=t(e,s)).ast=ci("add",e.ast);else if("mord"===i.type&&/^[0-9.]$/.test(i.symbol)){let a="",r=!1,n=/^[0-9.eEdD]$/;for(;e.index<e.atoms.length&&!r&&(li(e,"spacing")||(li(e,"mord")||li(e,"mpunct",",")||li(e,"mbin"))&&n.test(e.atoms[e.index].symbol));)if("spacing"===e.atoms[e.index].type)e.index+=1;else if(void 0!==e.atoms[e.index].superscript||void 0!==e.atoms[e.index].subscript)r=!0;else{let t=e.atoms[e.index].symbol;"d"===t||"D"===t?(t="e",n=/^[0-9+-.]$/):"e"===t||"E"===t?di(e)?(t="",e.index-=1,r=!0):(t="E",n=/^[0-9+-.]$/):n===/^[0-9+-.]$/&&(n=/^[0-9]$/),a+=","===t?"":t,e.index+=1}if(e.ast=a?hi(a):void 0,i=e.atoms[e.index],i&&"genfrac"===i.type&&!isNaN(e.ast.num)){const i=e.ast;(e=t(e,s)).ast=ci("add",i,e.ast)}if(i&&"group"===i.type&&i.lsymbolatex&&i.symbol.startsWith("\\nicefrac")){const i=e.ast;(e=t(e,s)).ast=ci("add",i,e.ast)}i&&"msubsup"===i.type&&(e=pi(e,s)),e=ui(e,s)}else if("genfrac"===i.type||"surd"===i.type)e.ast=i.toAST(s),e=ui(e=pi(e,s),s);else if("mord"===i.type||"mbin"===i.type){if(js(a)&&!Zs(i)){e.ast={fn:a};const i=(e=pi(e,s)).ast,r=t(e,s).ast;r&&/^(list0|list|list2)$/.test(r.fn)?i.arg=r.arg:r&&(i.arg=[r]),e.ast=i}else e.ast=i.toAST(s),"ⅈ"===e.ast.sym&&(e.ast=hi({im:"1"})),e=pi(e);e=ui(e,s)}else if("textord"===i.type){if(!Zs(i)&&!ot[i.symbol||i.body])if(js(a)){e.ast={fn:a};const i=(e=pi(e,s)).ast;e.index+=1,i.arg=[t(e,s).ast],e.ast=i,e=ui(e,s)}else e.ast=i.toAST(s),void 0===i.superscript&&(e.index+=1),e=ui(e=pi(e,s),s)}else if("mop"===i.type){if((/^\\(mathop|operatorname|operatorname\*)/.test(i.symbol)||js(a))&&!Zs(i))if(e.ast={fn:/^\\(mathop|operatorname|operatorname\*)/.test(i.symbol)?ti(i.body):a},ni((e=pi(e,s)).ast)){const i={sin:"arcsin",cos:"arccos",tan:"arctan",cot:"arccot",sec:"arcsec",csc:"arccsc",sinh:"arsinh",cosh:"arcosh",tanh:"artanh",csch:"arcsch",sech:"arsech",coth:"arcoth"};if(-1===si(e.ast.sup)&&i[a])e.ast=ci(i[a],t(e,s).ast);else{const i=e.ast;i.arg=[t(e,s).ast],e.ast=i}}else{const i=e.ast,a=t(e,s).ast;a&&/^(list0|list|list2)$/.test(a.fn)?i.arg=a.arg:a&&(i.arg=[a]),e.ast=i}}else if("array"===i.type)e.index+=1,e.ast=i.toAST(s);else if("group"===i.type)e.index+=1,e.ast=i.toAST(s);else{if("mclose"===i.type)return e;if("error"===i.type)return e.index+=1,e.ast={error:i.symbol},e}}if(void 0===e.ast){const t=fi(e,"(",")",s)||fi(e,null,null,s);t?e=t:Zs(i)||("placeholder"===i.type?e.ast=hi(0):(e.ast={text:"?"},e.ast.error="Unexpected token '"+i.type+"'",i.latex?e.ast.latex=i.latex:i.body&&i.toLatex&&(e.ast.latex=i.toLatex())),e.index+=1)}if(i=e.atoms[e.index],i&&("mord"===i.type||"surd"===i.type||"mop"===i.type||"mopen"===i.type||"sizeddelim"===i.type||"leftright"===i.type)){if("sizeddelim"===i.type)for(const t in ot)if(i.delim===ot[t])return e.index+=1,e;if(("mord"===i.type||"textord"===i.type||"mop"===i.type)&&Zs(i))return e;const a=e.ast;e.ast={},(e=t(e,s))&&e.ast&&a?js(a.fn)&&void 0===a.arg||Array.isArray(a.arg)&&0===a.arg.length?"list2"===e.ast.fn||"list"===e.ast.fn?e.ast=ci(a.fn,e.ast.arg):e.ast=ci("multiply",a,e.ast):"multiply"===e.ast.fn?e.ast.arg.unshift(a):0===ri(a)&&0!==ai(a)&&1===ri(e.ast)&&0===ai(e.ast)?e.ast=hi({im:ai(a).toString()}):e.ast=ci("multiply",a,e.ast):e.ast=a}return e}(t,e).ast,i=!1;const a=t.minPrec;for(;!i;){const r=t.atoms[t.index],n=yi(t);let o,l;if(i=!r||"text"===r.mode||!n&&!Zs(r),i||([o,l]=n?[Ws(n),Vs(n)]:Gs(r),i=o<a),!i){const a=n||Us(ti(r));if(t.minPrec="left"===l?o+1:o,t.index+=1,"|"===a)if(void 0!==r.subscript||t.atoms[t.index]&&void 0!==t.atoms[t.index].subscript&&"msubsup"===t.atoms[t.index].type){t.ast={};const i=pi(t,e).ast.sub;if(s=ci("bind",s),i&&"equal"===i.fn&&s.arg)s.arg.push(Hs(i,0)),s.arg.push(Hs(i,1));else if(i&&s.arg&&("list"===i.fn||"list2"===i.fn)){let t={sym:"x"};for(let e=0;e<i.arg.length;e++)"equal"===i.arg[e].fn?(t=Hs(i.arg[e],0),s.arg.push(t),s.arg.push(Hs(i.arg[e],1))):(s.arg.push(t),s.arg.push(i.arg[e]))}else i&&(s.arg.push({sym:"x"}),s.arg.push(i))}else i=!0;else{const i=bi(t,e).ast;let r=Qs[a];r&&s&&s.fn!==r&&(s=ci(r,s)),"-"===a?s&&s.arg&&"add"===s.fn?void 0!==i&&s.arg.push(mi(i)):s=s&&"subtract"===s.fn?ci("add",Hs(s,0),mi(Hs(s,1)),mi(i)):!ii(s)||ni(s)||!ii(i)||ni(i)||void 0!==i.num.re&&"0"!==i.num.re||void 0===i.num.im?ci("subtract",s,i):{num:{re:s.num,im:(-parseFloat(i.num.im)).toString()}}:(r=Js[a],"add"===r&&s&&"subtract"===s.fn?s=ci("add",Hs(s,0),mi(Hs(s,1)),i):r&&s&&s.fn===r&&!ni(s)?void 0!==i&&(i.fn===r&&!ni(i)&&i.arg?s.arg=[...s.arg,...i.arg]:s.arg&&s.arg.push(i)):r&&i&&i.arg&&i.fn===r?(i.arg.unshift(s),s=i):s="multiply"===r&&ii(s)&&!ni(s)&&i&&10===si(i)&&ii(i.sup)?hi(si(s)*Math.pow(10,si(i.sup))):"add"===r&&ii(s)&&!ni(s)&&i&&0!==ri(i)&&!ni(i)?{num:{re:s.num,im:i.num.im}}:ci(r||Is[a]||a,s,i))}}}return t.ast=s,t}function xi(t){if(!t)return[];let e;if(Array.isArray(t)){e=[];for(const s of t){const t=xi(s);e=e.concat(t)}}else{if("spacing"===t.type)return[];"first"===t.type||"box"===t.type?e=xi(t.body):(t.body&&Array.isArray(t.body)&&(t.body=xi(t.body)),t.superscript&&Array.isArray(t.superscript)&&(t.superscript=xi(t.superscript)),t.subscript&&Array.isArray(t.subscript)&&(t.subscript=xi(t.subscript)),t.index&&Array.isArray(t.index)&&(t.index=xi(t.index)),t.denom&&Array.isArray(t.denom)&&(t.denom=xi(t.denom)),t.numer&&Array.isArray(t.numer)&&(t.numer=xi(t.numer)),t.array&&Array.isArray(t.array)&&(t.array=t.array.map(t=>t.map(t=>xi(t)))),e=[t])}return e}function vi(t,e){return function(t,e){t.index=t.index||0,t.ast=void 0;const s=[];for(;t.atoms[t.index];)if("text"===t.atoms[t.index].mode){let e="";for(;t.atoms[t.index]&&"text"===t.atoms[t.index].mode;)e+=t.atoms[t.index].body,t.index+=1;s.push(ci("text",e))}else{const i=bi(t,e).ast;if(!i)return;s.push(i)}return s.length>1?ci("sequence",...s):s[0]||void 0}({atoms:xi(t)},e)}function ki(t,...e){t=t||".. ";let s="";if(e.length>0){"."!==t[0]&&(s+=t[0]);let i="";for(const a of e)s+=i+a,i=t[2];"."!==t[1]&&(s+=t[1])}return s}function wi(t,e){const s=t.length;t=t.substr(0,e.precision-2);for(let s=0;s<t.length-16;s++){const i=t.substr(0,s);for(let a=0;a<17;a++){const r=t.substr(s,a+1),n=Math.floor((t.length-i.length)/r.length);if(n>1&&(i+r.repeat(n+1)).startsWith(t))return"0"===r?i.replace(/(\d{3})/g,"$1"+e.groupSeparator):i.replace(/(\d{3})/g,"$1"+e.groupSeparator)+e.beginRepeatingDigits+r.replace(/(\d{3})/g,"$1"+e.groupSeparator)+e.endRepeatingDigits}}return s!==t.length&&(t+="\\ldots"),t.replace(/(\d{3})/g,"$1"+e.groupSeparator)}function Si(t){return parseFloat(parseFloat(t).toPrecision(15))}function Mi(t,e){let s="";if("number"==typeof e.precision){if("number"!=typeof t){let s="",i="";if("-"===t[0]?(s="-",t=t.substr(1)):"+"===t[0]&&(t=t.substr(1)),t.indexOf(".")>=0){const a=t.match(/(\d*).(\d*)([e|E]([-+]?[0-9]*))?/),r=a[1],n=a[2].substring(0,Math.min(e.precision-r.length,a[2].length));if(i=a[4]||"","0"===r){let i=0;for(;"0"===n[i]&&i<n.length;)i+=1;let a="";if(i<=4)a="0"+e.decimalMarker,a+=n.substr(0,i),a+=wi(t.substr(a.length),e);else if(i+1>=e.precision)a="0",s="";else{a=t[i];const s=wi(t.substr(i+1),e);s&&(a+=e.decimalMarker+s)}"0"!==a&&(t.length-1>e.precision&&!a.endsWith("}")&&!a.endsWith("\\ldots")&&(a+="\\ldots"),i>4&&(a+=e.exponentProduct,e.exponentMarker?a+=e.exponentMarker+(1-i).toString():a+="10^{"+(1-i).toString()+"}")),t=a}else{t=r.replace(/\B(?=(\d{3})+(?!\d))/g,e.groupSeparator);const s=wi(n,e);s&&(t+=e.decimalMarker+s)}}else if(t.length>e.precision){const s=t.length;let i=t[0];const a=wi(t.substr(2),e);a&&(i+=e.decimalMarker+a,"}"!==i[i.length-1]&&(i+="\\ldots")),"1"!==i?i+=e.exponentProduct:i="",e.exponentMarker?i+=e.exponentMarker+(s-2).toString():i+="10^{"+(s-2).toString()+"}",t=i}else t=t.replace(/\B(?=(\d{3})+(?!\d))/g,e.groupSeparator);return i&&(i=e.exponentMarker?e.exponentMarker+i:e.exponentProduct+" 10^{"+i+"}"),s+t+i}t=Si(t)}if("engineering"===e.scientificNotation)if(0===t)s="0";else{const i=Math.abs(t);let a=Math.round(Math.log10(i));a-=a%3,i<1e3&&(a=0);let r=i/Math.pow(10,a);const n=r.toString().match(/^(.*)\.(.*)$/);n&&n[1]&&n[2]&&(r=n[1]+e.decimalMarker+n[2]),e.groupSeparator&&(r=wi(r.toExponential(),e)),a=0===a?"":e.exponentMarker?e.exponentMarker+a:e.exponentProduct+" 10^{"+a+"}",s=(t<0?"-":"")+r+a}else{const i="string"==typeof t?t:t.toString();let a,r,n,o=i.match(/^(.*)[e|E]([-+]?[0-9]*)$/i);a=i,n="",o&&o[1]&&o[2]&&(a=o[1],r=e.exponentMarker?e.exponentMarker+o[2]:e.exponentProduct+" 10^{"+o[2]+"}"),o=a.match(/^(.*)\.(.*)$/),o&&o[1]&&o[2]&&(a=o[1],n=o[2]),e.groupSeparator&&(a=a.replace(/\B(?=(\d{3})+(?!\d))/g,e.groupSeparator),n=wi(n,e)),n&&(n=e.decimalMarker+n),s=a+n+(r||"")}return s}ie.prototype.toAST=function(t){let e,s,i,a,r={},n="",o={"double-struck":"double-struck",calligraphic:"script",script:"script",fraktur:"fraktur","sans-serif":"sans-serif",monospace:"monospace"}[this.variant+(this.variantStyle&&"up"!==this.variantStyle?"-"+this.variantStyle:"")],l="";"b"===this.fontSeries&&(l+="bold"),"it"===this.fontShape&&(l+="italic");const c=this.symbol;switch(this.type){case"root":case"group":this.symbol&&this.symbol.startsWith("\\nicefrac")?(e=this.symbol.slice(9).match(/({.*}|[^}])({.*}|[^}])/),e?(s=1===e[1].length?e[1]:e[1].substr(1,e[1].length-2),s=Me(s,"math",null,t.macros),i=1===e[2].length?e[2]:e[2].substr(1,e[2].length-2),i=Me(i,"math",null,t.macros),r=ci("divide",vi(s,t),vi(i,t))):r.fn="divide"):r.group=vi(this.body,t);break;case"genfrac":r=ci("divide",vi(this.numer,t),this.denom&&this.denom[0]&&"placeholder"===this.denom[0].type?hi(1):vi(this.denom,t));break;case"surd":r=this.index?ci("pow",vi(this.body,t),ci("divide",hi(1),vi(this.index,t))):ci("sqrt",vi(this.body,t));break;case"rule":break;case"line":case"overlap":case"accent":case"overunder":break;case"mord":case"textord":case"mbin":e=c?c.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):void 0,e?n=String.fromCodePoint(parseInt(e[1],16)):(n=Us(ti(this)),n.length>0&&"\\"===n.charAt(0)&&"string"==typeof this.body&&(n=this.body)),a=bt(n,o,l).replace(/[\\]/g,"\\\\").replace(/["]/g,'\\"').replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t"),a!==n?(r={sym:a},o="normal"):r={sym:n};break;case"minner":case"mop":break;case"box":r=vi(this.body,t);break;case"enclose":break;case"array":if("cardinality"===this.env.name)r=ci("card",vi(this.array,t));else if(/array|matrix|pmatrix|bmatrix/.test(this.env.name)){r={fn:"array",args:[]};for(const e of this.array)r.args.push(e.map(e=>vi(e,t)))}else if("cases"===this.env.name){r={fn:"cases",args:[]};for(const e of this.array)if(e[0]){const s=[];s.push(vi(e[0],t));let i=vi(e[1],t);i&&"text"===i.fn&&i.arg&&/^(if|when|for)$/i.test(i.arg[0].trim())&&(i=i.arg.filter(t=>"string"!=typeof t)),s.push(i||{}),r.args.push(s)}}break;case"spacing":case"space":case"mathstyle":break;default:r=void 0}return r&&o&&"normal"!==o&&(r.variant=o),r&&"string"==typeof this.cssClass&&(r.class=this.cssClass),r&&"string"==typeof this.cssId&&(r.id=this.cssId),r},ie.toAST=function(t,e){return vi(t,e)};const Ai={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ",a:'<phoneme alphabet="ipa" ph="eɪ">a</phoneme>',A:'capital <phoneme alphabet="ipa" ph="eɪ">A</phoneme>',"+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","​":"","−":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"};function _i(t){let e=0;if(t&&Array.isArray(t))for(const s of t)"first"!==s.type&&(e+=1);return 1===e}function Ci(t){let e="";if(t&&Array.isArray(t))for(const s of t)"first"!==s.type&&"string"==typeof s.body&&(e+=s.body);return e}function Li(t,e,s,i){e=e.split(" ");for(const a of e){const e=a.match(/(.*):(.*)/);if(e){const a=i||{};"active"===e[2]?a.passive=!1:a[e[2]]=!0,t.addEventListener(e[1],s,a)}else t.addEventListener(a,s,i)}}function zi(t,e,s,i){e=e.split(" ");for(const a of e){const e=a.match(/(.*):(.*)/);if(e){const a=i||{};"active"===e[2]?a.passive=!1:a[e[2]]=!0,t.removeEventListener(e[1],s,a)}else t.removeEventListener(a,s,i)}}function Ti(t,e){let s=document.getElementById(t);return s?s.setAttribute("data-refcount",parseInt(s.getAttribute("data-refcount"))+1):(s=document.createElement("div"),s.setAttribute("aria-hidden","true"),s.setAttribute("data-refcount","1"),s.className=e,s.id=t,document.body.appendChild(s)),s}function Di(t){if(!t)return null;const e=parseInt(t.getAttribute("data-refcount"));return e&&1!==e?t.setAttribute("data-refcount",e-1):t.remove(),t}function $i(t){return t.element&&t.element.mathfield===t}ie.toSpeakableFragment=function(t,e){function s(t){return"<emphasis>"+t+"</emphasis>"}if(!t)return"";let i="";if(t.id&&"math"===e.speechMode&&(i+='<mark name="'+t.id.toString()+'"/>'),Array.isArray(t)){let a=!1,r=!1;for(let n=0;n<t.length;n++)"text"!==t[n].mode&&(r=!1),n<t.length-2&&"mopen"===t[n].type&&"mclose"===t[n+2].type&&"mord"===t[n+1].type?(i+=" of ",i+=s(ie.toSpeakableFragment(t[n+1],e)),n+=2):"text"===t[n].mode?r?i+=t[n].body?t[n].body:" ":(r=!0,i+=ie.toSpeakableFragment(t[n],e)):"mord"===t[n].type&&/[0123456789,.]/.test(t[n].body)?a?i+=t[n].body:(a=!0,i+=ie.toSpeakableFragment(t[n],e)):(a=!1,i+=ie.toSpeakableFragment(t[n],e))}else if("text"===t.mode)i+=t.body;else{let a="",r="",n="",o=!1;switch(t.type){case"group":case"root":i+=ie.toSpeakableFragment(t.body,e);break;case"genfrac":if(a=ie.toSpeakableFragment(t.numer,e),r=ie.toSpeakableFragment(t.denom,e),_i(t.numer)&&_i(t.denom)){const e={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[Ci(t.numer)+"/"+Ci(t.denom)];e?i=e:i+=a+" over "+r}else i+=' the fraction <break time="150ms"/>'+a+', over <break time="150ms"/>'+r+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(n=ie.toSpeakableFragment(t.body,e),t.index){let s=ie.toSpeakableFragment(t.index,e);s=s.trim();const a=s.replace(/<mark([^/]*)\/>/g,"");i+="3"===a?' the cube root of <break time="200ms"/>'+n+'. <break time="200ms"/> End cube root':"n"===a?' the nth root of <break time="200ms"/>'+n+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+s+', of <break time="200ms"/>'+n+'. <break time="200ms"/> End root'}else _i(t.body)?i+=" the square root of "+n+" , ":i+=' the square root of <break time="200ms"/>'+n+'. <break time="200ms"/> End square root';break;case"accent":break;case"leftright":i+=Ai[t.leftDelim]||t.leftDelim,i+=ie.toSpeakableFragment(t.body,e),i+=Ai[t.rightDelim]||t.rightDelim;break;case"line":case"rule":case"overunder":case"overlap":break;case"placeholder":i+="placeholder "+t.body;break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":{const s=t.symbol;if("\\mathbin"===s||"\\mathrel"===s||"\\mathopen"===s||"\\mathclose"===s||"\\mathpunct"===s||"\\mathord"===s||"\\mathinner"===s){i=ie.toSpeakableFragment(t.body,e);break}let a=t.body,r=t.symbol;if("delim"!==t.type&&"sizeddelim"!==t.type||(a=r=t.delim),"text"===e.speechMode)i+=a;else{if("mbin"===t.type&&(i+='<break time="150ms"/>'),a){const t=Ai[a]||(r?Ai[r.trim()]:"");if(t)i+=" "+t;else{const t=r?function(t){let e=hs.NOTES[t];return e||"\\"!==t.charAt(0)||(e=" "+t.replace("\\","")+" "),Array.isArray(e)&&(e=e[0]),e}(r.trim()):"";i+=t||function(t){let s="";return e.textToSpeechMarkup?/[a-z]/.test(t)?s+=' <say-as interpret-as="character">'+t+"</say-as>":/[A-Z]/.test(t)?s+="capital "+t.toLowerCase():s+=t:/[a-z]/.test(t)?s+=" '"+t.toUpperCase()+"'":/[A-Z]/.test(t)?s+=" 'capital "+t.toUpperCase()+"'":s+=t,s}(a)}}else i+=ie.toSpeakableFragment(t.body,e);"mbin"===t.type&&(i+='<break time="150ms"/>')}break}case"mop":if("​"!==t.body){const a=t.symbol;if("\\sum"===a)if(t.superscript&&t.subscript){let s=ie.toSpeakableFragment(t.superscript,e);s=s.trim();let a=ie.toSpeakableFragment(t.subscript,e);a=a.trim(),i+=' the summation from <break time="200ms"/>'+a+'<break time="200ms"/> to  <break time="200ms"/>'+s+'<break time="200ms"/> of <break time="150ms"/>',o=!0}else if(t.subscript){let s=ie.toSpeakableFragment(t.subscript,e);s=s.trim(),i+=' the summation from <break time="200ms"/>'+s+'<break time="200ms"/> of <break time="150ms"/>',o=!0}else i+=" the summation of";else if("\\prod"===a)if(t.superscript&&t.subscript){let s=ie.toSpeakableFragment(t.superscript,e);s=s.trim();let a=ie.toSpeakableFragment(t.subscript,e);a=a.trim(),i+=' the product from <break time="200ms"/>'+a+'<break time="200ms"/> to <break time="200ms"/>'+s+'<break time="200ms"/> of <break time="150ms"/>',o=!0}else if(t.subscript){let s=ie.toSpeakableFragment(t.subscript,e);s=s.trim(),i+=' the product from <break time="200ms"/>'+s+'<break time="200ms"/> of <break time="150ms"/>',o=!0}else i+=" the product  of ";else if("\\int"===a)if(t.superscript&&t.subscript){let a=ie.toSpeakableFragment(t.superscript,e);a=a.trim();let r=ie.toSpeakableFragment(t.subscript,e);r=r.trim(),i+=' the integral from <break time="200ms"/>'+s(r)+'<break time="200ms"/> to <break time="200ms"/>'+s(a)+' <break time="200ms"/> of ',o=!0}else i+=' the integral of <break time="200ms"/> ';else if("string"==typeof t.body){i+=Ai[t.body]||Ai[t.symbol]||" "+t.body}else t.symbol&&("\\"===t.symbol[0]?i+=" "+t.symbol.substr(1):i+=" "+t.symbol)}break;case"enclose":n=ie.toSpeakableFragment(t.body,e),_i(t.body)?i+=" crossed out "+n+" , ":i+=" crossed out "+n+". End cross out"}if(!o&&t.superscript){let s=ie.toSpeakableFragment(t.superscript,e);s=s.trim();const a=s.replace(/<[^>]*>/g,"");if(_i(t.superscript)){if("math"===e.speechMode){const e=function(t){if(t&&Array.isArray(t))for(const e of t)if("first"!==e.type&&e.id)return e.id.toString();return""}(t.superscript);e&&(i+='<mark name="'+e+'"/>')}"′"===a?i+=" prime ":"2"===a?i+=" squared ":"3"===a?i+=" cubed ":isNaN(parseInt(a))?i+=" to the "+s+"; ":i+=' to the <say-as interpret-as="ordinal">'+a+"</say-as> power; "}else isNaN(parseInt(a))?i+=" raised to the "+s+"; ":i+=' raised to the <say-as interpret-as="ordinal">'+a+"</say-as> power; "}if(!o&&t.subscript){let s=ie.toSpeakableFragment(t.subscript,e);s=s.trim(),_i(t.subscript)?i+=" sub "+s:i+=" subscript "+s+". End subscript. "}}return i},ie.toSpeakableText=function(t,e){const s=e?JSON.parse(JSON.stringify(e)):{textToSpeechMarkup:"",textToSpeechRules:"mathlive"};if(s.speechMode="math",window.sre&&"sre"===s.textToSpeechRules){s.generateID=!0;const e=ie.toMathML(t,s);return e?(s.textToSpeechMarkup&&(s.textToSpeechRulesOptions=s.textToSpeechRulesOptions||{},s.textToSpeechRulesOptions.markup=s.textToSpeechMarkup,"ssml"===s.textToSpeechRulesOptions.markup&&(s.textToSpeechRulesOptions.markup="ssml_step"),s.textToSpeechRulesOptions.rate=s.speechEngineRate),s.textToSpeechRulesOptions&&window.sre.System.getInstance().setupEngine(s.textToSpeechRulesOptions),window.sre.System.getInstance().toSpeech(e)):""}let i=ie.toSpeakableFragment(t,s);if("ssml"===s.textToSpeechMarkup){let t="";s.speechEngineRate&&(t='<prosody rate="'+s.speechEngineRate+'">'),i='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+t+"<p><s>"+i+"</s></p>"+(t?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else i="mac"===s.textToSpeechMarkup&&"mac"===function(t){let e="other";return navigator&&navigator.platform&&navigator.userAgent&&(/^(mac)/i.test(navigator.platform)?e="mac":/^(win)/i.test(navigator.platform)?e="win":/(android)/i.test(navigator.userAgent)?e="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(e="chromeos")),e===t?t:"!"+t}("mac")?i.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="([0-9]*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):i.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return i};let Fi,qi=0;class Pi{constructor(t,e){this.$setConfig(e||{}),this.element=t,t.mathfield=this,this.originalContent=t.innerHTML;let s=this.element.textContent;s&&(s=s.trim());let i="";this.config.substituteTextArea?"string"==typeof this.config.substituteTextArea?i+=this.config.substituteTextArea:i+="<span></span>":/android|ipad|ipod|iphone/i.test(navigator.userAgent)?i+="<span class='ML__textarea'>\n                <span class='ML__textarea__textarea'\n                    tabindex=\"0\" role=\"textbox\"\n                    style='display:inline-block;height:1px;width:1px' >\n                </span>\n            </span>":i+='<span class="ML__textarea"><textarea class="ML__textarea__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" aria-hidden="true" tabindex="0"></textarea></span>',i+='<span class="ML__fieldcontainer"><span class="ML__fieldcontainer__field"></span>',this.config.virtualKeyboardMode||(this.config.virtualKeyboardMode=window.matchMedia&&window.matchMedia("(any-pointer: coarse)").matches?"onfocus":"off"),"manual"===this.config.virtualKeyboardMode?(i+=`<button class="ML__virtual-keyboard-toggle" data-tooltip="${ms("tooltip.toggle virtual keyboard")}">`,this.config.virtualKeyboardToggleGlyph?i+=this.config.virtualKeyboardToggleGlyph:i+='<span style="width: 21px; margin-top: 4px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>',i+="</button>"):i+="<span ></span>",i+="</span>",i+='\n        <div class="sr-only">\n            <span aria-live="assertive" aria-atomic="true"></span>\n            <span></span>\n        </div>\n    ',this.element.innerHTML=i;let a=0;"function"==typeof this.config.substituteTextArea?this.textarea=this.config.substituteTextArea():this.textarea=this.element.children[a++].firstElementChild,this.field=this.element.children[a].children[0],this.field.addEventListener("wheel",t=>{t.preventDefault(),t.stopPropagation();let e=void 0===t.deltaX?t.detail:-t.deltaX;isFinite(e)||(e=t.wheelDelta/10),this.field.scroll({top:0,left:this.field.scrollLeft-5*e})},{passive:!1}),this.virtualKeyboardToggleDOMNode=this.element.children[a++].children[1],this._attachButtonHandlers(this.virtualKeyboardToggleDOMNode,{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.ariaLiveText=this.element.children[a].children[0],this.accessibleNode=this.element.children[a++].children[1],this.popover=Ti("mathlive-popover-panel","ML__popover"),this.keystrokeCaption=Ti("mathlive-keystroke-caption-panel","ML__keystroke-caption"),this.keystrokeCaptionVisible=!1,this.virtualKeyboardVisible=!1,this.keystrokeBuffer="",this.keystrokeBufferStates=[],this.keystrokeBufferResetTimer=null,this.suggestionIndex=0,this.mode=e.defaultMode||"math",this.smartModeSuppressed=!1,this.style={},this.blurred=!0,Li(this.element,"focus",this),Li(this.element,"blur",this),Li(this.textarea,"cut",this),Li(this.textarea,"copy",this),Li(this.textarea,"paste",this),rs.delegateKeyboardEvents(this.textarea,{container:this.element,allowDeadKey:()=>"text"===this.mode,typedText:this._onTypedText.bind(this),paste:this._onPaste.bind(this),keystroke:this._onKeystroke.bind(this),focus:this._onFocus.bind(this),blur:this._onBlur.bind(this)}),window.PointerEvent?Li(this.field,"pointerdown",this):Li(this.field,"touchstart:active mousedown",this),Li(window,"resize",this);const r={...e};r.onSelectionDidChange=Pi.prototype._onSelectionDidChange.bind(this),r.onContentDidChange=Pi.prototype._onContentDidChange.bind(this),r.onAnnounce=this.config.onAnnounce,r.macros=this.config.macros,r.removeExtraneousParentheses=this.config.removeExtraneousParentheses,this.mathlist=new Qe.EditableMathlist(r,this),this.undoManager=new class{constructor(t){this.mathlist=t,this.maximumDepth=1e3,this.record=!1,this.canCoalesce=!1,this.reset()}reset(){this.stack=[],this.index=-1}startRecording(){this.record=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(t){this.canUndo()&&(t&&"function"==typeof t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"undo"),this.restore(this.stack[this.index-1],t),this.index-=1,t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"undo"),this.canCoalesce=!1)}redo(t){this.canRedo()&&(t&&"function"===t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"redo"),this.index+=1,this.restore(this.stack[this.index],t),t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"redo"),this.canCoalesce=!1)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(t){this.record&&(t&&"function"===t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"snapshot"),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push({latex:this.mathlist.root.toLatex(),selection:this.mathlist.toString()}),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"snapshot"),this.canCoalesce=!1)}snapshotAndCoalesce(t){this.canCoalesce&&this.pop(),this.snapshot(t),this.canCoalesce=!0}save(){return{latex:this.mathlist.root.toLatex(),selection:this.mathlist.toString()}}restore(t,e){const s=this.mathlist.suppressChangeNotifications;void 0!==e.suppressChangeNotifications&&(this.mathlist.suppressChangeNotifications=e.suppressChangeNotifications),this.mathlist.insert(t?t.latex:"",{mode:"math",insertionMode:"replaceAll",selectionMode:"after",format:"latex",...e}),this.mathlist.setPath(t?t.selection:[{relation:"body",offset:0}]),this.mathlist.suppressChangeNotifications=s}}(this.mathlist),s.length>0&&this.$latex(s),this.undoManager.startRecording(),this.undoManager.snapshot(this.config)}handleEvent(t){switch(t.type){case"focus":this._onFocus(t);break;case"blur":this._onBlur(t);break;case"touchstart":case"mousedown":case"pointerdown":this._onPointerDown(t);break;case"resize":this._resizeTimer&&window.cancelAnimationFrame(this._resizeTimer),this._resizeTimer=window.requestAnimationFrame(()=>$i(this)&&this._onResize());break;case"cut":this._onCut(t);break;case"copy":this._onCopy(t);break;case"paste":this._onPaste(t)}}$revertToOriginalContent(){this.element.innerHTML=this.originalContent,this.element.mathfield=null,delete this.accessibleNode,delete this.ariaLiveText,delete this.field,zi(this.textarea,"cut",this),zi(this.textarea,"copy",this),zi(this.textarea,"paste",this),this.textarea.remove(),delete this.textarea,this.virtualKeyboardToggleDOMNode.remove(),delete this.virtualKeyboardToggleDOMNode,Di(this.popover),Di(this.keystrokeCaption),Di(this.virtualKeyboard),Di(document.getElementById("mathlive-alternate-keys-panel")),zi(this.element,"pointerdown",this),zi(this.element,"touchstart:active mousedown",this),zi(this.element,"focus",this),zi(this.element,"blur",this),zi(window,"resize",this),delete this.element}_resetKeystrokeBuffer(){this.keystrokeBuffer="",this.keystrokeBufferStates=[],clearTimeout(this.keystrokeBufferResetTimer)}_getCaretPosition(){const t=function t(e){if(e.classList.contains("ML__caret")||e.classList.contains("ML__text-caret")||e.classList.contains("ML__command-caret"))return e;let s;return Array.from(e.children).forEach((function(e){s=s||t(e)})),s}(this.field);if(t){const e=t.getBoundingClientRect();return{x:e.right,y:e.bottom,height:e.height}}return null}_getSelectionBounds(){const t=this.field.querySelectorAll(".ML__selected");if(t&&t.length>0){const e={top:1/0,bottom:-1/0,left:1/0,right:-1/0};t.forEach(t=>{const s=t.getBoundingClientRect();s.left<e.left&&(e.left=s.left),s.right>e.right&&(e.right=s.right),s.bottom>e.bottom&&(e.bottom=s.bottom),s.top<e.top&&(e.top=s.top)});const s=this.field.getBoundingClientRect(),i=e.right-e.left,a=e.bottom-e.top;return e.left=Math.ceil(e.left-s.left+this.field.scrollLeft),e.right=e.left+i,e.top=Math.ceil(e.top-s.top),e.bottom=e.top+a,e}return null}_pathFromPoint(t,e,s){let i;(s=s||{}).bias=s.bias||0;const a=function t(e,s,i){let a={element:null,distance:Number.POSITIVE_INFINITY},r=!0;if(e.getAttribute("data-atom-id")){a.element=e;const t=e.getBoundingClientRect(),n=s-(t.left+t.right)/2,o=i-(t.top+t.bottom)/2;a.distance=n*n+o*o,r=s>=t.left&&s<=t.right}return r&&e.children&&Array.from(e.children).forEach((function(e){const r=t(e,s,i);r.element&&r.distance<=a.distance&&(a=r)})),a}(this.field,t,e).element,r=a?a.getAttribute("data-atom-id"):null;if(r){const e=this.mathlist.filter((function(t,e){return e.captureSelection?e.filter(t=>t.id===r).length>0:e.id===r}));if(e&&e.length>0)if(i=Ce.pathFromString(e[0]).path,0===s.bias){const e=a.getBoundingClientRect();t<e.left+e.width/2&&!a.classList.contains("ML__placeholder")&&(i[i.length-1].offset=Math.max(0,i[i.length-1].offset-1))}else s.bias<0&&(i[i.length-1].offset=Math.min(this.mathlist.siblings().length-1,Math.max(0,i[i.length-1].offset+s.bias)))}return i}_onPointerDown(t){const e=this;let s,i=!1,a=!1,r=!1;if(1!==t.buttons)return;let n=!1,o=!1;const l=t.touches?t.touches[0].clientX:t.clientX,c=t.touches?t.touches[0].clientY:t.clientY,h=Date.now(),m=setInterval(()=>{n?e.field.scroll({top:0,left:e.field.scrollLeft-16}):o&&e.field.scroll({top:0,left:e.field.scrollLeft+16})},32);function d(t){window.PointerEvent?(zi(e.field,"pointermove",p),zi(e.field,"pointerend pointerleave pointercancel",d),e.field.releasePointerCapture(t.pointerId)):(zi(e.field,"touchmove",p),zi(e.field,"touchend touchleave",d),zi(window,"mousemove",p),zi(window,"mouseup blur",d)),i=!1,clearInterval(m),e.element.querySelectorAll(".ML__scroller").forEach(t=>t.parentNode.removeChild(t)),t.preventDefault(),t.stopPropagation()}function p(t){const i=t.touches?t.touches[0].clientX:t.clientX,r=t.touches?t.touches[0].clientY:t.clientY,m="touch"===t.pointerType?20:5;if(Date.now()<h+500&&Math.abs(l-i)<m&&Math.abs(c-r)<m)return t.preventDefault(),void t.stopPropagation();const d=e.field.getBoundingClientRect();o=i>d.right,n=i<d.left;let p=s;window.PointerEvent?t.isPrimary||(p=e._pathFromPoint(t.clientX,t.clientY,{bias:0})):t.touches&&2===t.touches.length&&(p=e._pathFromPoint(t.touches[1].clientX,t.touches[1].clientY,{bias:0}));const u=e._pathFromPoint(i,r,{bias:i<=l?i===l?0:-1:1});u&&e.mathlist.setRange(p,u,{extendToWordBoundary:a})&&e._requestUpdate(),t.preventDefault(),t.stopPropagation()}Fi&&Math.abs(Fi.x-l)<5&&Math.abs(Fi.y-c)<5&&Date.now()<Fi.time+500?(qi+=1,Fi.time=h):(Fi={x:l,y:c,time:h},qi=1);const u=this.field.getBoundingClientRect();if(l>=u.left&&l<=u.right&&c>=u.top&&c<=u.bottom){this.$hasFocus()||(r=!0,this.textarea.focus&&this.textarea.focus()),this._resetKeystrokeBuffer(),this.smartModeSuppressed=!1;const n=this.field.querySelector(".ML__mathlive").getBoundingClientRect();if(s=l>n.right?[{relation:"body",offset:this.mathlist.root.body.length-1}]:this._pathFromPoint(l,c,{bias:0}),s){let n=document.createElement("div");n.className="ML__scroller",this.element.appendChild(n),n.style.left=u.left-200+"px",n=document.createElement("div"),n.className="ML__scroller",this.element.appendChild(n),n.style.left=u.right+"px",t.shiftKey?(this.mathlist.setRange(this.mathlist.path,s),s=Ce.clone(this.mathlist.path),s[s.length-1].offset-=1):this.mathlist.setPath(s,0),r=!0,this.style={},3===t.detail||qi>2?(d(t),3!==t.detail&&3!==qi||this.mathlist.selectAll_()):i||(i=!0,window.PointerEvent?(Li(e.field,"pointermove",p),Li(e.field,"pointerend pointercancel pointerup",d),e.field.setPointerCapture(t.pointerId)):(Li(window,"blur",d),t.touches?(Li(t.target,"touchmove",p),Li(t.target,"touchend",d)):(Li(window,"mousemove",p),Li(window,"mouseup",d))),2!==t.detail&&2!==qi||(a=!0,this.mathlist.selectGroup_()))}}else Fi=null;r&&this._requestUpdate(),t.preventDefault()}_onSelectionDidChange(){this.mathlist.commitCommandStringBeforeInsertionPoint();const t=ae("math",this.mathlist.getSelectedAtoms()).toLatex(!1);t?(this.textarea.value=t,this.$hasFocus()&&this.textarea.select&&this.textarea.select()):(this.textarea.value="",this.textarea.setAttribute("aria-label",""));{const t=this.mode;this.mode=this.mathlist.anchorMode()||this.config.defaultMode,this.mode!==t&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode),"command"===t&&"command"!==this.mode&&(hs.hidePopover(this),this.mathlist.removeCommandString())}hs.updatePopoverPosition(this,{deferred:!0}),"function"==typeof this.config.onSelectionDidChange&&this.config.onSelectionDidChange(this)}_onContentDidChange(){this.undoManager.canRedo()?this.element.classList.add("can-redo"):this.element.classList.remove("can-redo"),this.undoManager.canUndo()?this.element.classList.add("can-undo"):this.element.classList.remove("can-undo"),"function"==typeof this.config.onContentDidChange&&this.config.onContentDidChange(this)}_nextAtomSpeechText(t){function e(t,e){return"body"===e.relation?{enclose:"cross out",leftright:"fence",surd:"square root",root:"math field"}[t.type]:{numer:"numerator",denom:"denominator",index:"index",body:"parent",subscript:"subscript",superscript:"superscript"}[e.relation]}const s=t?t.path:[],i=this.mathlist.path,a=i[i.length-1];let r="";for(;s.length>i.length;)r+="out of "+e(t.parent(),s[s.length-1])+"; ",s.pop();if(!this.mathlist.isCollapsed())return Ei(this,"",this.mathlist.getSelectedAtoms());const n=e(this.mathlist.parent(),a);0===a.offset&&(r+=(n?"start of "+n:"unknown")+": ");const o=this.mathlist.sibling(Math.max(1,this.mathlist.extent));return o?r+=Ei(this,"",o):0!==a.offset&&(r+=n?"end of "+n:"unknown"),r}_announce(t,e,s){"function"==typeof this.config.onAnnounce&&this.config.onAnnounce(this,t,e,s)}_onFocus(){this.config.readOnly||this.blurred&&(this.blurred=!1,this.textarea.focus&&this.textarea.focus(),"onfocus"===this.config.virtualKeyboardMode&&this.showVirtualKeyboard_(),hs.updatePopoverPosition(this),this.config.onFocus&&this.config.onFocus(this),this._requestUpdate())}_onBlur(){this.blurred||(this.blurred=!0,this.ariaLiveText.textContent="","onfocus"===this.config.virtualKeyboardMode&&this.hideVirtualKeyboard_(),this.complete_({discard:!0}),this._requestUpdate(),this.config.onBlur&&this.config.onBlur(this))}_onResize(){this.element.classList.remove("ML__isNarrowWidth","ML__isWideWidth","ML__isExtendedWidth"),window.innerWidth>=1024?this.element.classList.add("ML__isExtendedWidth"):window.innerWidth>=768?this.element.classList.add("ML__isWideWidth"):this.element.classList.add("ML__isNarrowWidth"),hs.updatePopoverPosition(this)}toggleKeystrokeCaption_(){this.keystrokeCaptionVisible=!this.keystrokeCaptionVisible,this.keystrokeCaption.innerHTML="",this.keystrokeCaptionVisible||(this.keystrokeCaption.style.visibility="hidden")}_showKeystroke(t){const e=this.keystrokeCaption;if(e&&this.keystrokeCaptionVisible){const s=this.element.getBoundingClientRect();e.style.left=s.left+"px",e.style.top=s.top-64+"px",e.innerHTML="<span>"+(Pe.stringify(t)||t)+"</span>"+e.innerHTML,e.style.visibility="visible",setTimeout((function(){e.childNodes.length>0&&e.removeChild(e.childNodes[e.childNodes.length-1]),0===e.childNodes.length&&(e.style.visibility="hidden")}),3e3)}}$perform(t){if(!t)return!1;let e,s=!1,i=[],a=!1;if(Array.isArray(t)?(e=t[0],i=t.slice(1)):e=t,e=e.replace(/-\w/g,t=>t[1].toUpperCase()),e+="_","function"==typeof this.mathlist[e]){if(/^(delete|transpose|add)/.test(e)&&this._resetKeystrokeBuffer(),/^(delete|transpose|add)/.test(e)&&"command"!==this.mode&&(this.undoManager.pop(),this.undoManager.snapshot(this.config)),this.mathlist[e](...i),/^(delete|transpose|add)/.test(e)&&"command"!==this.mode&&this.undoManager.snapshot(this.config),/^(delete)/.test(e)&&"command"===this.mode){const t=At(this.mathlist.extractCommandStringAroundInsertionPoint());0===t.length?hs.hidePopover(this):hs.showPopoverWithLatex(this,t[0].match,t.length>1)}a=!0,s=!0}else"function"==typeof this[e]&&(a=this[e](...i),s=!0);return this.mathlist.isCollapsed()&&!/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(e)||(this._resetKeystrokeBuffer(),this.style={}),a&&this._requestUpdate(),s}performWithFeedback_(t){return this.$focus(),this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),"moveToNextPlaceholder"===(t=t.replace(/-\w/g,t=>t[1].toUpperCase()))||"moveToPreviousPlaceholder"===t||"complete"===t?this.returnKeypressSound?(this.returnKeypressSound.load(),this.returnKeypressSound.play().catch(t=>{})):this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>{})):"deletePreviousChar"!==t&&"deleteNextChar"!==t&&"deletePreviousWord"!==t&&"deleteNextWord"!==t&&"deleteToGroupStart"!==t&&"deleteToGroupEnd"!==t&&"deleteToMathFieldStart"!==t&&"deleteToMathFieldEnd"!==t||!this.deleteKeypressSound?this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>{})):(this.deleteKeypressSound.load(),this.deleteKeypressSound.play().catch(t=>{})),this.$perform(t)}convertLastAtomsToText_(t,e){"function"==typeof t&&(e=t,t=1/0),void 0===t&&(t=1/0);let s=0,i=!1;for(this.mathlist.contentWillChange();!i;){const a=this.mathlist.sibling(s);i=0===t||!a||"math"!==a.mode||!(/mord|textord|mpunct/.test(a.type)||"mop"===a.type&&/[a-zA-Z]+/.test(a.body))||a.superscript||a.subscript||e&&!e(a),i||(a.applyStyle({mode:"text"}),a.symbol=a.body,a.latex=""),s-=1,t-=1}this.mathlist.contentDidChange()}convertLastAtomsToMath_(t,e){"function"==typeof t&&(e=t,t=1/0),void 0===t&&(t=1/0),this.mathlist.contentWillChange();let s=0,i=!1;for(;!i;){const a=this.mathlist.sibling(s);i=0===t||!a||"text"!==a.mode||" "===a.body||e&&!e(a),i||a.applyStyle({mode:"math",type:"mord"}),s-=1,t-=1}this.removeIsolatedSpace_(),this.mathlist.contentDidChange()}removeIsolatedSpace_(){let t=0;for(;this.mathlist.sibling(t)&&"math"===this.mathlist.sibling(t).mode;)t-=1;if(this.mathlist.sibling(t)&&"text"===this.mathlist.sibling(t).mode&&" "===this.mathlist.sibling(t).body&&(!this.mathlist.sibling(t-1)||"math"===this.mathlist.sibling(t-1).mode)){this.mathlist.contentWillChange(),this.mathlist.siblings().splice(t-1,1),this.mathlist.contentDidChange();const e=this.mathlist.suppressChangeNotifications;this.mathlist.suppressChangeNotifications=!0,this.mathlist.setSelection(this.mathlist.anchorOffset()-1),this.mathlist.suppressChangeNotifications=e}}getTextBeforeAnchor_(){let t="",e=0,s=!1;for(;!s;){const i=this.mathlist.sibling(e);s=!(i&&("text"===i.mode&&!i.type||"math"===i.mode&&/mord|textord|mpunct/.test(i.type))),s||(t=i.body+t),e-=1}return t}smartMode_(t,e){if(this.smartModeSuppressed)return!1;if(this.mathlist.endOffset()<this.mathlist.siblings().length-1)return!1;if(!e||e.ctrlKey||e.metaKey)return!1;const s=rs.eventToChar(e);if(s.length>1)return!1;if(!this.mathlist.isCollapsed())return!("text"!==this.mode||!/[/_^]/.test(s));const i=this.getTextBeforeAnchor_()+s;if("text"===this.mode){if("Esc"===t||/[/\\]/.test(s))return!0;if(/[\^_]/.test(s))return/(^|\s)[a-zA-Z][^_]$/.test(i)&&this.convertLastAtomsToMath_(1),!0;const e={")":"(","}":"{","]":"["}[s];if(e&&this.mathlist.parent()&&"leftright"===this.mathlist.parent().type&&this.mathlist.parent().leftDelim===e)return!0;if(/(^|[^a-zA-Z])(a|I)[ ]$/.test(i))return!1;if(/[$€£₤₺¥¤฿¢₡₧₨₹₩₱]/u.test(s))return!0;if(/(^|[^a-zA-Z'’])[a-zA-Z][ ]$/.test(i))return this.convertLastAtomsToMath_(1),!1;if(/[^0-9]\.[^0-9\s]$/.test(i)){this.convertLastAtomsToMath_(1);const t=this.mathlist.sibling(0);return t.body="⋅",t.variant="auto",t.symbol="\\cdot",t.latex="",!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(i))return this.convertLastAtomsToMath_(1),!0;if(/\.[0-9]$/.test(i))return this.convertLastAtomsToMath_(1),!0;if(/[(][0-9+\-.]$/.test(i))return this.convertLastAtomsToMath_(1),!0;if(/[(][a-z][,;]$/.test(i))return this.convertLastAtomsToMath_(2),!0;if(/[0-9+\-=><*|]$/.test(s))return this.removeIsolatedSpace_(),!0}else{if("Spacebar"===t)return this.convertLastAtomsToText_(t=>/[a-z][:,;.]$/.test(t.body)),!0;if(/[a-zA-Z]{3,}$/.test(i)&&!/(dxd|abc|xyz|uvw)$/.test(i))return this.convertLastAtomsToText_(t=>/[a-zA-Z:,;.]/.test(t.body)),!0;if(/(^|\W)(if|If)$/i.test(i))return this.convertLastAtomsToText_(1),!0;if(/(\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5){3,}$/u.test(i)&&!/(αβγ)$/.test(i))return this.convertLastAtomsToText_(t=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5)/u.test(t.body)),!0;if(/\?|\./.test(s))return!0}return!1}_onKeystroke(t,e){if(this._showKeystroke(t),clearTimeout(this.keystrokeBufferResetTimer),this.config.onKeystroke&&!this.config.onKeystroke(this,t,e))return e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let s,i,a,r=!1;if("command"!==this.mode&&(!e||!e.ctrlKey&&!e.metaKey)){const t=rs.eventToChar(e);if("Backspace"!==t)if(!t||t.length>1)this._resetKeystrokeBuffer();else{const e=this.keystrokeBuffer+t;let a=0;for(;!s&&a<e.length;){let t;if(this.keystrokeBufferStates[a]){const e=new Qe.EditableMathlist;e.root=ae("math",Me(this.keystrokeBufferStates[a].latex,this.config.default,null,this.config.macros)),e.setPath(this.keystrokeBufferStates[a].selection),t=e.siblings()}else t=this.mathlist.siblings();s=Pe.forString(this.mode,t,e.slice(a),this.config),a+=1}i=a-1,this.keystrokeBuffer+=t,this.keystrokeBufferStates.push(this.undoManager.save()),Pe.startsWithString(e,this.config).length<=1?r=!0:this.config.inlineShortcutTimeout&&(this.keystrokeBufferResetTimer=setTimeout(()=>{this._resetKeystrokeBuffer()},this.config.inlineShortcutTimeout))}}if(this.config.smartMode){const i=this.mode;s?this.mode="math":this.smartMode_(t,e)&&(this.mode={math:"text",text:"math"}[this.mode],a=""),this.mode!==i&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode)}if(s||a||(a=Pe.selectorForKeystroke(this.mode,t)),!s&&!a)return!0;if(this.config.readOnly&&"insert"===a[0])return!0;this.mathlist.decorateCommandStringAroundInsertionPoint(!1);const n=this.mathlist.parent();if("moveAfterParent"===a&&n&&"leftright"===n.type&&this.mathlist.endOffset()===this.mathlist.siblings().length-1&&this.config.smartFence&&this.mathlist._insertSmartFence(".")&&(a="",this._requestUpdate()),"math"===this.mode&&"Spacebar"===t&&!s){const t=this.mathlist.sibling(1),e=this.mathlist.sibling(-1);(t&&"text"===t.mode||e&&"text"===e.mode)&&this.mathlist.insert(" ",{mode:"text"})}if((a&&!this.$perform(a)||s)&&s){if(!/^(\\{|\\}|\\[|\\]|\\@|\\#|\\$|\\%|\\^|\\_|\\backslash)$/.test(s)){const t={...this.mathlist.anchorStyle(),...this.style};this.mathlist.insert(rs.eventToChar(e),{suppressChangeNotifications:!0,mode:this.mode,style:t});const s=this.mode;this.undoManager.snapshotAndCoalesce(this.config),this.undoManager.restore(this.keystrokeBufferStates[i],{...this.config,suppressChangeNotifications:!0}),this.mode=s}this.mathlist.contentWillChange();const t=this.mathlist.suppressChangeNotifications;this.mathlist.suppressChangeNotifications=!0;const a={...this.mathlist.anchorStyle(),...this.style};this.mathlist.insert(s,{format:"latex",mode:this.mode,style:a,smartFence:!0}),this.removeIsolatedSpace_(),s.endsWith(" ")&&(this.mode="text",this.mathlist.insert(" ",{mode:"text",style:a})),this.mathlist.suppressChangeNotifications=t,this.mathlist.contentDidChange(),this.undoManager.snapshot(this.config),this._requestUpdate(),this._announce("replacement"),r&&this._resetKeystrokeBuffer()}return this.scrollIntoView(),e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1}_onTypedText(t,e){if(this.config.readOnly)return void this._announce("plonk");if((e=e||{}).focus&&this.$focus(),e.feedback&&(this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>{}))),e.commandMode&&"command"!==this.mode&&this.switchMode_("command"),this.mathlist.decorateCommandStringAroundInsertionPoint(!1),e.simulateKeystroke){const e=t.charAt(0),s=rs.charToEvent(e);if(!this.$keystroke(rs.keyboardEventToString(s),s))return}let s="",i=!1;if(this.pasteInProgress)this.pasteInProgress=!1,this.mathlist.insert(t,{smartFence:this.config.smartFence,mode:"math"});else{const e={...this.mathlist.anchorStyle(),...this.style},a=de(t);for(const t of a)if("command"===this.mode){this.mathlist.removeSuggestion(),this.suggestionIndex=0;const e=this.mathlist.extractCommandStringAroundInsertionPoint(),a=At(e+t);i=a.length>1,0===a.length?(this.mathlist.insert(t,{mode:"command"}),/^\\[a-zA-Z\\*]+$/.test(e+t)&&this.mathlist.decorateCommandStringAroundInsertionPoint(!0),hs.hidePopover(this)):(this.mathlist.insert(t,{mode:"command"}),a[0].match!==e+t&&this.mathlist.insertSuggestion(a[0].match,-a[0].match.length+e.length+1),s=a[0].match)}else if("math"===this.mode){const s={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[t];if(s){if("moveToSuperscript"===s){if(this._superscriptDepth()>=this.config.scriptDepth[1])return void this._announce("plonk")}else if("moveToSubscript"===s&&this._subscriptDepth()>=this.config.scriptDepth[0])return void this._announce("plonk");this.$perform(s)}else this.config.smartSuperscript&&"superscript"===this.mathlist.relation()&&/[0-9]/.test(t)&&0===this.mathlist.siblings().filter(t=>"first"!==t.type).length?(this.mathlist.insert(t,{mode:"math",style:e}),this.mathlist.moveAfterParent_()):this.mathlist.insert(t,{mode:"math",style:e,smartFence:this.config.smartFence})}else"text"===this.mode&&this.mathlist.insert(t,{mode:"text",style:e})}"command"!==this.mode&&this.undoManager.snapshotAndCoalesce(this.config),this._requestUpdate(),this.scrollIntoView(),hs.showPopoverWithLatex(this,s,i)}_hash(){let t=0;const e=this.mathlist.root.toLatex(!1);for(let s=0;s<e.length;s++)t=31*t+e.charCodeAt(s),t|=0;return Math.abs(t)}_requestUpdate(){this.dirty||(this.dirty=!0,requestAnimationFrame(t=>$i(this)&&this._render()))}_render(t){t=t||{},this.dirty=!1,window.mathlive||(window.mathlive={}),this.mathlist.anchor()||(this.mathlist.path=[{relation:"body",offset:0}]),this.mathlist.forEach(t=>{t.caret="",t.isSelected=!1,t.containsCaret=!1});const e=this.$hasFocus();if(this.mathlist.isCollapsed()?this.mathlist.anchor().caret=e&&!this.config.readOnly?this.mode:"":this.mathlist.forEachSelected(t=>{t.isSelected=!0}),e&&!this.config.readOnly){let t=this.mathlist.ancestor(1),e=1,s=!1;for(;t&&!s;)"surd"!==t.type&&"leftright"!==t.type||(t.containsCaret=!0,s=!0),e+=1,t=this.mathlist.ancestor(e)}const s=Z(se({mathstyle:"displaystyle",letterShapeStyle:this.config.letterShapeStyle,generateID:{seed:this._hash(),groupNumbers:t.forHighlighting},macros:this.config.macros},this.mathlist.root),"ML__base");s.attributes={translate:"no","aria-hidden":"true"};const i=Z("","ML__strut");i.setStyle("height",s.height,"em");const a=[i];if(0!==s.depth){const t=Z("","ML__strut--bottom");t.setStyle("height",s.height+s.depth,"em"),t.setStyle("vertical-align",-s.depth,"em"),a.push(t)}a.push(s);const r=Z(a,"ML__mathlive");this.field.innerHTML=r.toMarkup(0,this.config.horizontalSpacingScale),this.field.classList.toggle("ML__focused",e&&!this.config.readOnly),this.accessibleNode.innerHTML="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+ie.toMathML(this.mathlist.root,this.config)+"</math>";const n=this._getSelectionBounds();if(n){const t=document.createElement("div");t.classList.add("ML__selection"),t.style.position="absolute",t.style.left=n.left+"px",t.style.top=n.top+"px",t.style.width=Math.ceil(n.right-n.left)+"px",t.style.height=Math.ceil(n.bottom-n.top-1)+"px",this.field.insertBefore(t,this.field.childNodes[0])}}_onPaste(){return this.pasteInProgress=!0,!0}_onCut(){return setTimeout(function(){this.$clearSelection(),this._requestUpdate()}.bind(this),0),!0}_onCopy(t){this.mathlist.isCollapsed()?(t.clipboardData.setData("text/plain","$$"+this.$text("latex-expanded")+"$$"),t.clipboardData.setData("application/json",this.$text("json")),t.clipboardData.setData("application/xml",this.$text("mathML"))):(t.clipboardData.setData("text/plain","$$"+this.$selectedText("latex-expanded")+"$$"),t.clipboardData.setData("application/json",this.$selectedText("json")),t.clipboardData.setData("application/xml",this.$selectedText("mathML"))),t.preventDefault()}formatMathlist(t,e){let s="";if("latex"===(e=e||"latex")||"latex-expanded"===e)s=t.toLatex("latex-expanded"===e);else if("mathML"===e)s=t.toMathML(this.config);else if("spoken"===e)s=ie.toSpeakableText(t,this.config);else if("spoken-text"===e){const e=this.config.textToSpeechMarkup;this.config.textToSpeechMarkup="",s=ie.toSpeakableText(t,this.config),this.config.textToSpeechMarkup=e}else if("spoken-ssml"===e||"spoken-ssml-withHighlighting"===e){const i=this.config.textToSpeechMarkup,a=this.config.generateID;this.config.textToSpeechMarkup="ssml","spoken-ssml-withHighlighting"===e&&(this.config.generateID=!0),s=ie.toSpeakableText(t,this.config),this.config.textToSpeechMarkup=i,this.config.generateID=a}else if("json"===e){const e=ie.toAST(t,this.config);s=JSON.stringify(e)}else if("json-2"===e){const e=ie.toAST(t,this.config);s=JSON.stringify(e,null,2)}else"ASCIIMath"===e&&(s=Ms(t,this.config));return s}$text(t){return this.formatMathlist(this.mathlist.root,t)}$selectedText(t){const e=this.mathlist.getSelectedAtoms();if(!e)return"";const s=ae("math",e);return this.formatMathlist(s,t)}$selectionIsCollapsed(){return this.mathlist.isCollapsed()}$selectionDepth(){return this.mathlist.path.length}_superscriptDepth(){let t=0,e=0,s=this.mathlist.ancestor(e),i=!1;for(;s;)(s.superscript||s.subscript)&&(t+=1),s.superscript?i=!0:s.subscript&&(i=!1),e+=1,s=this.mathlist.ancestor(e);return i?t:0}_subscriptDepth(){let t=0,e=0,s=this.mathlist.ancestor(e),i=!1;for(;s;)(s.superscript||s.subscript)&&(t+=1),s.superscript?i=!1:s.subscript&&(i=!0),e+=1,s=this.mathlist.ancestor(e);return i?t:0}$selectionAtStart(){return 0===this.mathlist.startOffset()}$selectionAtEnd(){return this.mathlist.endOffset()>=this.mathlist.siblings().length-1}groupIsSelected(){return 0===this.mathlist.startOffset()&&this.mathlist.endOffset()>=this.mathlist.siblings().length-1}$latex(t,e){return t?(t!==this.mathlist.root.toLatex()&&(e=e||{},this.mathlist.insert(t,Object.assign({},this.config,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",mode:"math",suppressChangeNotifications:e.suppressChangeNotifications})),this.undoManager.snapshot(this.config),this._requestUpdate()),t):this.mathlist.root.toLatex()}$el(){return this.element}undo(){return this.complete_(),this.undoManager.undo(this.config),!0}redo(){return this.complete_(),this.undoManager.redo(this.config),!0}scrollIntoView(){this.dirty&&this._render();let t=this._getCaretPosition();const e=this.field.getBoundingClientRect();if(!t){const s=this._getSelectionBounds();s&&(t={x:s.right+e.left-this.field.scrollLeft,y:s.top+e.top-this.field.scrollTop})}if(t){const s=t.x-window.scrollX;s<e.left?this.field.scroll({top:0,left:s-e.left+this.field.scrollLeft-20,behavior:"smooth"}):s>e.right&&this.field.scroll({top:0,left:s-e.right+this.field.scrollLeft+20,behavior:"smooth"})}}scrollToStart(){this.field.scroll(0,0)}scrollToEnd(){const t=this.field.getBoundingClientRect();this.field.scroll(t.left-window.scrollX,0)}enterCommandMode_(){this.switchMode_("command")}copyToClipboard_(){return this.$focus(),this.mathlist.isCollapsed()&&this.$select(),document.execCommand("copy"),!1}cutToClipboard_(){return this.$focus(),document.execCommand("cut"),!0}pasteFromClipboard_(){return this.$focus(),document.execCommand("paste"),!0}$insert(t,e){if("string"==typeof t&&t.length>0){if((e=e||{}).focus&&this.$focus(),e.feedback&&(this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play())),"\\\\"===t)this.mathlist.addRowAfter_();else if("&"===t)this.mathlist.addColumnAfter_();else{const s=this.style;this.mathlist.insert(t,{mode:this.mode,style:this.mathlist.anchorStyle(),...e}),e.resetStyle&&(this.style=s)}return this.undoManager.snapshot(this.config),this._requestUpdate(),!0}return!1}switchMode_(t,e,s){this._resetKeystrokeBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(t),e&&this.$insert(e,{format:"latex",mode:{math:"text",text:"math"}[t]}),this.mathlist.decorateCommandStringAroundInsertionPoint(!1),"command"===t?(this.mathlist.removeSuggestion(),hs.hidePopover(this),this.suggestionIndex=0,this.virtualKeyboardVisible&&this.switchKeyboardLayer_("lower-command"),this.mathlist.insert("",{mode:"math"})):this.mode=t,s&&this.$insert(s,{format:"latex",mode:t}),"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode),this._requestUpdate()}complete_(t){if(t=t||{},hs.hidePopover(this),t.discard)return this.mathlist.spliceCommandStringAroundInsertionPoint(null),this.switchMode_("math"),!0;const e=this.mathlist.extractCommandStringAroundInsertionPoint(!t.acceptSuggestion);if(e){if("\\("===e||"\\)"===e)this.mathlist.spliceCommandStringAroundInsertionPoint([]),this.mathlist.insert(e.slice(1),{mode:this.mode});else{const t="math";if(function(t,e){return!(!at[e]||at[e].mode&&!at[e].mode.includes(t))||!!{text:lt,math:it}[t][e]}(t,e)){const s=Me(e,t,null,this.config.macros);this.mathlist.spliceCommandStringAroundInsertionPoint(s)}else{const s=Me(e,t,null,this.config.macros);s?this.mathlist.spliceCommandStringAroundInsertionPoint(s):this.mathlist.decorateCommandStringAroundInsertionPoint(!0)}}return this.undoManager.snapshot(this.config),this._announce("replacement"),!0}return!1}_updateSuggestion(){this.mathlist.positionInsertionPointAfterCommitedCommand(),this.mathlist.removeSuggestion();const t=this.mathlist.extractCommandStringAroundInsertionPoint(),e=At(t);if(0===e.length)hs.hidePopover(this),this.mathlist.decorateCommandStringAroundInsertionPoint(!0);else{const s=this.suggestionIndex%e.length,i=t.length-e[s].match.length;0!==i&&this.mathlist.insertSuggestion(e[s].match,i),hs.showPopoverWithLatex(this,e[s].match,e.length>1)}this._requestUpdate()}nextSuggestion_(){return this.suggestionIndex+=1,this._updateSuggestion(),!1}previousSuggestion_(){if(this.suggestionIndex-=1,this.suggestionIndex<0){this.mathlist.removeSuggestion();const t=At(this.mathlist.extractCommandStringAroundInsertionPoint());this.suggestionIndex=t.length-1}return this._updateSuggestion(),!1}_attachButtonHandlers(t,e){const s=this;let i,a,r,n,o;"object"==typeof e&&(e.default||e.pressed)?(e.default&&t.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e.default)),e.alt&&t.setAttribute("data-"+this.config.namespace+"command-alt",JSON.stringify(e.alt)),e.altshift&&t.setAttribute("data-"+this.config.namespace+"command-altshift",JSON.stringify(e.altshift)),e.shift&&t.setAttribute("data-"+this.config.namespace+"command-shift",JSON.stringify(e.shift)),e.pressed&&t.setAttribute("data-"+this.config.namespace+"command-pressed",JSON.stringify(e.pressed)),e.pressAndHoldStart&&t.setAttribute("data-"+this.config.namespace+"command-pressAndHoldStart",JSON.stringify(e.pressAndHoldStart)),e.pressAndHoldEnd&&t.setAttribute("data-"+this.config.namespace+"command-pressAndHoldEnd",JSON.stringify(e.pressAndHoldEnd))):t.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e)),Li(t,"mousedown touchstart:passive",(function(e){if("mousedown"!==e.type||1===e.buttons){e.stopPropagation(),e.preventDefault(),t.classList.add("pressed"),i=Date.now(),"touchstart"===e.type&&(r=e.changedTouches[0].identifier);const n=t.getAttribute("data-"+s.config.namespace+"command-pressed");n&&s.$perform(JSON.parse(n));const l=t.getAttribute("data-"+s.config.namespace+"command-pressAndHoldStart");l&&(a=t,o&&clearTimeout(o),o=window.setTimeout((function(){t.classList.contains("pressed")&&s.$perform(JSON.parse(l))}),300))}})),Li(t,"mouseleave touchcancel",(function(){t.classList.remove("pressed")})),Li(t,"touchmove:passive",(function(t){t.preventDefault();for(let e=0;e<t.changedTouches.length;e++)if(t.changedTouches[e].identifier===r){const s=document.elementFromPoint(t.changedTouches[e].clientX,t.changedTouches[e].clientY);s!==n&&n&&(n.dispatchEvent(new MouseEvent("mouseleave"),{bubbles:!0}),n=null),s&&(n=s,s.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!0,buttons:1})))}})),Li(t,"mouseenter",(function(e){1===e.buttons&&t.classList.add("pressed")})),Li(t,"mouseup touchend click",(function(e){if(n){e.stopPropagation(),e.preventDefault();const t=n;return n=null,void t.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0}))}if(t.classList.remove("pressed"),t.classList.add("active"),"click"===e.type&&0!==e.detail)return e.stopPropagation(),void e.preventDefault();window.setTimeout((function(){t.classList.remove("active")}),150);let r=t.getAttribute("data-"+s.config.namespace+"command-pressAndHoldEnd");const o=Date.now();(t!==a||o<i+300)&&(r=void 0),!r&&e.altKey&&e.shiftKey&&(r=t.getAttribute("data-"+s.config.namespace+"command-altshift")),!r&&e.altKey&&(r=t.getAttribute("data-"+s.config.namespace+"command-alt")),!r&&e.shiftKey&&(r=t.getAttribute("data-"+s.config.namespace+"command-shift")),r||(r=t.getAttribute("data-"+s.config.namespace+"command")),r&&s.$perform(JSON.parse(r)),e.stopPropagation(),e.preventDefault()}))}_makeButton(t,e,s,i){const a=document.createElement("span");return a.innerHTML=t,e&&a.classList.add([].slice.call(e.split(" "))),s&&a.setAttribute("aria-label",s),this._attachButtonHandlers(a,i),a}showAlternateKeys_(t,e){const s=Ti("mathlive-alternate-keys-panel","ML__keyboard alternate-keys");this.virtualKeyboard.classList.contains("material")&&s.classList.add("material"),e.length>=7?s.style.width="286px":4===e.length||2===e.length?s.style.width="146px":1===e.length?s.style.width="86px":s.style.width="146px",s.style.height="auto";let i="";for(const t of e)i+="<li","string"==typeof t?i+=' data-latex="'+t.replace(/"/g,"&quot;")+'"':(t.latex&&(i+=' data-latex="'+t.latex.replace(/"/g,"&quot;")+'"'),t.content&&(i+=' data-content="'+t.content.replace(/"/g,"&quot;")+'"'),t.insert&&(i+=' data-insert="'+t.insert.replace(/"/g,"&quot;")+'"'),t.command&&(i+=" data-command='"+t.command.replace(/"/g,"&quot;")+"'"),t.aside&&(i+=' data-aside="'+t.aside.replace(/"/g,"&quot;")+'"'),t.classes&&(i+=' data-classes="'+t.classes+'"')),i+=">",i+=t.label||"",i+="</li>";i="<ul>"+i+"</ul>",s.innerHTML=i,ks.makeKeycap(this,s.getElementsByTagName("li"),"performAlternateKeys");const a=this.virtualKeyboard.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+t+'"]').getBoundingClientRect();if(a){a.top-s.clientHeight<0&&(s.style.width="auto",e.length<=6?s.style.height="56px":e.length<=12?s.style.height="108px":s.style.height="205px");const t=(a.top-s.clientHeight+5).toString()+"px",i=Math.max(0,Math.min(window.innerWidth-s.offsetWidth,(a.left+a.right-s.offsetWidth)/2))+"px";s.style.transform="translate("+i+","+t+")",s.classList.add("is-visible")}return!1}hideAlternateKeys_(){const t=document.getElementById("mathlive-alternate-keys-panel");return t&&(t.classList.remove("is-visible"),t.innerHTML="",Di(t)),!1}performAlternateKeys_(t){return this.hideAlternateKeys_(),this.$perform(t)}switchKeyboardLayer_(t){if("off"!==this.config.virtualKeyboardMode){"lower-command"!==t&&"upper-command"!==t&&"symbols-command"!==t&&this.complete_(),this.showVirtualKeyboard_(),this.hideAlternateKeys_(),this.unshiftKeyboardLayer_();const e=this.virtualKeyboard.getElementsByClassName("keyboard-layer");let s=!1;for(let i=0;i<e.length;i++)if(e[i].dataset.layer===t){s=!0;break}if(s)for(let s=0;s<e.length;s++)e[s].dataset.layer===t?e[s].classList.add("is-visible"):e[s].classList.remove("is-visible");this.$focus()}return!0}shiftKeyboardLayer_(){const t=this.virtualKeyboard.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(t)for(let e=0;e<t.length;e++){const s=t[e];let i=s.getAttribute("data-shifted");if(i||/^[a-z]$/.test(s.innerHTML)){s.setAttribute("data-unshifted-content",s.innerHTML),i||(i=s.innerHTML.toUpperCase()),s.innerHTML=i;const t=s.getAttribute("data-"+this.config.namespace+"command");if(t){s.setAttribute("data-unshifted-command",t);const e=s.getAttribute("data-shifted-command");if(e)s.setAttribute("data-"+this.config.namespace+"command",e);else{const e=JSON.parse(t);Array.isArray(e)&&(e[1]=e[1].toUpperCase()),s.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e))}}}}return!1}unshiftKeyboardLayer_(){const t=this.virtualKeyboard.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(t)for(let e=0;e<t.length;e++){const s=t[e],i=s.getAttribute("data-unshifted-content");i&&(s.innerHTML=i);const a=s.getAttribute("data-unshifted-command");a&&s.setAttribute("data-"+this.config.namespace+"command",a)}return!1}insertAndUnshiftKeyboardLayer_(t){return this.$insert(t),this.unshiftKeyboardLayer_(),!0}toggleVirtualKeyboardAlt_(){let t=!1;return this.virtualKeyboard&&(t=this.virtualKeyboard.classList.contains("material"),this.virtualKeyboard.remove(),delete this.virtualKeyboard,this.virtualKeyboard=null),this.showVirtualKeyboard_(t?"":"material"),!1}toggleVirtualKeyboardShift_(){this.config.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[this.config.virtualKeyboardLayout];let t=this.virtualKeyboard?this.virtualKeyboard.querySelector("div.keyboard-layer.is-visible"):null;return t=t?t.id:"",this.virtualKeyboard&&(this.virtualKeyboard.remove(),delete this.virtualKeyboard,this.virtualKeyboard=null),this.showVirtualKeyboard_(),t&&this.switchKeyboardLayer_(t),!1}showVirtualKeyboard_(t){return this.virtualKeyboardVisible=!1,this.toggleVirtualKeyboard_(t),!1}hideVirtualKeyboard_(){return this.virtualKeyboardVisible=!0,this.toggleVirtualKeyboard_(),!1}toggleVirtualKeyboard_(t){return this.virtualKeyboardVisible=!this.virtualKeyboardVisible,this.virtualKeyboardVisible?(this.virtualKeyboard?this.virtualKeyboard.classList.add("is-visible"):(this.virtualKeyboard=ks.make(this,t),Li(this.virtualKeyboard,"touchstart:passive mousedown",()=>{this.$focus()}),document.body.appendChild(this.virtualKeyboard)),window.setTimeout(()=>{this.virtualKeyboard.classList.add("is-visible")},1)):this.virtualKeyboard&&this.virtualKeyboard.classList.remove("is-visible"),"function"==typeof this.config.onVirtualKeyboardToggle&&this.config.onVirtualKeyboardToggle(this,this.virtualKeyboardVisible,this.virtualKeyboard),!1}$applyStyle(t){if(this._resetKeystrokeBuffer(),(t=function(t){const e={};return"string"==typeof t.mode&&(e.mode=t.mode.toLowerCase()),"string"==typeof t.color&&(e.color=t.color),"string"==typeof t.backgroundColor&&(e.backgroundColor=t.backgroundColor),"string"==typeof t.fontFamily&&(e.fontFamily=t.fontFamily),"string"==typeof t.series&&(e.fontSeries=t.series),"string"==typeof t.fontSeries&&(e.fontSeries=t.fontSeries.toLowerCase()),e.fontSeries&&(e.fontSeries={bold:"b",medium:"m",normal:"mn"}[e.fontSeries]||e.fontSeries),"string"==typeof t.shape&&(e.fontShape=t.shape),"string"==typeof t.fontShape&&(e.fontShape=t.fontShape.toLowerCase()),e.fontShape&&(e.fontShape={italic:"it",up:"n",upright:"n",normal:"n"}[e.fontShape]||e.fontShape),"string"==typeof t.size?e.fontSize=t.size:"number"==typeof t.size&&(e.fontSize="size"+Math.min(0,Math.max(10,t.size))),"string"==typeof t.fontSize&&(e.fontSize=t.fontSize.toLowerCase()),e.fontSize&&(e.fontSize={tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normal:"size5",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[e.fontSize]||e.fontSize),e}(t)).mode){if(this.mathlist.isCollapsed())this.switchMode_(t.mode);else{const t=this.mode,e="math"===(this.mathlist.anchorMode()||this.config.default)?"text":"math";let s=this.$selectedText("ASCIIMath");if("math"===e&&/^"[^"]+"$/.test(s)&&(s=s.slice(1,-1)),this.$insert(s,{mode:e,selectionMode:"item",format:"text"===e?"text":"ASCIIMath"}),this.mode=e,this.groupIsSelected()){const t=this.mathlist.parent();!t||"group"!==t.type&&"root"!==t.type||(t.mode=e)}this.mode!==t&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode)}delete t.mode}return this.mathlist.isCollapsed()?(this.style.fontSeries&&t.fontSeries===this.style.fontSeries&&(t.fontSeries="auto"),t.fontShape&&t.fontShape===this.style.fontShape&&(t.fontShape="auto"),t.color&&t.color===this.style.color&&(t.color="none"),t.backgroundColor&&t.backgroundColor===this.style.backgroundColor&&(t.backgroundColor="none"),t.fontSize&&t.fontSize===this.style.fontSize&&(t.fontSize="auto"),this.style={...this.style,...t}):(this.mathlist._applyStyle(t),this.undoManager.snapshot(this.config)),!0}$hasFocus(){return document.hasFocus()&&document.activeElement===this.textarea}$focus(){this.$hasFocus()||(this.textarea.focus&&this.textarea.focus(),this._announce("line"))}$blur(){this.$hasFocus()&&this.textarea.blur&&this.textarea.blur()}$select(){this.mathlist.selectAll_()}$clearSelection(){this.mathlist.delete_()}$keystroke(t,e){return this._onKeystroke(t,e)}$typedText(t){this._onTypedText(t)}typedText_(t,e){return this._onTypedText(t,e)}$setConfig(t){if(this.config||(this.config={namespace:"",overrideDefaultInlineShortcuts:!1,readOnly:!1,removeExtraneousParentheses:!0,scriptDepth:[1/0,1/0],smartFence:!0,smartSuperscript:!0,virtualKeyboard:"",virtualKeyboardLayout:"qwerty"}),this.config={...this.config,...t},void 0!==this.config.scriptDepth&&!Array.isArray(this.config.scriptDepth)){const t=parseInt(this.config.scriptDepth);this.config.scriptDepth=[t,t]}if(void 0===this.config.removeExtraneousParentheses&&(this.config.removeExtraneousParentheses=!0),this.config.onAnnounce=t.onAnnounce||Bi,this.config.macros=Object.assign({},nt,this.config.macros),!/^[a-z]*[-]?$/.test(this.config.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(this.config.namespace)||(this.config.namespace+="-"),ms.locale=this.config.locale||ms.locale,ms.merge(this.config.strings),this.config.virtualKeyboardLayout=t.virtualKeyboardLayout||{fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[ms.locale.substring(0,2)]||"qwerty",this.config.letterShapeStyle&&"auto"!==this.config.letterShapeStyle||("fr"===ms.locale.substring(0,2)?this.config.letterShapeStyle="french":this.config.letterShapeStyle="tex"),this.keypressSound=void 0,this.spacebarKeypressSound=void 0,this.returnKeypressSound=void 0,this.deleteKeypressSound=void 0,this.config.keypressSound&&("string"==typeof this.config.keypressSound?(this.keypressSound=new Audio,this.keypressSound.preload="none",this.keypressSound.src=this.config.keypressSound,this.keypressSound.volume=.5,this.spacebarKeypressSound=this.keypressSound,this.returnKeypressSound=this.keypressSound,this.deleteKeypressSound=this.keypressSound):(this.keypressSound=new Audio,this.keypressSound.preload="none",this.keypressSound.src=this.config.keypressSound.default,this.keypressSound.volume=.5,this.spacebarKeypressSound=this.keypressSound,this.returnKeypressSound=this.keypressSound,this.deleteKeypressSound=this.keypressSound,this.config.keypressSound.spacebar&&(this.spacebarKeypressSound=new Audio,this.spacebarKeypressSound.preload="none",this.spacebarKeypressSound.src=this.config.keypressSound.spacebar,this.spacebarKeypressSound.volume=.5),this.config.keypressSound.return&&(this.returnKeypressSound=new Audio,this.returnKeypressSound.preload="none",this.returnKeypressSound.src=this.config.keypressSound.return,this.returnKeypressSound.volume=.5),this.config.keypressSound.delete&&(this.deleteKeypressSound=new Audio,this.deleteKeypressSound.preload="none",this.deleteKeypressSound.src=this.config.keypressSound.delete,this.deleteKeypressSound.volume=.5))),this.config.plonkSound&&(this.plonkSound=new Audio,this.plonkSound.preload="none",this.plonkSound.src=this.config.plonkSound,this.plonkSound.volume=.5),this.readOnly&&this._onBlur(),this._requestUpdate()}speak_(t,e){e=e||{withHighlighting:!1};const s=function(t,e){let s=null;switch(e){case"all":s=t.mathlist.root;break;case"selection":t.mathlist.isCollapsed()||(s=t.mathlist.getSelectedAtoms());break;case"left":{const e=t.mathlist.siblings(),i=t.mathlist.startOffset();if(i>=1){s=[];for(let t=1;t<=i;t++)s.push(e[t])}break}case"right":{const e=t.mathlist.siblings(),i=t.mathlist.endOffset()+1;if(i<=e.length-1){s=[];for(let t=i;t<=e.length-1;t++)s.push(e[t])}break}case"start":case"end":break;case"group":s=t.mathlist.siblings();break;case"parent":{const e=t.mathlist.parent();e&&"root"!==e.type&&(s=t.mathlist.parent());break}}return s}(this,t);if(null===s)return this.config.handleSpeak(function(t){let e="";switch(t){case"all":break;case"selection":e="no selection";break;case"left":e="at start";break;case"right":e="at end";break;case"group":break;case"parent":e="no parent"}return e}(t)),!1;const i={...this.config};(e.withHighlighting||"amazon"===i.speechEngine)&&(i.textToSpeechMarkup=window.sre&&"sre"===i.textToSpeechRules?"ssml_step":"ssml",e.withHighlighting&&(i.generateID=!0));const a=ie.toSpeakableText(s,i);return e.withHighlighting?(window.mathlive.readAloudMathField=this,this._render({forHighlighting:!0}),this.config.handleReadAloud&&this.config.handleReadAloud(this.field,a,this.config)):this.config.handleSpeak&&this.config.handleSpeak(a,i),!1}}function Ei(t,e,s){const i=Object.assign({},t.config);return i.textToSpeechMarkup="",i.textToSpeechRulesOptions=i.textToSpeechRulesOptions||{},i.textToSpeechRulesOptions.markup="none",e+ie.toSpeakableText(s,i)}function Bi(t,e,s,i){let a="";"plonk"===e?(t.plonkSound&&(t.plonkSound.load(),t.plonkSound.play().catch(t=>{})),t._resetKeystrokeBuffer()):"delete"===e?a=Ei(t,"deleted: ",i):"focus"===e||/move/.test(e)?a=(t.mathlist.isCollapsed()?"":"selected: ")+t._nextAtomSpeechText(s):"replacement"===e?a=Ei(t,"",t.mathlist.sibling(0)):"line"===e?(a=Ei(t,"",t.mathlist.root),t.accessibleNode.innerHTML='<math xmlns="http://www.w3.org/1998/Math/MathML">'+ie.toMathML(t.mathlist.root,t.config)+"</math>",t.textarea.setAttribute("aria-label","after: "+a)):a=i?Ei(t,e+" ",i):e;const r=/\u00a0/.test(t.ariaLiveText.textContent)?"   ":"   ";t.ariaLiveText.textContent=a+r}function Ki(t,e,s){let i=s,a=0;const r=t.length;for(;i<e.length;){const s=e[i];if(a<=0&&e.slice(i,i+r)===t)return i;"\\"===s?i++:"{"===s?a++:"}"===s&&a--,i++}return-1}function Oi(t,e,s,i){const a=[];for(let r=0;r<t.length;r++)if("text"===t[r].type){const n=t[r].data;let o,l=!0,c=0;o=n.indexOf(e),-1!==o&&(c=o,c>0&&a.push({type:"text",data:n.slice(0,c)}),l=!1);let h=!1;for(;!h;){if(l){if(o=n.indexOf(e,c),-1===o){h=!0;break}c!==o&&a.push({type:"text",data:n.slice(c,o)}),c=o}else{if(o=Ki(s,n,c+e.length),-1===o){h=!0;break}a.push({type:"math",data:n.slice(c+e.length,o),rawData:n.slice(c,o+s.length),mathstyle:i}),c=o+s.length}l=!l}c<n.length&&a.push({type:"text",data:n.slice(c)})}else a.push(t[r]);return a}function Ii(t,e){let s=[{type:"text",data:t}];for(let t=0;t<e.inline.length;t++){const i=e.inline[t];s=Oi(s,i[0],i[1],"textstyle")}for(let t=0;t<e.display.length;t++){const i=e.display[t];s=Oi(s,i[0],i[1],"displaystyle")}return s}function Ri(t,e,s,i){const a=function(t,e,s,i){let a=document.createElement("span");a.setAttribute("aria-hidden","true"),e.preserveOriginalContent&&(a.setAttribute("data-"+e.namespace+"original-content",t),s&&a.setAttribute("data-"+e.namespace+"original-mathstyle",s));try{a.innerHTML=e.renderToMarkup(t,{mathstyle:s||"displaystyle",format:"html",macros:e.macros})}catch(e){if(!i)return null;a=document.createTextNode(t)}return a}(t,s,e,i);if(a&&/\b(mathml|speakable-text)\b/i.test(s.renderAccessibleContent)){const e=document.createDocumentFragment();if(/\bmathml\b/i.test(s.renderAccessibleContent)&&s.renderToMathML&&e.appendChild(function(t,e){const s=document.createElement("span");try{s.innerHTML="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+e.renderToMathML(t,e)+"</math>"}catch(e){s.textContent=t}return s.className="sr-only",s}(t,s)),/\bspeakable-text\b/i.test(s.renderAccessibleContent)&&s.renderToSpeakableText){const i=document.createElement("span");i.innerHTML=s.renderToSpeakableText(t,s),i.className="sr-only",e.appendChild(i)}return e.appendChild(a),e}return a}function Ni(t,e){let s=null;if(e.TeX.processEnvironments&&/^\s*\\begin/.test(t))s=document.createDocumentFragment(),s.appendChild(Ri(t,void 0,e,!0));else{const i=Ii(t,e.TeX.delimiters);if(1===i.length&&"text"===i[0].type)return null;s=document.createDocumentFragment();for(let t=0;t<i.length;t++)"text"===i[t].type?s.appendChild(document.createTextNode(i[t].data)):s.appendChild(Ri(i[t].data,i[t].mathstyle,e,!0))}return s}Pi.prototype.undo_=Pi.prototype.undo,Pi.prototype.redo_=Pi.prototype.redo,Pi.prototype.scrollIntoView_=Pi.prototype.scrollIntoView,Pi.prototype.scrollToStart_=Pi.prototype.scrollToStart,Pi.prototype.scrollToEnd_=Pi.prototype.scrollToEnd,Pi.prototype.insert_=Pi.prototype.$insert;const Hi={namespace:"",skipTags:["noscript","style","textarea","pre","code","annotation","annotation-xml"],processScriptType:"math/tex",ignoreClass:"tex2jax_ignore",processClass:"tex2jax_process",preserveOriginalContent:!0,renderAccessibleContent:"mathml",TeX:{disabled:!1,processEnvironments:!0,delimiters:{inline:[["\\(","\\)"]],display:[["$$","$$"],["\\[","\\]"]]}}};var Wi={renderMathInElement:function(t,e){try{if((e=Object.assign({},Hi,e)).ignoreClassPattern=new RegExp(e.ignoreClass),e.processClassPattern=new RegExp(e.processClass),e.processScriptTypePattern=new RegExp(e.processScriptType),e.macros=nt,e.namespace){if(!/^[a-z]+[-]?$/.test(e.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(e.namespace)||(e.namespace+="-")}!function t(e,s){const i=e.getAttribute("data-"+s.namespace+"original-content");if(i){const t=Ri(i,e.getAttribute("data-"+s.namespace+"mathstyle"),s,!1);null!=t&&(e.textContent="",e.appendChild(t))}else{if(1===e.childNodes.length&&3===e.childNodes[0].nodeType){const t=e.childNodes[0].textContent;if(s.TeX.processEnvironments&&/^\s*\\begin/.test(t))return e.textContent="",void e.appendChild(Ri(t,void 0,s,!0));const i=Ii(t,s.TeX.delimiters);if(1===i.length&&"math"===i[0].type)return e.textContent="",void e.appendChild(Ri(i[0].data,i[0].mathstyle,s,!0));if(1===i.length&&"text"===i[0].type)return}for(let i=0;i<e.childNodes.length;i++){const a=e.childNodes[i];if(3===a.nodeType){const t=Ni(a.textContent,s);t&&(i+=t.childNodes.length-1,e.replaceChild(t,a))}else if(1===a.nodeType){const e=a.nodeName.toLowerCase();if("script"===e&&s.processScriptTypePattern.test(a.type)){let t="displaystyle";for(const e of a.type.split(";")){const s=e.split("=");"mode"===s[0].toLowerCase()&&(t="display"===s[1].toLoweCase()?"displaystyle":"textstyle")}const e=Ri(a.textContent,t,s,!0);a.parentNode.replaceChild(e,a)}else(s.processClassPattern.test(a.className)||!s.skipTags.includes(e)&&!s.ignoreClassPattern.test(a.className))&&t(a,s)}}}}(t,e)}catch(t){Error}}};function Vi(t,e){if(!t)return null;let s=null;Array.isArray(e)&&(s=e.slice(),e=s.shift());let i=null;if("number"==typeof e&&e<t.length)return s&&s.length>0?Vi(t[e].children,s):t[e];if("string"==typeof e){for(let a=0;a<t.length;a++){if(t[a].body===e)return s&&s.length>0?Vi(t[a].children,s):t[a];if(i=Vi(t[a].children,e),i)return i}return i}return null}function ji(t,e){const s=Vi(t,e);return s?s.classes||"":null}function Ui(t,e,s){const i=t[e];return"string"==typeof i?s+e+':"'+i+'",\n':"boolean"==typeof i||"number"==typeof i?s+e+":"+i+",\n":Array.isArray(i)?s+e+":"+Gi(i,s+"\t")+",\n":""}function Gi(t,e){if(!t)return"";e=e||"";let s="";if(Array.isArray(t)){if(0===t.length)return"";s+="[\n";for(let i=0;i<t.length;i++)s+=Gi(t[i],e+"\t")+",\n";s+=e+"]\n"}else s=e+"{\n",s+=Ui(t,"type",e),s+=Ui(t,"value",e),s+=Ui(t,"fontFamily",e),s+=Ui(t,"hasBarLine",e),s+=Ui(t,"leftDelim",e),s+=Ui(t,"rightDelim",e),s+=Ui(t,"numer",e),s+=Ui(t,"denom",e),s+=Ui(t,"limits",e),s+=Ui(t,"symbol",e),s+=Ui(t,"framecolor",e),s+=Ui(t,"position",e),s+=Ui(t,"mathstyle",e),s+=Ui(t,"superscript",e),s+=Ui(t,"subscript",e),s+=Ui(t,"body",e),s+=Ui(t,"array",e),s+=e+"}";return s}function Zi(t,e){let s="";return t[e]&&(s+='<span class="styleprop">'+e+"=</span>",s+='<span class="stylevalue">',s+=t[e],s+='</span>" '),s}var Xi={mathlistToMarkup:function t(e,s){if(!e)return"";s=s||"";let i="";if(Array.isArray(e))for(let a=0;a<e.length;a++)i+=t(e[a],a+"."+s);else if(i="<br>"+s,e.type&&(i+='<span class="type',i+=e.isSelected?" selected":"",i+=e.caret?" caret":"",i+='">'+e.type+(e.caret?" caret ":"")+"</span>"),"string"==typeof e.body&&e.body.length>0&&(i+='&nbsp;<span class="value">',i+=e.body,(e.body.charCodeAt(0)<32||e.body.charCodeAt(0)>127)&&(i+="&nbsp;U+"+("000000"+e.body.charCodeAt(0).toString(16)).substr(-6)),i+="</span>&nbsp;"),"mathrm"===e.fontFamily?(i+='<span style="opacity:.2">',i+=Zi(e,"fontFamily"),i+="</span>"):i+=Zi(e,"fontFamily"),i+=Zi(e,"hasBarLine"),i+=Zi(e,"leftDelim"),i+=Zi(e,"rightDelim"),i+=Zi(e,"continuousFraction"),i+=Zi(e,"limits"),i+=Zi(e,"symbol"),i+=function(t,e){let s="";return t.framecolor&&(s+='<span class="styleprop">framecolor=</span>',s+='<span style="font-size:2em;vertical-align:middle;color:'+t.framecolor+'">&#9632;</span>',s+='<span class="stylevalue">',s+=t.framecolor,s+="</span>"),s}(e),i+=Zi(e,"mathstyle"),i+=Zi(e,"size"),i+=Zi(e,"cls"),i+=Zi(e,"delim"),i+=Zi(e,"shift"),i+=Zi(e,"width"),i+=Zi(e,"height"),i+=Zi(e,"position"),i+=t(e.overscript,s+"↑"),i+=t(e.underscript,s+"↓"),i+=t(e.superscript,s+"↑"),i+=t(e.subscript,s+"↓"),i+=t(e.body,s+"▶"),i+=t(e.numer,s+"▲"),i+=t(e.denom,s+"▼"),e.array)for(let a=0;a<e.array.length;a++){i+="<br>"+s+"⌗ row "+(a+1)+"/"+e.array.length;for(let r=0;r<e.array[a].length;r++)i+=t(e.array[a][r],s+"⌗〉")}return i},spanToMarkup:function t(e,s){s=s||"";let i="";if(Array.isArray(e))for(let a=0;a<e.length;a++)i+=t(e[a],s);else if(e&&"table"!==e.tag)if(i="<br>"+s,e.classes.includes("fontsize-ensurer"))i+="FONTSIZE-ENSURER";else{if(e.type&&(i+='<span class="type">'+e.type+"</span>"),e.body&&e.body.length>0&&(i+='<span class="value">'+e.body+"</span>"),e.classes&&e.classes.length>0&&(i+='&nbsp;<span class="classes">'+e.classes+"</span>"),e.isTight&&(i+='&nbsp;<span class="stylevalue"> tight </span>'),e.caret&&(i+='&nbsp;<span class="stylevalue"> caret </span>'),e.style)for(const t in e.style)Object.prototype.hasOwnProperty.call(e.style,t)&&(i+='&nbsp;<span class="styleprop">'+t+":</span>",i+='<span class="stylevalue"> '+e.style[t]+"</span>;&nbsp;");e.children&&(i+=t(e.children,s+"▷"))}else if(e){i+="<br>"+s+"table "+e.array[0].length+"&times;"+e.array.length;for(let a=0;a<e.array.length;a++)for(let r=0;r<e.array[a].length;r++)i+="<br>"+s+"["+(a+1)+", "+(r+1)+"] ",i+=t(e.array[a][r],"")}return i},mathlistToString:Gi,spanToString:function t(e,s){s=s||"";let i="";if(Array.isArray(e))if(0===e.length)i+="[]\n";else{i+="[\n";for(let a=0;a<e.length;a++)i+=t(e[a],"\t"+s+a+","),i+=a<e.length-1?",\n":"\n";i+=s+"]\n"}else{if(i=s+"{\n",e.type&&(i+=s+'type:"'+e.type+'",\n'),e.body&&e.body.length>0&&(i+=s+'body:"'+e.body+'",\n'),e.classes&&e.classes.length>0&&(i+=s+'classes:"'+e.classes+'",\n'),e.style)for(const t in e.style)Object.prototype.hasOwnProperty.call(e.style,t)&&(i+=s+t+':"',i+=e.style[t]+'",\n');e.children&&e.children.length>0&&(i+=s+"children:"+t(e.children,s)),i+=s+"}"}return i},hasClass:function(t,e,s){let i=ji(t,e);if(!i)return!1;i=i.split(" ");for(let t=0;t<i.length;t++)if(i[t]===s)return!0;return!1},getClasses:ji,getProp:function(t,e,s){const i=Vi(t,e);return i?i[s]:null},getStyle:function(t,e,s){const i=Vi(t,e);return i&&i.style?i.style[s]:null},getType:function(t,e){const s=Vi(t,e);return s?s.type:null},getTag:function(t,e){const s=Vi(t,e);return s?s.tag:null},latexToAsciiMath:function(t,e){return Ms(Me(t,e=e||"math",null,null))},asciiMathToLatex:function(t){return Ge(t,{format:"ASCIIMath"})}};function Yi(t,e){(e=e||{}).mathstyle=e.mathstyle||"displaystyle",e.letterShapeStyle=e.letterShapeStyle||"auto";const s=Me(t,"math",null,e.macros);if("mathlist"===e.format)return s;let i=se({mathstyle:e.mathstyle,letterShapeStyle:e.letterShapeStyle},s);if(i=function t(e){if(!e||0===e.length)return[];e[0].children=t(e[0].children);const s=[e[0]];for(let i=1;i<e.length;i++)s[s.length-1].tryCoalesceWith(e[i])||(e[i].children=t(e[i].children),s.push(e[i]));return s}(i),"span"===e.format)return i;const a=Z(i,"ML__base"),r=Z("","ML__strut");r.setStyle("height",a.height,"em");const n=[r];if(0!==a.depth){const t=Z("","ML__strut--bottom");t.setStyle("height",a.height+a.depth,"em"),t.setStyle("vertical-align",-a.depth,"em"),n.push(t)}return n.push(a),Z(n,"ML__mathlive").toMarkup()}function Ji(t,e){if(!ie.toMathML)return"";(e=e||{}).macros=e.macros||{},Object.assign(e.macros,nt);const s=Me(t,"math",null,e.macros);return ie.toMathML(s,e)}function Qi(t,e){if(!ie.toSpeakableText)return"";(e=e||{}).macros=e.macros||{},Object.assign(e.macros,nt);const s=Me(t,"math",null,e.macros);return ie.toSpeakableText(s,e)}function ta(t,e){if(!e&&window&&window.mathlive&&(e=window.mathlive.config),(e=e||{}).speechEngine&&"local"!==e.speechEngine)if("amazon"===e.speechEngine){if(window&&window.AWS){const s=new window.AWS.Polly({apiVersion:"2016-06-10"}),i={OutputFormat:"mp3",VoiceId:e.speechEngineVoice||"Joanna",Text:t,TextType:"ssml"};s.synthesizeSpeech(i,(function(t,e){if(t);else if(e&&e.AudioStream){const t=new Uint8Array(e.AudioStream),s=new Blob([t.buffer],{type:"audio/mpeg"}),i=URL.createObjectURL(s);new Audio(i).play().catch(t=>{})}}))}}else e.speechEngine;else{const e=new SpeechSynthesisUtterance(t);window&&window.speechSynthesis.speak(e)}}function ea(t,e,s){if(!window)return;if(!s&&window.mathlive&&(s=window.mathlive.config),"amazon"!==(s=s||{}).speechEngine)return void(s.handleSpeak&&s.handleSpeak(e));if(!window.AWS)return;const i=new window.AWS.Polly({apiVersion:"2016-06-10"}),a={OutputFormat:"json",VoiceId:s.speechEngineVoice||"Joanna",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};window.mathlive=window.mathlive||{},window.mathlive.readAloudElement=t;const r=s.onReadAloudStatus||window.mathlive.onReadAloudStatus;i.synthesizeSpeech(a,(function(t,e){if(t);else if(e&&e.AudioStream){const t=new TextDecoder("utf-8").decode(new Uint8Array(e.AudioStream));window.mathlive.readAloudMarks=t.split("\n").map(t=>t?JSON.parse(t):{}),window.mathlive.readAloudTokens=[];for(const t of window.mathlive.readAloudMarks)t.value&&window.mathlive.readAloudTokens.push(t.value);window.mathlive.readAloudCurrentMark="",a.OutputFormat="mp3",a.SpeechMarkTypes=[],i.synthesizeSpeech(a,(function(t,e){if(t);else if(e&&e.AudioStream){const t=new Uint8Array(e.AudioStream),s=new Blob([t.buffer],{type:"audio/mpeg"}),i=URL.createObjectURL(s);window.mathlive.readAloudAudio?window.mathlive.readAloudAudio.pause():(window.mathlive.readAloudAudio=new Audio,window.mathlive.readAloudAudio.addEventListener("ended",()=>{r&&r(window.mathlive.readAloudMathField,"ended"),window.mathlive.readAloudMathField?(window.mathlive.readAloudMathField._render(),window.mathlive.readAloudElement=null,window.mathlive.readAloudMathField=null,window.mathlive.readAloudTokens=[],window.mathlive.readAloudMarks=[],window.mathlive.readAloudCurrentMark=""):function t(e){e.classList.remove("highlight"),e.children&&Array.from(e.children).forEach(e=>{t(e)})}(window.mathlive.readAloudElement)}),window.mathlive.readAloudAudio.addEventListener("timeupdate",()=>{let t="";const e=1e3*window.mathlive.readAloudAudio.currentTime+100;for(const s of window.mathlive.readAloudMarks)s.time<e&&(t=s.value);window.mathlive.readAloudCurrentMark!==t&&(window.mathlive.readAloudCurrentToken=t,t&&t===window.mathlive.readAloudFinalToken?window.mathlive.readAloudAudio.pause():(window.mathlive.readAloudCurrentMark=t,function t(e,s){s&&e.dataset.atomId!==s?(e.classList.remove("highlight"),e.children&&e.children.length>0&&Array.from(e.children).forEach(e=>{t(e,s)})):(e.classList.add("highlight"),e.children&&e.children.length>0&&Array.from(e.children).forEach(e=>{t(e)}))}(window.mathlive.readAloudElement,window.mathlive.readAloudCurrentMark)))})),window.mathlive.readAloudAudio.src=i,r&&r(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()}}))}}))}function sa(t){let e=t;if("string"==typeof t&&(e=document.getElementById(t),!e))throw Error(`The element with ID "${t}" could not be found.`);return e}function ia(t,e){Wi&&((e=e||{}).renderToMarkup=e.renderToMarkup||Yi,e.renderToMathML=e.renderToMathML||Ji,e.renderToSpeakableText=e.renderToSpeakableText||Qi,e.macros=e.macros||nt,Wi.renderMathInElement(sa(t),e))}function aa(t){if(t.namespace){if(!/^[a-z]+[-]?$/.test(t.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(t.namespace)||(t.namespace+="-")}}const ra={latexToMarkup:Yi,latexToMathML:Ji,latexToSpeakableText:Qi,latexToAST:function(t,e){if(!ie.toAST)return{};(e=e||{}).macros=e.macros||{},Object.assign(e.macros,nt);const s=Me(t,"math",null,e.macros);return ie.toAST(s,e)},astToLatex:function(t,e){return function t(e,s){const i=Object.assign({precision:14,decimalMarker:".",groupSeparator:"\\, ",product:"\\cdot ",exponentProduct:"\\cdot ",exponentMarker:"",arcSeparator:"\\,",scientificNotation:"auto",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}"},s);let a="";if(void 0===e)return"";if("string"==typeof e)a=e;else if(e.latex)a=e.latex;else if(ii(e)){const s=si(e);if(s===-1/0)a="-\\infty ";else if(s===1/0)a="\\infty ";else if("object"!=typeof e.num||"string"!=typeof e.num.re&&"string"!=typeof e.num.im)a=isNaN(s)?"\\text{NaN}":Mi(e.num,i);else{const t=ai(e),s=ri(e);isNaN(t)||isNaN(s)?a="\\text{NaN}":Math.abs(s)<=Number.EPSILON&&Math.abs(t)<=Number.EPSILON?a="0":(Math.abs(t)>Number.EPSILON&&(a=Mi(t,i)),Math.abs(s)>Number.EPSILON&&(Math.abs(t)>Number.EPSILON&&(a+=s>0?"+":""),a+=(1!==Math.abs(s)?Mi(s,i):"")+"\\imaginaryI "))}ni(e)&&(a+="^{"+t(e.sup,i)+"}"),oi(e)&&(a+="_{"+t(e.sub,i)+"}")}else if(e.group)a=t(e.group,i),ii(e.group)||ei(e.group)?0!==ri(e.group)&&(a=ki(e.fence||"(),",a)):a=ki(e.fence||"(),",a),ni(e)&&(a+="^{"+t(e.sup,i)+"}"),oi(e)&&(a+="_{"+t(e.sub,i)+"}");else if(e.fn)if("bind"===e.fn){if(a=t(Hs(e,0),i)+"|_{",e.arg&&2===e.arg.length)a+=t(Hs(e,1));else{let s="";for(let i=1;i<e.arg.length;i+=2)a+=s+t(Hs(e,i))+" = "+t(Hs(e,i+1)),s=", "}a+="}"}else if("divide"===e.fn)a="\\frac{"+t(Hs(e,0),i)+"}{"+t(Hs(e,1),i)+"}";else if("negate"===e.fn)a="-"+t(Hs(e,0),i);else if("subtract"===e.fn)a=t(Hs(e,0),i)+" - "+t(Hs(e,1),i);else if("add"!==e.fn&&"multiply"!==e.fn||!Array.isArray(e.arg))if("list"===e.fn||"list2"===e.fn){const s=[];for(const a of e.arg)s.push(t(a,i));a=s.join("list2"===e.fn?"; ":", ")}else if("sequence"===e.fn)a=e.arg.map(e=>t(e,i)).join("");else if("text"===e.fn)a="\\text{"+(e.arg[0]||"")+"}";else if("pow"===e.fn&&Array.isArray(e.arg)&&e.arg.length>=2)a=t(Hs(e,0),i),ii(Hs(e,0))||ei(Hs(e,0))||(a=ki(e.fence||"(),",a)),a+="^{"+t(Hs(e,1),i)+"}";else if("equal"===e.fn&&e.arg&&e.arg.length>2)a=e.arg.map(e=>t(e,i)).join(" = ");else{const s=function(t){let e=Rs[t];return e||(e=t.length>1?"\\operatorname{"+t+"}%^%_ %":t+"%^%_ %"),e}(e.fn);a=s;let r="";if(/%(?![01_^])/.test(s)&&Array.isArray(e.arg)&&e.arg.length>1)a+=ki(e.fence||"(),",...e.arg.map(e=>t(e,i)));else if(Array.isArray(e.arg)&&e.arg.length>0){const n=t(Hs(e,0),i),o=t(Hs(e,1),i),l=[...e.arg];/%0/.test(s)&&(a=a.replace("%0",n),l.shift()),/%1/.test(s)&&(a=a.replace("%1",o),l.shift()),l.length>0&&(r=ki(e.fence||"(),",...l.map(e=>t(e,i))))}else r=ki(e.fence||"(),","");a=ni(e)?a.replace("%^","^{"+t(e.sup,i)+"}"):a.replace("%^",""),a=oi(e)?a.replace("%_","_{"+t(e.sub,i)+"}"):a.replace("%_",""),a=a.replace(/%(?![01_^])/,r),a=a.replace("%0","").replace("%1","")}else{const s=[];for(const a of e.arg)"add"===a.fn||"subtract"===a.fn||0!==ai(r=a)&&0!==ri(r)||ni(e)&&0!==ri(a)&&1!==ri(a)?s.push(ki("() ",t(a,i))):s.push(t(a,i));if("multiply"===e.fn)a=!e.arg||2!==e.arg.length||!ii(e.arg[0])&&"divide"!==e.arg[0].fn||ii(e.arg[1])&&(0!==ai(e.arg[1])||1!==ri(e.arg[1]))?s.join(" \\times "):s[0]+s[1];else if(e.arg&&1===e.arg.length)a="negate"===e.arg[0].fn||ii(e.arg[0])&&si(e.arg[0])<0?s[0]:"+"+s[0];else{a=s[0];for(let t=1;t<e.arg.length;t++)"negate"===e.arg[t].fn||ii(e.arg[t])&&si(e.arg[t])<0?a+=s[t]:a+=" + "+s[t]}}else if("string"==typeof e.sym){a=ei(e);let s=a.match(/^&#x([0-9a-f]+);$/i);s&&s[1]?a=String.fromCodePoint(parseInt(s[1],16)):(s=a.match(/^&#([0-9]+);$/i),s&&s[1]&&(a=String.fromCodePoint(parseInt(s[1])))),"string"==typeof e.variant&&(a="\\"+{normal:"mathrm","double-struck":"mathbb",bold:"mathbf",fraktur:"mathfrak",script:"mathscr","sans-serif":"mathsf",monospace:"mathtt"}[e.variant]+"{"+a+"}"),ni(e)&&(a+="^{"+t(e.sup,i)+"}"),oi(e)&&(a+="_{"+t(e.sub,i)+"}")}else"string"==typeof e.text&&(a="\\text{"+e.text+"}");var r;return"string"==typeof e.error&&(a="\\bbox[#F56165]{"+a+"}"),a}("string"==typeof t?JSON.parse(t):t,e)},makeMathField:function(t,e){return(e=e||{}).handleSpeak=e.handleSpeak||ta,e.handleReadAloud=e.handleReadAloud||ea,new Pi(sa(t),e)},renderMathInDocument:function(t){ia(document.body,t)},renderMathInElement:ia,revertToOriginalContent:function(t,e){(t=(t=sa(t)).children[1])instanceof Pi?t.revertToOriginalContent():(aa(e=e||{}),t.innerHTML=t.getAttribute("data-"+(e.namespace||"")+"original-content"))},getOriginalContent:function(t,e){return(t=(t=sa(t)).children[1])instanceof Pi?t.originalContent:(aa(e=e||{}),t.getAttribute("data-"+(e.namespace||"")+"original-content"))},readAloud:ea,readAloudStatus:function(){return window?(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio?window.mathlive.readAloudAudio.paused?"paused":window.mathlive.readAloudAudio.ended?"ready":"playing":"ready"):"unavailable"},pauseReadAloud:function(){window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio&&(window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"paused"),window.mathlive.readAloudAudio.pause()))},resumeReadAloud:function(){window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio&&(window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()))},playReadAloud:function(t,e){if(window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio)){let s=0;if(window.mathlive.readAloudFinalToken=null,t){window.mathlive.readAloudMarks=window.mathlive.readAloudMarks||[];for(const e of window.mathlive.readAloudMarks)e.value===t&&(s=e.time/1e3);let i=window.mathlive.readAloudTokens.indexOf(t);i>=0&&(i+=e,i<window.mathlive.readAloudTokens.length&&(window.mathlive.readAloudFinalToken=i))}window.mathlive.readAloudAudio.currentTime=s,window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()}},debug:{getStyle:Xi.getStyle,getType:Xi.getType,spanToString:Xi.spanToString,hasClass:Xi.hasClass,latexToAsciiMath:Xi.latexToAsciiMath,asciiMathToLatex:Xi.asciiMathToLatex}};export default ra;
