"use strict"
define([],function(){var e={Escape:"Esc"," ":"Spacebar",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},t={q:"KeyQ",w:"KeyW",e:"KeyE",r:"KeyR",t:"KeyT",y:"KeyY",u:"KeyU",i:"KeyI",o:"KeyO",p:"KeyP",a:"KeyA",s:"KeyS",d:"KeyD",f:"KeyF",g:"KeyG",h:"KeyH",j:"KeyJ",k:"KeyK",l:"KeyL",z:"KeyZ",x:"KeyX",c:"KeyC",v:"KeyV",b:"KeyB",n:"KeyN",m:"KeyM",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",0:"Digit0","!":"Shift-Digit1","@":"Shift-Digit2","#":"Shift-Digit3",$:"Shift-Digit4","%":"Shift-Digit5","^":"Shift-Digit6","&":"Shift-Digit7","*":"Shift-Digit8","(":"Shift-Digit9",")":"Shift-Digit0","-":"Minus",_:"Shift-Minus","/":"Slash","\\":"Backslash","|":"Shift-Backslash","?":"Shift-Slash"," ":"Spacebar"}
function i(i){var n=e[i.key]||i.code
n||(n=t[i.key.toLowerCase()]||i.key)
var o=[]
return i.ctrlKey&&o.push("Ctrl"),i.metaKey&&o.push("Meta"),i.altKey&&o.push("Alt"),i.shiftKey&&o.push("Shift"),0===o.length?n:(o.push(n),o.join("-"))}function n(e,t){var n=null,u=null,r=!1,c=function(){},s=c,a=void 0
function f(e){s=e,clearTimeout(a),a=setTimeout(function(){s=c,clearTimeout(a),e()})}function y(){if(!o(e)){var i=e.value
e.value="",i.length>0&&t.typedText(i)}}function l(o){return!(!r&&"ControlLeft"!==o.code&&"MetaLeft"!==o.code)||(n=o,u=null,"Dead"===o.key&&(e.blur(),e.focus()),t.keystroke(i(o),o))}function d(e){r||(n&&u&&t.keystroke(i(n),n),u=e,f(y))}function K(){r||!n||u||y()}function h(){e.focus()
var i=e.value
e.value="",i.length>0&&t.paste(i)}function g(){t.copy&&t.copy()}function D(){t.cut&&t.cut()}function v(){n=null,u=null,t.blur&&t.blur()}function p(){t.focus&&t.focus()}var S=e||t.container
S.addEventListener("keydown",l,!0),S.addEventListener("keypress",d,!0),S.addEventListener("keyup",K,!0),S.addEventListener("paste",h,!0),S.addEventListener("copy",g,!0),S.addEventListener("cut",D,!0),S.addEventListener("blur",v,!0),S.addEventListener("focus",p,!0),S.addEventListener("compositionstart",function(){r=!0},!0),S.addEventListener("compositionend",function(){r=!1,f(y)},!0),S.addEventListener("input",function(){r||f(y)})}function o(e){return e.selectionStart!==e.selectionEnd}return{delegateKeyboardEvents:n,select:n.select}})
